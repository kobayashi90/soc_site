(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{9578:function(n,e,t){"use strict";t.d(e,{X:function(){return Z},Z:function(){return p}});var s=t(4924),l=t(6042),a=t(9396),r=t(5893),i=t(7294),c=t(1555),u=t(4184),o=t.n(u),m=t(5675),d=t.n(m),x=t(1664),h=t.n(x),f=t(4876),j=t.n(f),b=t(1331);function p(n){var e=n.id,t=n.title,l=n.type,a=void 0===l?"album":l,i=n.status,c=n.height,u=void 0===c?300:c,m=n.width,x=void 0===m?300:m,f=n.placeholder,p=n.style,Z="coming"===i,g=f||b.l7,v=function(){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:j().img,children:(0,r.jsx)(d(),{alt:t,src:(0,b.Jn)(e,a),layout:"responsive",width:x,height:u,placeholder:"blur",blurDataURL:g})}),(0,r.jsx)("div",{className:"text-wrap text-center p-2",children:Z?"Coming Soon":t})]})};return(0,r.jsx)("div",{className:o()(j().albumBox,(0,s.Z)({},j().coming,Z)),style:p,children:Z?(0,r.jsx)(v,{}):(0,r.jsx)(h(),{href:"/".concat(a,"/").concat(e),children:(0,r.jsx)(v,{})})})}function Z(n){var e=n.items,t=n.type,s=n.width,u=n.height,m=n.style,d=n.colProps,x=void 0===d?{}:d;return e.map(function(n){return(0,i.createElement)(c.Z,(0,a.Z)((0,l.Z)({},x),{key:n.id,className:o()(j().albumBoxContainer,j()[t],"px-1 mb-2")}),(0,r.jsx)(p,(0,a.Z)((0,l.Z)({},n),{style:m,type:t,width:s,height:u})))})}},6658:function(n,e,t){"use strict";t.d(e,{Sf:function(){return L},Tv:function(){return D},ZP:function(){return q}});var s=t(6042),l=t(9396),a=t(828),r=t(7297),i=t(5893),c=t(1555),u=t(5005),o=t(4051),m=t(7931),d=t(2878),x=t(4716),h=t(7294),f=t(7283),j=t(3359),b=t(319),p=t(1641),Z=t(7422),g=t.n(Z),v=t(1664),N=t.n(v),_=t(1163),y=t(1292),C=t(5043),S=t(2729),k=t(9409),B=t.n(k),w=t(5162),E=t.n(w),I=t(4184),A=t.n(I);function $(){var n=(0,r.Z)(["\n  query ($albumId: ID!) {\n    album(id: $albumId){\n      comments {\n        text\n        username\n      }\n      selfComment {\n        text\n        anon\n      }\n    }\n  }\n"]);return $=function(){return n},n}function z(){var n=(0,r.Z)(["\n  mutation ($text: String!, $anon: Boolean!, $albumId: ID!) {\n    updateComment(text: $text, anon: $anon, albumId: $albumId)\n  }\n"]);return z=function(){return n},n}function P(){var n=(0,r.Z)(["\n  query {\n    recentComments {\n      text\n      anon\n      username\n      album {\n        id\n        title\n      }\n    }\n  }\n"]);return P=function(){return n},n}function T(n){var e=n.side,t=n.onClick;return(0,i.jsx)(c.Z,{xs:"auto",children:(0,i.jsx)(u.Z,{onClick:t,className:"h-100 rounded-3",variant:"outline-light",style:{fontSize:"30px"},children:(0,i.jsx)("span",{className:"fas fa-angle-".concat(e)})})})}function D(n){var e=(0,h.useState)(0),t=e[0],s=e[1],l=(0,h.useRef)(null),a=n.comments,r=void 0===a?[]:a,u=r[t],m=function(){return s(t===r.length-1?0:t+1)};return((0,h.useEffect)(function(){l.current&&clearTimeout(l.current),l.current=setTimeout(m,1e4)},[t]),0===r.length)?null:(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Z,{children:(0,i.jsx)(c.Z,{className:"blackblock m-2",children:(0,i.jsxs)(o.Z,{children:[r.length>1&&(0,i.jsx)(T,{side:"left",onClick:function(){return s(0===t?r.length-1:t-1)}}),(0,i.jsxs)(c.Z,{className:"py-3",style:{fontSize:"18px"},children:[u.text,(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"mt-2",children:[u.album&&(0,i.jsxs)("span",{children:[" - ",(0,i.jsx)(N(),{href:"/album/".concat(u.album.id),className:B().albumSpan,children:u.album.title})]}),!u.album&&u.username&&(0,i.jsxs)("span",{children:[" - ",(0,i.jsx)(N(),{href:"/profile/".concat(u.username),className:B().albumSpan,children:u.username})]})]})]}),r.length>1&&(0,i.jsx)(T,{side:"right",onClick:m})]})})})})}var F=(0,f.Ps)($()),R=(0,f.Ps)(z());function q(n){var e,t=function(n){var e=g()(n.target,{hash:!0});e=(0,l.Z)((0,s.Z)({},e),{anon:"on"===e.anon,albumId:r}),X({variables:e}).then(function(){O(),w(!1)}),n.preventDefault()},r=n.albumId,f=n.comments,p=(0,_.useRouter)(),Z=(0,S.Z)(),v=(0,h.useState)(!1),k=v[0],w=v[1],E=(0,h.useState)(0),I=E[0],A=E[1],$=(0,h.useState)(),z=$[0],P=$[1],D=(0,h.useRef)(null),q=(0,y.Z)().user,G=(0,a.Z)((0,j.t)(F),2),L=G[0],W=G[1],H=W.data,O=W.refetch,U=(0,a.Z)((0,b.D)(R),2),X=U[0],J=U[1].loading,M=(null==H?void 0:H.album.comments)||(void 0===f?[]:f),Q=null==H?void 0:null===(e=H.album)||void 0===e?void 0:e.selfComment;(0,h.useEffect)(function(){return L({variables:{albumId:r}})},[q,L,r]),(0,h.useEffect)(function(){D.current&&clearTimeout(D.current),D.current=setTimeout(K,1e4)},[I]),(0,h.useEffect)(function(){var n,e=null==H?void 0:null===(n=H.album)||void 0===n?void 0:n.selfComment;e&&P(e.text)},[H]),(0,h.useEffect)(function(){return P()},[r]);var V=M[I],K=function(){return A(I===M.length-1?0:I+1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{show:k,centered:!0,onHide:function(){return w(!1)},children:(0,i.jsx)(m.Z.Body,{className:"m-3",children:(0,i.jsxs)(d.Z,{onSubmit:t,style:{color:"black"},children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(d.Z.Group,{as:c.Z,children:(0,i.jsx)(x.Z,{required:!0,as:"textarea",name:"text",maxLength:300,onChange:function(n){return P(n.target.value)},defaultValue:z})})}),(0,i.jsx)(o.Z,{className:"mt-2",children:(0,i.jsx)(d.Z.Group,{as:c.Z,children:(0,i.jsx)(d.Z.Check,{type:"checkbox",label:Z("Comment_Anon"),name:"anon",defaultChecked:!!Q&&Q.anon})})}),(0,i.jsx)(o.Z,{className:"mt-2",children:(0,i.jsx)(c.Z,{className:"mx-auto",children:(0,i.jsx)(C.l,{loading:J,type:"submit",color:"primary",children:Z("Save comment")})})})]})})}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(c.Z,{className:"blackblock m-2",children:[V&&(0,i.jsxs)(o.Z,{children:[M.length>1&&(0,i.jsx)(T,{side:"left",onClick:function(){return A(0===I?M.length-1:I-1)}}),(0,i.jsxs)(c.Z,{className:"py-3",style:{fontSize:"18px"},children:[V.text,(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"mt-2",children:[V.album&&(0,i.jsxs)("span",{children:[" - ",(0,i.jsx)(N(),{href:"/album/".concat(V.album.id),className:B().albumSpan,children:V.album.title})]}),!V.album&&V.username&&(0,i.jsxs)("span",{children:[" - ",(0,i.jsx)(N(),{href:"/profile/".concat(V.username),className:B().albumSpan,children:V.username})]})]})]}),M.length>1&&(0,i.jsx)(T,{side:"right",onClick:K})]}),r&&(0,i.jsx)(o.Z,{className:"mt-3 justify-content-center",children:q?(0,i.jsx)(c.Z,{xs:3,children:(0,i.jsx)(u.Z,{onClick:function(){return q?w(!0):null},className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:Z(Q?"Edit comment":"Add comment")})}):(0,i.jsx)(c.Z,{xs:"4",children:(0,i.jsx)(u.Z,{onClick:function(){return p.replace("".concat(p.asPath,"?login"))},className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:Z("Comment_Login")})})})]})})]})}var G=(0,f.Ps)(P());function L(n){var e=(0,h.useState)(0),t=e[0],s=e[1],l=(0,h.useRef)(null),a=(0,p.a)(G),r=a.data,u=a.loading,m=(null==r?void 0:r.recentComments)||[];(0,h.useEffect)(function(){l.current&&clearTimeout(l.current),l.current=setTimeout(x,1e4)},[t]);var d=m[t],x=function(){return s(t===m.length-1?0:t+1)};return(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(o.Z,{className:"mt-3 px-3",children:(0,i.jsx)(c.Z,{className:A()(E().socials,""),children:u?(0,i.jsx)(C.Z,{className:"mx-auto",size:100}):d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(o.Z,{children:(0,i.jsxs)(c.Z,{className:"pb-3",style:{fontSize:"18px"},children:[d.text,(0,i.jsx)("br",{}),(0,i.jsxs)("div",{className:"mt-2",children:[d.album&&(0,i.jsxs)("span",{children:[" - ",(0,i.jsx)(N(),{href:"/album/".concat(d.album.id),className:B().albumSpan,children:d.album.title})]}),!d.album&&d.username&&(0,i.jsxs)("span",{children:[" - ",(0,i.jsx)(N(),{href:"/profile/".concat(d.username),className:B().albumSpan,children:d.username})]})]})]})}),(0,i.jsxs)(o.Z,{className:"d-flex justify-content-between",children:[(0,i.jsx)(T,{side:"left",onClick:function(){return s(0===t?m.length-1:t-1)}}),(0,i.jsx)(c.Z,{className:"d-flex align-items-center justify-content-center",children:(0,i.jsxs)("div",{children:[t+1," / ",m.length]})}),(0,i.jsx)(T,{side:"right",onClick:x})]})]}):null})})})}},4876:function(n){n.exports={albumBoxContainer:"AlbumBoxes_albumBoxContainer___5OUW",anim:"AlbumBoxes_anim__Xn34t",albumBox:"AlbumBoxes_albumBox__qjbi0",img:"AlbumBoxes_img__gFWAG",coming:"AlbumBoxes_coming__jiMAE"}},9409:function(n){n.exports={albumSpan:"Profile_albumSpan__O9GbQ"}},5162:function(n){n.exports={root:"Sidebar_root__WlHvb",socials:"Sidebar_socials__kDIkg"}}}]);