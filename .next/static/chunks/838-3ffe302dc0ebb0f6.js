(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[838],{9578:function(a,b,c){"use strict";c.d(b,{X:function(){return t},Z:function(){return s}});var d=c(4924),e=c(6042),f=c(9396),g=c(5893),h=c(7294),i=c(1555),j=c(4184),k=c.n(j),l=c(5675),m=c.n(l),n=c(1664),o=c.n(n),p=c(4876),q=c.n(p),r=c(1331);function s(a){var b=a.id,c=a.title,e=a.type,f=void 0===e?"album":e,h=a.status,i=a.height,j=void 0===i?300:i,l=a.width,n=void 0===l?300:l,p=a.placeholder,s=a.style,t="coming"===h,u=p||r.l7,v=function(){return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:q().img,children:(0,g.jsx)(m(),{alt:c,src:(0,r.Jn)(b,f),layout:"responsive",width:n,height:j,placeholder:"blur",blurDataURL:u})}),(0,g.jsx)("div",{className:"text-wrap text-center p-2",children:t?"Coming Soon":c})]})};return(0,g.jsx)("div",{className:k()(q().albumBox,(0,d.Z)({},q().coming,t)),style:s,children:t?(0,g.jsx)(v,{}):(0,g.jsx)(o(),{href:"/".concat(f,"/").concat(b),children:(0,g.jsx)(v,{})})})}function t(a){var b=a.items,c=a.type,d=a.width,j=a.height,l=a.style,m=a.colProps,n=void 0===m?{}:m;return b.map(function(a){return(0,h.createElement)(i.Z,(0,f.Z)((0,e.Z)({},n),{key:a.id,className:k()(q().albumBoxContainer,q()[c],"px-1 mb-2")}),(0,g.jsx)(s,(0,f.Z)((0,e.Z)({},a),{style:l,type:c,width:d,height:j})))})}},6658:function(a,b,c){"use strict";c.d(b,{Sf:function(){return Q},Tv:function(){return L},ZP:function(){return O}});var d=c(6042),e=c(9396),f=c(828),g=c(7297),h=c(5893),i=c(1555),j=c(5005),k=c(1608),l=c(7931),m=c(2878),n=c(4716),o=c(7294),p=c(7283),q=c(3359),r=c(319),s=c(1641),t=c(7422),u=c.n(t),v=c(1664),w=c.n(v),x=c(1163),y=c(1292),z=c(5043),A=c(2729),B=c(9409),C=c.n(B),D=c(5162),E=c.n(D),F=c(4184),G=c.n(F);function H(){var a=(0,g.Z)(["\n  query ($albumId: ID!) {\n    album(id: $albumId){\n      comments {\n        text\n        username\n      }\n      selfComment {\n        text\n        anon\n      }\n    }\n  }\n"]);return H=function(){return a},a}function I(){var a=(0,g.Z)(["\n  mutation ($text: String!, $anon: Boolean!, $albumId: ID!) {\n    updateComment(text: $text, anon: $anon, albumId: $albumId)\n  }\n"]);return I=function(){return a},a}function J(){var a=(0,g.Z)(["\n  query {\n    recentComments {\n      text\n      anon\n      username\n      album {\n        id\n        title\n      }\n    }\n  }\n"]);return J=function(){return a},a}function K(a){var b=a.side,c=a.onClick;return(0,h.jsx)(i.Z,{xs:"auto",children:(0,h.jsx)(j.Z,{onClick:c,className:"h-100 rounded-3",variant:"outline-light",style:{fontSize:"30px"},children:(0,h.jsx)("span",{className:"fas fa-angle-".concat(b)})})})}function L(a){var b=(0,o.useState)(0),c=b[0],d=b[1],e=(0,o.useRef)(null),f=a.comments,g=void 0===f?[]:f,j=g[c],l=function(){return d(c===g.length-1?0:c+1)};return((0,o.useEffect)(function(){e.current&&clearTimeout(e.current),e.current=setTimeout(l,1e4)},[c]),0===g.length)?null:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(k.Z,{children:(0,h.jsx)(i.Z,{className:"blackblock m-2",children:(0,h.jsxs)(k.Z,{children:[g.length>1&&(0,h.jsx)(K,{side:"left",onClick:function(){return d(0===c?g.length-1:c-1)}}),(0,h.jsxs)(i.Z,{className:"py-3",style:{fontSize:"18px"},children:[j.text,(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"mt-2",children:[j.album&&(0,h.jsxs)("span",{children:[" - ",(0,h.jsx)(w(),{href:"/album/".concat(j.album.id),className:C().albumSpan,children:j.album.title})]}),!j.album&&j.username&&(0,h.jsxs)("span",{children:[" - ",(0,h.jsx)(w(),{href:"/profile/".concat(j.username),className:C().albumSpan,children:j.username})]})]})]}),g.length>1&&(0,h.jsx)(K,{side:"right",onClick:l})]})})})})}var M=(0,p.Ps)(H()),N=(0,p.Ps)(I());function O(a){var b,c=function(a){var b=u()(a.target,{hash:!0});b=(0,e.Z)((0,d.Z)({},b),{anon:"on"===b.anon,albumId:g}),V({variables:b}).then(function(){T(),D(!1)}),a.preventDefault()},g=a.albumId,p=a.comments,s=(0,x.useRouter)(),t=(0,A.Z)(),v=(0,o.useState)(!1),B=v[0],D=v[1],E=(0,o.useState)(0),F=E[0],G=E[1],H=(0,o.useState)(),I=H[0],J=H[1],L=(0,o.useRef)(null),O=(0,y.Z)().user,P=(0,f.Z)((0,q.t)(M),2),Q=P[0],R=P[1],S=R.data,T=R.refetch,U=(0,f.Z)((0,r.D)(N),2),V=U[0],W=U[1],X=W.loading,Y=(null==S?void 0:S.album.comments)||(void 0===p?[]:p),Z=null==S?void 0:null===(b=S.album)|| void 0===b?void 0:b.selfComment;(0,o.useEffect)(function(){return Q({variables:{albumId:g}})},[O,Q,g]),(0,o.useEffect)(function(){L.current&&clearTimeout(L.current),L.current=setTimeout(_,1e4)},[F]),(0,o.useEffect)(function(){var a,b=null==S?void 0:null===(a=S.album)|| void 0===a?void 0:a.selfComment;b&&J(b.text)},[S]),(0,o.useEffect)(function(){return J()},[g]);var $=Y[F],_=function(){return G(F===Y.length-1?0:F+1)};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(l.Z,{show:B,centered:!0,onHide:function(){return D(!1)},children:(0,h.jsx)(l.Z.Body,{className:"m-3",children:(0,h.jsxs)(m.Z,{onSubmit:c,style:{color:"black"},children:[(0,h.jsx)(k.Z,{children:(0,h.jsx)(m.Z.Group,{as:i.Z,children:(0,h.jsx)(n.Z,{required:!0,as:"textarea",name:"text",maxLength:300,onChange:function(a){return J(a.target.value)},defaultValue:I})})}),(0,h.jsx)(k.Z,{className:"mt-2",children:(0,h.jsx)(m.Z.Group,{as:i.Z,children:(0,h.jsx)(m.Z.Check,{type:"checkbox",label:t("Comment_Anon"),name:"anon",defaultChecked:!!Z&&Z.anon})})}),(0,h.jsx)(k.Z,{className:"mt-2",children:(0,h.jsx)(i.Z,{className:"mx-auto",children:(0,h.jsx)(z.l,{loading:X,type:"submit",color:"primary",children:t("Save comment")})})})]})})}),(0,h.jsx)(k.Z,{children:(0,h.jsxs)(i.Z,{className:"blackblock m-2",children:[$&&(0,h.jsxs)(k.Z,{children:[Y.length>1&&(0,h.jsx)(K,{side:"left",onClick:function(){return G(0===F?Y.length-1:F-1)}}),(0,h.jsxs)(i.Z,{className:"py-3",style:{fontSize:"18px"},children:[$.text,(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"mt-2",children:[$.album&&(0,h.jsxs)("span",{children:[" - ",(0,h.jsx)(w(),{href:"/album/".concat($.album.id),className:C().albumSpan,children:$.album.title})]}),!$.album&&$.username&&(0,h.jsxs)("span",{children:[" - ",(0,h.jsx)(w(),{href:"/profile/".concat($.username),className:C().albumSpan,children:$.username})]})]})]}),Y.length>1&&(0,h.jsx)(K,{side:"right",onClick:_})]}),g&&(0,h.jsx)(k.Z,{className:"mt-3 justify-content-center",children:O?(0,h.jsx)(i.Z,{xs:3,children:(0,h.jsx)(j.Z,{onClick:function(){return O?D(!0):null},className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:t(Z?"Edit comment":"Add comment")})}):(0,h.jsx)(i.Z,{xs:"4",children:(0,h.jsx)(j.Z,{onClick:function(){return s.replace("".concat(s.asPath,"?login"))},className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:t("Comment_Login")})})})]})})]})}var P=(0,p.Ps)(J());function Q(a){var b=(0,o.useState)(0),c=b[0],d=b[1],e=(0,o.useRef)(null),f=(0,s.a)(P),g=f.data,j=f.loading,l=(null==g?void 0:g.recentComments)||[];(0,o.useEffect)(function(){e.current&&clearTimeout(e.current),e.current=setTimeout(n,1e4)},[c]);var m=l[c],n=function(){return d(c===l.length-1?0:c+1)};return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(k.Z,{className:"mt-3 px-3",children:(0,h.jsx)(i.Z,{className:G()(E().socials,""),children:j?(0,h.jsx)(z.Z,{className:"mx-auto",size:100}):m?(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(k.Z,{children:(0,h.jsxs)(i.Z,{className:"pb-3",style:{fontSize:"18px"},children:[m.text,(0,h.jsx)("br",{}),(0,h.jsxs)("div",{className:"mt-2",children:[m.album&&(0,h.jsxs)("span",{children:[" - ",(0,h.jsx)(w(),{href:"/album/".concat(m.album.id),className:C().albumSpan,children:m.album.title})]}),!m.album&&m.username&&(0,h.jsxs)("span",{children:[" - ",(0,h.jsx)(w(),{href:"/profile/".concat(m.username),className:C().albumSpan,children:m.username})]})]})]})}),(0,h.jsxs)(k.Z,{className:"d-flex justify-content-between",children:[(0,h.jsx)(K,{side:"left",onClick:function(){return d(0===c?l.length-1:c-1)}}),(0,h.jsx)(i.Z,{className:"d-flex align-items-center justify-content-center",children:(0,h.jsxs)("div",{children:[c+1," / ",l.length]})}),(0,h.jsx)(K,{side:"right",onClick:n})]})]}):null})})})}},4876:function(a){a.exports={albumBoxContainer:"AlbumBoxes_albumBoxContainer___5OUW",anim:"AlbumBoxes_anim__Xn34t",albumBox:"AlbumBoxes_albumBox__qjbi0",img:"AlbumBoxes_img__gFWAG",coming:"AlbumBoxes_coming__jiMAE"}},9409:function(a){a.exports={albumSpan:"Profile_albumSpan__O9GbQ"}},5162:function(a){a.exports={root:"Sidebar_root__WlHvb",socials:"Sidebar_socials__kDIkg"}}}])