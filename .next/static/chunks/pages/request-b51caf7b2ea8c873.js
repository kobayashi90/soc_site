(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{7224:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return n(502)}])},502:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return _},default:function(){return C}});var l=n(7297),t=n(5893),a=n(7294),r=n(682),i=n(1555),o=n(343),d=n(2878),c=n(4051),u=n(4716),h=n(2318),x=n(5147),j=n(7283),m=n(1641),p=n(782),f=n(4184),Z=n.n(f),g=n(3907),v=n(9738),b=n(4495),y=n.n(b);function N(){let e=(0,l.Z)(["\n  query ($state: String!, $donator: [Boolean!]!, $filter: String, $page: Int!, $limit: Int!) {\n    searchRequests(state: [$state], donator: $donator, filter: $filter, limit: $limit, page: $page) {\n      rows {\n        id\n        title\n        link\n        user\n        userID\n        state\n        donator\n        reason\n      }\n      count\n    }\n  }\n"]);return N=function(){return e},e}let k=["Complete","Pending","Hold"].map(e=>({label:e,value:e.toLowerCase()})),$=["Donators","Members"].map(e=>({label:e,value:"Donators"===e}));var _=!0;function C(){return(0,t.jsx)(r.Z,{children:(0,t.jsx)(i.Z,{children:(0,t.jsx)(q,{})})})}function w(e){let{request:s,setRequest:n}=e;return(0,t.jsx)(o.Z,{show:s,onHide:()=>n(),centered:!0,children:(0,t.jsx)(o.Z.Body,{children:(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(c.Z,{children:(0,t.jsxs)(d.Z.Group,{as:i.Z,children:[(0,t.jsx)(d.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,t.jsx)(d.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==s?void 0:s.title,readOnly:!0})]})}),(0,t.jsxs)(c.Z,{className:"mt-3",children:[(0,t.jsxs)(d.Z.Group,{as:i.Z,children:[(0,t.jsx)(d.Z.Label,{htmlFor:"link",style:{color:"black"},children:"Link:"}),(0,t.jsx)(d.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==s?void 0:s.link,readOnly:!0})]}),(0,t.jsxs)(d.Z.Group,{as:i.Z,children:[(0,t.jsx)(d.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Status:"}),(0,t.jsx)(d.Z.Control,{required:!0,type:"text",name:"state",defaultValue:null==s?void 0:s.state,readOnly:!0,style:{textTransform:"capitalize"}})]})]}),(null==s?void 0:s.reason)?(0,t.jsx)(c.Z,{className:"mt-3",children:(0,t.jsxs)(d.Z.Group,{as:i.Z,children:[(0,t.jsx)(d.Z.Label,{htmlFor:"reason",style:{color:"black"},defaultValue:null==s?void 0:s.reason,children:"Reason:"}),(0,t.jsx)(u.Z,{required:!0,as:"textarea",name:"reason",readOnly:!0})]})}):null]})})})}function q(){let[e,s]=(0,a.useState)(["pending"]),[n,l]=(0,a.useState)([!1]),[r,o]=(0,a.useState)(""),[x,j]=(0,a.useState)(),m=e=>{e.persist(),e.preventDefault(),o(e.target.value)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(w,{request:x,setRequest:j}),(0,t.jsxs)(d.Z,{className:"site-form blackblock my-5 py-4",children:[(0,t.jsx)(c.Z,{className:"mb-3",children:(0,t.jsx)(i.Z,{children:(0,t.jsx)(d.Z.Group,{children:(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(h.Z.Text,{children:"\uD83D\uDD0E"}),(0,t.jsx)(u.Z,{type:"text",onBlur:m,onKeyDown(e){"Enter"===e.key&&m(e)}})]})})})}),(0,t.jsxs)(c.Z,{className:"my-3",children:[(0,t.jsx)(i.Z,{md:"auto",children:(0,t.jsx)(d.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,t.jsx)(i.Z,{children:(0,t.jsx)(g.d7,{onChange:e=>s(e.map(e=>e.value)),name:"status",defaultValue:e.map(e=>k.find(s=>e===s.value)),options:k})})]}),(0,t.jsxs)(c.Z,{className:"my-3",children:[(0,t.jsx)(i.Z,{md:"auto",children:(0,t.jsx)(d.Z.Label,{htmlFor:"status",children:"Users:"})}),(0,t.jsx)(i.Z,{children:(0,t.jsx)(g.d7,{onChange:e=>l(e.map(e=>e.value)),name:"users",defaultValue:n.map(e=>({label:e?"Donators":"Members",value:e})),options:$})})]}),e.map(e=>(0,t.jsx)(F,{state:e,users:n,filter:r,setRequest:j},e))]})]})}function F(e){let{state:s,users:n,filter:l,setRequest:r}=e,o="hold"===s,d=(0,j.Ps)(N()),[u,h]=(0,a.useState)(0),{data:f,loading:g,error:b}=(0,m.a)(d,{variables:{state:s,donator:n,filter:l,page:u,limit:15}}),{rows:k,count:$}=(null==f?void 0:f.searchRequests)||{},_=$&&$>15;return b&&(console.log(b),p.Am.error("Failed to fetch requests")),g||(null==k?void 0:k.length)>0?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(c.Z,{className:"mt-4",children:(0,t.jsxs)(i.Z,{className:"d-flex",children:[(0,t.jsx)("h3",{className:"text-capitalize me-2",children:s}),_?(0,t.jsxs)("h3",{children:["(Showing ",15," results of ",$,")"]}):null]})}),(0,t.jsx)(c.Z,{children:(0,t.jsx)(i.Z,{style:{height:"500px"},children:(0,t.jsxs)("div",{className:Z()("overflow-auto h-100",y().table),children:[g&&(0,t.jsx)(v.Z,{dev:!0,className:"mx-auto"}),(null==k?void 0:k.length)>0&&(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(x.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"ID"}),(0,t.jsx)("th",{children:"Title"}),(0,t.jsx)("th",{children:"Link"}),(0,t.jsx)("th",{children:"User"}),(0,t.jsx)("th",{children:"Donator"}),o&&(0,t.jsx)("th",{children:"Reason"}),(0,t.jsx)("th",{})]})}),(0,t.jsx)("tbody",{children:(0,t.jsx)(function(){return null==k?void 0:k.map(e=>{let{id:s,title:n,link:l,user:a,userID:i,donator:d,reason:c}=e;return(0,t.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>r(e),children:[(0,t.jsx)("td",{children:s}),(0,t.jsx)("td",{children:n}),(0,t.jsx)("td",{children:l}),(0,t.jsx)("td",{children:a||(i?"<@".concat(i,">"):"Not Found")}),(0,t.jsx)("td",{style:{textAlign:"center"},children:d?"‚≠ê":""}),o&&(0,t.jsx)("td",{children:c})]},s)})},{})})]})})]})})}),(0,t.jsx)(c.Z,{children:_?(0,t.jsx)(function(){let e=Math.floor($/15),s=[];for(let n=0;n<=e;n++)s.push((0,t.jsx)("li",{className:"page-item",children:(0,t.jsx)("span",{onClick:()=>h(n),className:Z()(y().pageLink,{disabled:n===u},"nav-link"),children:n+1})},n));return(0,t.jsxs)("ul",{className:Z()(y().pagination,"pagination justify-content-center m-auto"),children:[u>0&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"page-item my-auto",children:(0,t.jsx)("span",{onClick:()=>h(0),className:"fas fa-angle-double-left align-middle nav-link"})}),(0,t.jsx)("li",{className:"page-item my-auto",children:(0,t.jsx)("span",{onClick:()=>h(u-1),className:"fas fa-angle-left align-middle nav-link"})})]}),s,u!==e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("li",{className:"page-item my-auto",children:(0,t.jsx)("span",{onClick:()=>h(u+1),className:"fas fa-angle-right align-middle nav-link"})}),(0,t.jsx)("li",{className:"page-item my-auto",children:(0,t.jsx)("span",{onClick:()=>h(e),className:"fas fa-angle-double-right align-middle nav-link"})})]}):null]})},{}):null})]}):null}},4495:function(e){e.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(e,s,n){"use strict";var l=n(4184),t=n.n(l),a=n(7294),r=n(6611),i=n(6792),o=n(6558),d=n(3045),c=n(5893);let u=(0,r.Z)("input-group-text",{Component:"span"}),h=e=>(0,c.jsx)(u,{children:(0,c.jsx)(o.Z,{type:"checkbox",...e})}),x=e=>(0,c.jsx)(u,{children:(0,c.jsx)(o.Z,{type:"radio",...e})}),j=a.forwardRef(({bsPrefix:e,size:s,hasValidation:n,className:l,as:r="div",...o},u)=>{e=(0,i.vE)(e,"input-group");let h=(0,a.useMemo)(()=>({}),[]);return(0,c.jsx)(d.Z.Provider,{value:h,children:(0,c.jsx)(r,{ref:u,...o,className:t()(l,e,s&&`${e}-${s}`,n&&"has-validation")})})});j.displayName="InputGroup",s.Z=Object.assign(j,{Text:u,Radio:x,Checkbox:h})},5147:function(e,s,n){"use strict";var l=n(4184),t=n.n(l),a=n(7294),r=n(6792),i=n(5893);let o=a.forwardRef(({bsPrefix:e,className:s,striped:n,bordered:l,borderless:a,hover:o,size:d,variant:c,responsive:u,...h},x)=>{let j=(0,r.vE)(e,"table"),m=t()(s,j,c&&`${j}-${c}`,d&&`${j}-${d}`,n&&`${j}-striped`,l&&`${j}-bordered`,a&&`${j}-borderless`,o&&`${j}-hover`),p=(0,i.jsx)("table",{...h,className:m,ref:x});if(u){let f=`${j}-responsive`;return"string"==typeof u&&(f=`${f}-${u}`),(0,i.jsx)("div",{className:f,children:p})}return p});s.Z=o}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7224)}),_N_E=e.O()}]);