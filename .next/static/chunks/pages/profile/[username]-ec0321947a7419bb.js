(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{6326:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[username]",function(){return c(8389)}])},6112:function(g,b,a){"use strict";a.d(b,{X:function(){return s},Z:function(){return r}});var h=a(9361),i=a(337),j=a(5893),k=a(7294),l=a(1555),c=a(4184),m=a.n(c),d=a(5675),n=a.n(d),e=a(1664),o=a.n(e),f=a(2327),p=a.n(f),q=a(599);function r(a){var g=a.id,s=a.title,b=a.type,i=void 0===b?"album":b,k=a.status,c=a.height,t=void 0===c?300:c,d=a.width,u=void 0===d?300:d,l=a.placeholder,r=a.style,e="coming"===k,v=l||q.l7,f=function(){return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("div",{className:p().img,children:(0,j.jsx)(n(),{alt:s,src:(0,q.Jn)(g,i),layout:"responsive",width:u,height:t,placeholder:"blur",blurDataURL:v})}),(0,j.jsx)("div",{className:"text-wrap text-center p-2",children:e?"Coming Soon":s})]})};return(0,j.jsx)("div",{className:m()(p().albumBox,(0,h.default)({},p().coming,e)),style:r,children:e?(0,j.jsx)(f,{}):(0,j.jsx)(o(),{href:"/".concat(i,"/").concat(g),children:(0,j.jsx)("a",{children:(0,j.jsx)(f,{})})})})}function s(a){var c=a.items,d=a.type,e=a.width,f=a.height,g=a.style,b=a.colProps,h=void 0===b?{}:b;return c.map(function(a){return(0,k.createElement)(l.Z,(0,i.Z)({},h,{key:a.id,className:m()(p().albumBoxContainer,p()[d],"px-1 mb-2")}),(0,j.jsx)(r,(0,i.Z)({},a,{style:g,type:d,width:e,height:f})))})}},9139:function(i,c,a){"use strict";a.d(c,{T:function(){return D},Z:function(){return G}});var j=a(337),k=a(4941),l=a(2378),m=a(5893),n=a(1555),o=a(5005),p=a(1608),q=a(343),r=a(2878),s=a(4716),t=a(7294),b=a(7283),u=a(3359),v=a(319),d=a(7422),w=a.n(d),e=a(1664),x=a.n(e),y=a(2446),z=a(9738),f=a(7983),A=a.n(f),B=a(6974);function g(){var a=(0,l.Z)(["\n  query ($ostId: ID!) {\n    album(id: $ostId){\n      comments {\n        text\n        username\n      }\n      selfComment {\n        text\n        anon\n      }\n    }\n  }\n"]);return g=function(){return a},a}function h(){var a=(0,l.Z)(["\n  mutation ($text: String!, $anon: Boolean!, $ostId: ID!) {\n    updateComment(text: $text, anon: $anon, ostId: $ostId)\n  }\n"]);return h=function(){return a},a}function C(a){var b=a.side,c=a.onClick;return(0,m.jsx)(n.Z,{xs:"auto",children:(0,m.jsx)(o.Z,{onClick:c,className:"h-100 rounded-3",variant:"outline-light",style:{fontSize:"30px"},children:(0,m.jsx)("span",{className:"fas fa-angle-".concat(b)})})})}function D(f){var c=(0,t.useState)(0),d=c[0],h=c[1],i=(0,t.useRef)(null),e=f.comments,b=void 0===e?[]:e,a=b[d],g=function(){return h(d===b.length-1?0:d+1)};return((0,t.useEffect)(function(){i.current&&clearTimeout(i.current),i.current=setTimeout(g,1e4)},[d]),0===b.length)?null:(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(p.Z,{children:(0,m.jsx)(n.Z,{className:"blackblock m-2",children:(0,m.jsxs)(p.Z,{children:[b.length>1&&(0,m.jsx)(C,{side:"left",onClick:function(){return h(0===d?b.length-1:d-1)}}),(0,m.jsxs)(n.Z,{className:"py-3",style:{fontSize:"18px"},children:[a.text,(0,m.jsx)("br",{}),(0,m.jsxs)("div",{className:"mt-2",children:[a.album&&(0,m.jsxs)("span",{children:[" - ",(0,m.jsx)(x(),{href:"/album/".concat(a.album.id),children:(0,m.jsx)("a",{className:A().albumSpan,children:a.album.title})})]}),!a.album&&a.username&&(0,m.jsxs)("span",{children:[" - ",(0,m.jsx)(x(),{href:"/profile/".concat(a.username),children:(0,m.jsx)("a",{className:A().albumSpan,children:a.username})})]})]})]}),b.length>1&&(0,m.jsx)(C,{side:"right",onClick:g})]})})})})}var E=(0,b.Ps)(g()),F=(0,b.Ps)(h());function G(e){var f=e.ostId,g=e.comments,c=(0,B.Z)(),h=(0,t.useState)(!1),L=h[0],Q=h[1],i=(0,t.useState)(0),l=i[0],R=i[1],S=(0,t.useRef)(null),D=(0,y.Z)().user,G=(0,k.Z)((0,u.t)(E),2),M=G[0],H=G[1],I=H.data,T=H.refetch,J=(0,k.Z)((0,v.D)(F),2),U=J[0],N=J[1],O=N.loading,K=(null==I?void 0:I.album)||{comments:void 0===g?[]:g},d=K.comments,b=K.selfComment;(0,t.useEffect)(function(){return M({variables:{ostId:f}})},[D,M,f]),(0,t.useEffect)(function(){S.current&&clearTimeout(S.current),S.current=setTimeout(P,1e4)},[l]);var a=d[l],P=function(){return R(l===d.length-1?0:l+1)};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(q.Z,{show:L,centered:!0,onHide:function(){return Q(!1)},children:(0,m.jsx)(q.Z.Body,{className:"m-3",children:(0,m.jsxs)(r.Z,{onSubmit:function(b){var a=w()(b.target,{hash:!0});a=(0,j.Z)({},a,{anon:"on"===a.anon,ostId:f}),U({variables:a}).then(function(){T(),Q(!1)}),b.preventDefault()},style:{color:"black"},children:[(0,m.jsx)(p.Z,{children:(0,m.jsx)(r.Z.Group,{as:n.Z,children:(0,m.jsx)(s.Z,{required:!0,as:"textarea",name:"text",maxLength:300,defaultValue:b?b.text:""})})}),(0,m.jsx)(p.Z,{className:"mt-2",children:(0,m.jsx)(r.Z.Group,{as:n.Z,children:(0,m.jsx)(r.Z.Check,{type:"checkbox",label:c("Comment_Anon"),name:"anon",defaultChecked:!!b&&b.anon})})}),(0,m.jsx)(p.Z,{className:"mt-2",children:(0,m.jsx)(n.Z,{className:"mx-auto",children:(0,m.jsx)(z.l,{loading:O,type:"submit",color:"primary",children:c("Save comment")})})})]})})}),(0,m.jsx)(p.Z,{children:(0,m.jsxs)(n.Z,{className:"blackblock m-2",children:[a&&(0,m.jsxs)(p.Z,{children:[d.length>1&&(0,m.jsx)(C,{side:"left",onClick:function(){return R(0===l?d.length-1:l-1)}}),(0,m.jsxs)(n.Z,{className:"py-3",style:{fontSize:"18px"},children:[a.text,(0,m.jsx)("br",{}),(0,m.jsxs)("div",{className:"mt-2",children:[a.album&&(0,m.jsxs)("span",{children:[" - ",(0,m.jsx)(x(),{href:"/album/".concat(a.album.id),children:(0,m.jsx)("a",{className:A().albumSpan,children:a.album.title})})]}),!a.album&&a.username&&(0,m.jsxs)("span",{children:[" - ",(0,m.jsx)(x(),{href:"/profile/".concat(a.username),children:(0,m.jsx)("a",{className:A().albumSpan,children:a.username})})]})]})]}),d.length>1&&(0,m.jsx)(C,{side:"right",onClick:P})]}),f&&(0,m.jsx)(p.Z,{className:"mt-3 justify-content-center",children:D?(0,m.jsx)(n.Z,{xs:3,children:(0,m.jsx)(o.Z,{onClick:function(){return D?Q(!0):null},className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:c(b?"Edit comment":"Add comment")})}):(0,m.jsx)(n.Z,{xs:"4",children:(0,m.jsx)(o.Z,{className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:c("Comment_Login")})})})]})})]})}},8389:function(h,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return E},default:function(){return F}});var i=a(9361),j=a(4941),k=a(2378),l=a(3929),m=a(5893),n=a(7294),c=a(7283),o=a(319),p=a(682),q=a(1608),r=a(1555),s=a(5005),t=a(343),u=a(2878),v=a(9490),d=a(5675),w=a.n(d),x=a(6112),y=a(9139),z=a(9738),e=a(7422),A=a.n(e),B=a(782),C=a(2446),f=a(9008),D=a.n(f);function g(){var a=(0,k.Z)(["\n  mutation updateUser($username: String, $password: String, $email: String, $pfp: Upload){\n    updateUser(username: $username, password: $password, email: $email, pfp: $pfp)\n  }\n"]);return g=function(){return a},a}var E=!0;function F(g){var b=(0,C.Z)().user,a=g.userProfile,h=a.comments,k=a.favorites,d=a.imgUrl,o=a.placeholder,c=a.username,t=(0,l.Z)(k),e=(0,n.useState)(!1),u=e[0],z=e[1],f=v.ou.now().diff(v.ou.fromMillis(a.createdAt),["years","months"]);return Object.entries(f.values).forEach(function(b){var a=(0,j.Z)(b,2),c=a[0],d=a[1];f=f.set((0,i.default)({},c,Math.floor(d)))}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(D(),{children:[(0,m.jsx)("meta",{property:"og:url",content:"/profile/".concat(c)},"url"),(0,m.jsx)("meta",{property:"og:description",content:"".concat(c,"'s awesome cloud")},"desc"),(0,m.jsx)("meta",{property:"og:image",content:d},"image")]}),(null==b?void 0:b.username)===c&&(0,m.jsx)(H,{setProfile:z,showProfile:u}),(0,m.jsxs)(p.Z,{children:[(0,m.jsxs)(q.Z,{className:"mt-3",children:[(0,m.jsx)(r.Z,{xs:"auto",className:"blackblock",children:(0,m.jsx)("div",{className:"p-1 position-relative",style:{height:"200px",width:"200px"},children:(0,m.jsx)(w(),{style:{borderRadius:"25px"},layout:"fill",alt:"placeholder",src:d,blurDataURL:o})})}),(0,m.jsxs)(r.Z,{className:"blackblock ms-3 my-0 d-flex justify-content-center flex-column",children:[(0,m.jsx)(q.Z,{children:(0,m.jsx)(r.Z,{md:12,children:(0,m.jsx)("h1",{className:"text-center ost-title",children:c})})}),(0,m.jsx)(q.Z,{className:"my-1",children:(0,m.jsxs)(r.Z,{className:"d-flex justify-content-center",children:[(0,m.jsx)("span",{className:"fw-bold me-1",children:"Floating for:"}),(0,m.jsx)("span",{children:f.toHuman()})]})}),(null==b?void 0:b.username)===a.username&&(0,m.jsx)(q.Z,{className:"mt-3",children:(0,m.jsx)(r.Z,{className:"d-flex justify-content-center",children:(0,m.jsx)(s.Z,{onClick:function(){return z(!0)},className:"rounded-3",variant:"outline-light",children:"Edit Account"})})})]})]}),(0,m.jsx)(y.T,{comments:h}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(q.Z,{children:(0,m.jsx)(r.Z,{children:(0,m.jsx)("h1",{style:{fontSize:"45px"},className:"text-center homeTitle py-2",id:"last-releases",children:"Favorites"})})}),(0,m.jsx)(q.Z,{className:"justify-content-center",children:(0,m.jsx)(x.X,{colProps:{md:3,xs:6},items:t.sort(function(a,b){return a.title>b.title})})})]})]})}var G=(0,c.Ps)(g());function H(b){var e=b.showProfile,h=b.setProfile,c=(0,C.Z)(),a=c.user,i=c.refetch,d=(0,j.Z)((0,o.D)(G),2),k=d[0],f=d[1],g=f.loading;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(t.Z,{show:e,centered:!0,onHide:function(){return h(!1)},children:(0,m.jsx)(t.Z.Body,{className:"m-3",children:(0,m.jsxs)(u.Z,{onSubmit:function(a){a.preventDefault();var b=A()(a.target,{hash:!0});b.pfp=a.target.elements.pfp.files[0],k({variables:b}).then(function(){B.Am.success("User updated succesfully!"),i(),h(!1)}).catch(function(a){B.Am.error("Failed to update user")})},children:[(0,m.jsxs)(q.Z,{children:[(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"username",style:{color:"black"},children:"Username:"}),(0,m.jsx)(u.Z.Control,{type:"text",name:"username",defaultValue:null==a?void 0:a.username})]}),(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"email",style:{color:"black"},children:"Email:"}),(0,m.jsx)(u.Z.Control,{type:"text",name:"email",defaultValue:null==a?void 0:a.email})]})]}),(0,m.jsx)(q.Z,{className:"mt-3",children:(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"password",style:{color:"black"},children:"Password (empty to keep it unchanged):"}),(0,m.jsx)(u.Z.Control,{type:"password",name:"password"})]})}),(0,m.jsx)(q.Z,{className:"mt-3",children:(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"pfp",style:{color:"black"},children:"Profile pic:"}),(0,m.jsx)(u.Z.Control,{type:"file",name:"pfp"})]})}),(0,m.jsx)(q.Z,{className:"mt-4",children:(0,m.jsx)(r.Z,{md:6,className:"mx-auto",children:(0,m.jsx)(z.l,{loading:g,type:"submit",className:"w-100",color:"primary",children:"Update User"})})})]})})})})}},2327:function(a){a.exports={albumBoxContainer:"AlbumBoxes_albumBoxContainer___5OUW",anim:"AlbumBoxes_anim__Xn34t",albumBox:"AlbumBoxes_albumBox__qjbi0",img:"AlbumBoxes_img__gFWAG",coming:"AlbumBoxes_coming__jiMAE"}},7983:function(a){a.exports={albumSpan:"Profile_albumSpan__O9GbQ"}}},function(a){a.O(0,[774,888,179],function(){return a(a.s=6326)}),_N_E=a.O()}])