(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{6326:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[username]",function(){return n(9846)}])},9846:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return E},default:function(){return S}});var r=n(4924),t=n(828),l=n(7297),a=n(9815),c=n(5893),i=n(7294),o=n(7283),u=n(319),d=n(682),m=n(4051),h=n(1555),x=n(5005),p=n(7931),f=n(2878),j=n(9490),Z=n(5675),y=n.n(Z),N=n(9578),b=n(6658),w=n(5043),v=n(7422),g=n.n(v),_=n(782),k=n(1292),P=n(9008),F=n.n(P);function U(){var e=(0,l.Z)(["\n  mutation updateUser($username: String, $password: String, $email: String, $pfp: Upload){\n    updateUser(username: $username, password: $password, email: $email, pfp: $pfp)\n  }\n"]);return U=function(){return e},e}var E=!0;function S(e){var s=(0,k.Z)().user,n=e.userProfile,l=n.comments,o=n.favorites,u=n.imgUrl,p=n.placeholder,f=n.username,Z=(0,a.Z)(o),w=(0,i.useState)(!1),v=w[0],g=w[1],_=j.ou.now().diff(j.ou.fromMillis(n.createdAt),["years","months"]);return Object.entries(_.values).forEach(function(e){var s=(0,t.Z)(e,2),n=s[0],l=s[1];_=_.set((0,r.Z)({},n,Math.floor(l)))}),(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)(F(),{children:[(0,c.jsx)("meta",{property:"og:url",content:"/profile/".concat(f)},"url"),(0,c.jsx)("meta",{property:"og:description",content:"".concat(f,"'s awesome cloud")},"desc"),(0,c.jsx)("meta",{property:"og:image",content:u},"image")]}),(null==s?void 0:s.username)===f&&(0,c.jsx)(C,{setProfile:g,showProfile:v}),(0,c.jsxs)(d.Z,{children:[(0,c.jsxs)(m.Z,{className:"mt-3",children:[(0,c.jsx)(h.Z,{xs:"auto",className:"blackblock",children:(0,c.jsx)("div",{className:"p-1 position-relative",style:{height:"200px",width:"200px"},children:(0,c.jsx)(y(),{style:{borderRadius:"25px"},layout:"fill",alt:"placeholder",src:u,blurDataURL:p})})}),(0,c.jsxs)(h.Z,{className:"blackblock ms-3 my-0 d-flex justify-content-center flex-column",children:[(0,c.jsx)(m.Z,{children:(0,c.jsx)(h.Z,{md:12,children:(0,c.jsx)("h1",{className:"text-center album-title",children:f})})}),(0,c.jsx)(m.Z,{className:"my-1",children:(0,c.jsxs)(h.Z,{className:"d-flex justify-content-center",children:[(0,c.jsx)("span",{className:"fw-bold me-1",children:"Floating for:"}),(0,c.jsx)("span",{children:_.toHuman()})]})}),(null==s?void 0:s.username)===n.username&&(0,c.jsx)(m.Z,{className:"mt-3",children:(0,c.jsx)(h.Z,{className:"d-flex justify-content-center",children:(0,c.jsx)(x.Z,{onClick:function(){return g(!0)},className:"rounded-3",variant:"outline-light",children:"Edit Account"})})})]})]}),(0,c.jsx)(b.Tv,{comments:l}),(0,c.jsx)("hr",{className:"style2 style-white"}),(0,c.jsx)(m.Z,{children:(0,c.jsx)(h.Z,{children:(0,c.jsx)("h1",{style:{fontSize:"45px"},className:"text-center homeTitle py-2",id:"last-releases",children:"Favorites"})})}),(0,c.jsx)(m.Z,{className:"justify-content-center",children:(0,c.jsx)(N.X,{colProps:{md:3,xs:6},items:Z.sort(function(e,s){return e.title>s.title})})})]})]})}var $=(0,o.Ps)(U());function C(e){var s=e.showProfile,n=e.setProfile,r=(0,k.Z)(),l=r.user,a=r.refetch,i=(0,t.Z)((0,u.D)($),2),o=i[0],d=i[1].loading,x=function(e){e.preventDefault();var s=g()(e.target,{hash:!0});s.pfp=e.target.elements.pfp.files[0],o({variables:s}).then(function(){_.Am.success("User updated succesfully!"),a(),n(!1)}).catch(function(e){_.Am.error("Failed to update user")})};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(p.Z,{show:s,centered:!0,onHide:function(){return n(!1)},children:(0,c.jsx)(p.Z.Body,{className:"m-3",children:(0,c.jsxs)(f.Z,{onSubmit:x,children:[(0,c.jsxs)(m.Z,{children:[(0,c.jsxs)(f.Z.Group,{as:h.Z,children:[(0,c.jsx)(f.Z.Label,{htmlFor:"username",style:{color:"black"},children:"Username:"}),(0,c.jsx)(f.Z.Control,{type:"text",name:"username",defaultValue:null==l?void 0:l.username})]}),(0,c.jsxs)(f.Z.Group,{as:h.Z,children:[(0,c.jsx)(f.Z.Label,{htmlFor:"email",style:{color:"black"},children:"Email:"}),(0,c.jsx)(f.Z.Control,{type:"text",name:"email",defaultValue:null==l?void 0:l.email})]})]}),(0,c.jsx)(m.Z,{className:"mt-3",children:(0,c.jsxs)(f.Z.Group,{as:h.Z,children:[(0,c.jsx)(f.Z.Label,{htmlFor:"password",style:{color:"black"},children:"Password (empty to keep it unchanged):"}),(0,c.jsx)(f.Z.Control,{type:"password",name:"password"})]})}),(0,c.jsx)(m.Z,{className:"mt-3",children:(0,c.jsxs)(f.Z.Group,{as:h.Z,children:[(0,c.jsx)(f.Z.Label,{htmlFor:"pfp",style:{color:"black"},children:"Profile pic:"}),(0,c.jsx)(f.Z.Control,{type:"file",name:"pfp"})]})}),(0,c.jsx)(m.Z,{className:"mt-4",children:(0,c.jsx)(h.Z,{md:6,className:"mx-auto",children:(0,c.jsx)(w.l,{loading:d,type:"submit",className:"w-100",color:"primary",children:"Update User"})})})]})})})})}}},function(e){e.O(0,[838,774,888,179],function(){return e(e.s=6326)}),_N_E=e.O()}]);