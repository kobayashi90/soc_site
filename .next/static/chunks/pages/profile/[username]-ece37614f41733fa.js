(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[240],{6326:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile/[username]",function(){return c(9846)}])},9578:function(g,b,a){"use strict";a.d(b,{X:function(){return t},Z:function(){return s}});var h=a(4924),i=a(6042),j=a(9396),k=a(5893),l=a(7294),m=a(1555),c=a(4184),n=a.n(c),d=a(5675),o=a.n(d),e=a(1664),p=a.n(e),f=a(4876),q=a.n(f),r=a(1331);function s(a){var g=a.id,s=a.title,b=a.type,i=void 0===b?"album":b,j=a.status,c=a.height,t=void 0===c?300:c,d=a.width,u=void 0===d?300:d,l=a.placeholder,m=a.style,e="coming"===j,v=l||r.l7,f=function(){return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("div",{className:q().img,children:(0,k.jsx)(o(),{alt:s,src:(0,r.Jn)(g,i),layout:"responsive",width:u,height:t,placeholder:"blur",blurDataURL:v})}),(0,k.jsx)("div",{className:"text-wrap text-center p-2",children:e?"Coming Soon":s})]})};return(0,k.jsx)("div",{className:n()(q().albumBox,(0,h.Z)({},q().coming,e)),style:m,children:e?(0,k.jsx)(f,{}):(0,k.jsx)(p(),{href:"/".concat(i,"/").concat(g),children:(0,k.jsx)("a",{children:(0,k.jsx)(f,{})})})})}function t(a){var c=a.items,d=a.type,e=a.width,f=a.height,g=a.style,b=a.colProps,h=void 0===b?{}:b;return c.map(function(a){return(0,l.createElement)(m.Z,(0,j.Z)((0,i.Z)({},h),{key:a.id,className:n()(q().albumBoxContainer,q()[d],"px-1 mb-2")}),(0,k.jsx)(s,(0,j.Z)((0,i.Z)({},a),{style:g,type:d,width:e,height:f})))})}},6658:function(i,c,a){"use strict";a.d(c,{T:function(){return E},Z:function(){return H}});var j=a(6042),k=a(9396),l=a(828),m=a(7297),n=a(5893),o=a(1555),p=a(5005),q=a(1608),r=a(343),s=a(2878),t=a(4716),u=a(7294),b=a(7283),v=a(3359),w=a(319),d=a(7422),x=a.n(d),e=a(1664),y=a.n(e),z=a(1292),A=a(5043),f=a(9409),B=a.n(f),C=a(2729);function g(){var a=(0,m.Z)(["\n  query ($ostId: ID!) {\n    album(id: $ostId){\n      comments {\n        text\n        username\n      }\n      selfComment {\n        text\n        anon\n      }\n    }\n  }\n"]);return g=function(){return a},a}function h(){var a=(0,m.Z)(["\n  mutation ($text: String!, $anon: Boolean!, $ostId: ID!) {\n    updateComment(text: $text, anon: $anon, ostId: $ostId)\n  }\n"]);return h=function(){return a},a}function D(a){var b=a.side,c=a.onClick;return(0,n.jsx)(o.Z,{xs:"auto",children:(0,n.jsx)(p.Z,{onClick:c,className:"h-100 rounded-3",variant:"outline-light",style:{fontSize:"30px"},children:(0,n.jsx)("span",{className:"fas fa-angle-".concat(b)})})})}function E(f){var c=(0,u.useState)(0),d=c[0],h=c[1],i=(0,u.useRef)(null),e=f.comments,b=void 0===e?[]:e,a=b[d],g=function(){return h(d===b.length-1?0:d+1)};return((0,u.useEffect)(function(){i.current&&clearTimeout(i.current),i.current=setTimeout(g,1e4)},[d]),0===b.length)?null:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.Z,{children:(0,n.jsx)(o.Z,{className:"blackblock m-2",children:(0,n.jsxs)(q.Z,{children:[b.length>1&&(0,n.jsx)(D,{side:"left",onClick:function(){return h(0===d?b.length-1:d-1)}}),(0,n.jsxs)(o.Z,{className:"py-3",style:{fontSize:"18px"},children:[a.text,(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"mt-2",children:[a.album&&(0,n.jsxs)("span",{children:[" - ",(0,n.jsx)(y(),{href:"/album/".concat(a.album.id),children:(0,n.jsx)("a",{className:B().albumSpan,children:a.album.title})})]}),!a.album&&a.username&&(0,n.jsxs)("span",{children:[" - ",(0,n.jsx)(y(),{href:"/profile/".concat(a.username),children:(0,n.jsx)("a",{className:B().albumSpan,children:a.username})})]})]})]}),b.length>1&&(0,n.jsx)(D,{side:"right",onClick:g})]})})})})}var F=(0,b.Ps)(g()),G=(0,b.Ps)(h());function H(e){var f=e.ostId,g=e.comments,c=(0,C.Z)(),h=(0,u.useState)(!1),M=h[0],R=h[1],i=(0,u.useState)(0),m=i[0],S=i[1],T=(0,u.useRef)(null),E=(0,z.Z)().user,H=(0,l.Z)((0,v.t)(F),2),N=H[0],I=H[1],J=I.data,U=I.refetch,K=(0,l.Z)((0,w.D)(G),2),V=K[0],O=K[1],P=O.loading,L=(null==J?void 0:J.album)||{comments:void 0===g?[]:g},d=L.comments,b=L.selfComment;(0,u.useEffect)(function(){return N({variables:{ostId:f}})},[E,N,f]),(0,u.useEffect)(function(){T.current&&clearTimeout(T.current),T.current=setTimeout(Q,1e4)},[m]);var a=d[m],Q=function(){return S(m===d.length-1?0:m+1)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.Z,{show:M,centered:!0,onHide:function(){return R(!1)},children:(0,n.jsx)(r.Z.Body,{className:"m-3",children:(0,n.jsxs)(s.Z,{onSubmit:function(b){var a=x()(b.target,{hash:!0});a=(0,k.Z)((0,j.Z)({},a),{anon:"on"===a.anon,ostId:f}),V({variables:a}).then(function(){U(),R(!1)}),b.preventDefault()},style:{color:"black"},children:[(0,n.jsx)(q.Z,{children:(0,n.jsx)(s.Z.Group,{as:o.Z,children:(0,n.jsx)(t.Z,{required:!0,as:"textarea",name:"text",maxLength:300,defaultValue:b?b.text:""})})}),(0,n.jsx)(q.Z,{className:"mt-2",children:(0,n.jsx)(s.Z.Group,{as:o.Z,children:(0,n.jsx)(s.Z.Check,{type:"checkbox",label:c("Comment_Anon"),name:"anon",defaultChecked:!!b&&b.anon})})}),(0,n.jsx)(q.Z,{className:"mt-2",children:(0,n.jsx)(o.Z,{className:"mx-auto",children:(0,n.jsx)(A.l,{loading:P,type:"submit",color:"primary",children:c("Save comment")})})})]})})}),(0,n.jsx)(q.Z,{children:(0,n.jsxs)(o.Z,{className:"blackblock m-2",children:[a&&(0,n.jsxs)(q.Z,{children:[d.length>1&&(0,n.jsx)(D,{side:"left",onClick:function(){return S(0===m?d.length-1:m-1)}}),(0,n.jsxs)(o.Z,{className:"py-3",style:{fontSize:"18px"},children:[a.text,(0,n.jsx)("br",{}),(0,n.jsxs)("div",{className:"mt-2",children:[a.album&&(0,n.jsxs)("span",{children:[" - ",(0,n.jsx)(y(),{href:"/album/".concat(a.album.id),children:(0,n.jsx)("a",{className:B().albumSpan,children:a.album.title})})]}),!a.album&&a.username&&(0,n.jsxs)("span",{children:[" - ",(0,n.jsx)(y(),{href:"/profile/".concat(a.username),children:(0,n.jsx)("a",{className:B().albumSpan,children:a.username})})]})]})]}),d.length>1&&(0,n.jsx)(D,{side:"right",onClick:Q})]}),f&&(0,n.jsx)(q.Z,{className:"mt-3 justify-content-center",children:E?(0,n.jsx)(o.Z,{xs:3,children:(0,n.jsx)(p.Z,{onClick:function(){return E?R(!0):null},className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:c(b?"Edit comment":"Add comment")})}):(0,n.jsx)(o.Z,{xs:"4",children:(0,n.jsx)(p.Z,{className:"w-100 rounded-3",variant:"outline-light",style:{fontSize:"18px"},children:c("Comment_Login")})})})]})})]})}},9846:function(h,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return E},default:function(){return F}});var i=a(4924),j=a(828),k=a(7297),l=a(9815),m=a(5893),n=a(7294),c=a(7283),o=a(319),p=a(682),q=a(1608),r=a(1555),s=a(5005),t=a(343),u=a(2878),v=a(9490),d=a(5675),w=a.n(d),x=a(9578),y=a(6658),z=a(5043),e=a(7422),A=a.n(e),B=a(782),C=a(1292),f=a(9008),D=a.n(f);function g(){var a=(0,k.Z)(["\n  mutation updateUser($username: String, $password: String, $email: String, $pfp: Upload){\n    updateUser(username: $username, password: $password, email: $email, pfp: $pfp)\n  }\n"]);return g=function(){return a},a}var E=!0;function F(g){var b=(0,C.Z)().user,a=g.userProfile,h=a.comments,k=a.favorites,d=a.imgUrl,o=a.placeholder,c=a.username,t=(0,l.Z)(k),e=(0,n.useState)(!1),u=e[0],z=e[1],f=v.ou.now().diff(v.ou.fromMillis(a.createdAt),["years","months"]);return Object.entries(f.values).forEach(function(b){var a=(0,j.Z)(b,2),c=a[0],d=a[1];f=f.set((0,i.Z)({},c,Math.floor(d)))}),(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)(D(),{children:[(0,m.jsx)("meta",{property:"og:url",content:"/profile/".concat(c)},"url"),(0,m.jsx)("meta",{property:"og:description",content:"".concat(c,"'s awesome cloud")},"desc"),(0,m.jsx)("meta",{property:"og:image",content:d},"image")]}),(null==b?void 0:b.username)===c&&(0,m.jsx)(H,{setProfile:z,showProfile:u}),(0,m.jsxs)(p.Z,{children:[(0,m.jsxs)(q.Z,{className:"mt-3",children:[(0,m.jsx)(r.Z,{xs:"auto",className:"blackblock",children:(0,m.jsx)("div",{className:"p-1 position-relative",style:{height:"200px",width:"200px"},children:(0,m.jsx)(w(),{style:{borderRadius:"25px"},layout:"fill",alt:"placeholder",src:d,blurDataURL:o})})}),(0,m.jsxs)(r.Z,{className:"blackblock ms-3 my-0 d-flex justify-content-center flex-column",children:[(0,m.jsx)(q.Z,{children:(0,m.jsx)(r.Z,{md:12,children:(0,m.jsx)("h1",{className:"text-center ost-title",children:c})})}),(0,m.jsx)(q.Z,{className:"my-1",children:(0,m.jsxs)(r.Z,{className:"d-flex justify-content-center",children:[(0,m.jsx)("span",{className:"fw-bold me-1",children:"Floating for:"}),(0,m.jsx)("span",{children:f.toHuman()})]})}),(null==b?void 0:b.username)===a.username&&(0,m.jsx)(q.Z,{className:"mt-3",children:(0,m.jsx)(r.Z,{className:"d-flex justify-content-center",children:(0,m.jsx)(s.Z,{onClick:function(){return z(!0)},className:"rounded-3",variant:"outline-light",children:"Edit Account"})})})]})]}),(0,m.jsx)(y.T,{comments:h}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(q.Z,{children:(0,m.jsx)(r.Z,{children:(0,m.jsx)("h1",{style:{fontSize:"45px"},className:"text-center homeTitle py-2",id:"last-releases",children:"Favorites"})})}),(0,m.jsx)(q.Z,{className:"justify-content-center",children:(0,m.jsx)(x.X,{colProps:{md:3,xs:6},items:t.sort(function(a,b){return a.title>b.title})})})]})]})}var G=(0,c.Ps)(g());function H(b){var e=b.showProfile,h=b.setProfile,c=(0,C.Z)(),a=c.user,i=c.refetch,d=(0,j.Z)((0,o.D)(G),2),k=d[0],f=d[1],g=f.loading;return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)(t.Z,{show:e,centered:!0,onHide:function(){return h(!1)},children:(0,m.jsx)(t.Z.Body,{className:"m-3",children:(0,m.jsxs)(u.Z,{onSubmit:function(a){a.preventDefault();var b=A()(a.target,{hash:!0});b.pfp=a.target.elements.pfp.files[0],k({variables:b}).then(function(){B.Am.success("User updated succesfully!"),i(),h(!1)}).catch(function(a){B.Am.error("Failed to update user")})},children:[(0,m.jsxs)(q.Z,{children:[(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"username",style:{color:"black"},children:"Username:"}),(0,m.jsx)(u.Z.Control,{type:"text",name:"username",defaultValue:null==a?void 0:a.username})]}),(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"email",style:{color:"black"},children:"Email:"}),(0,m.jsx)(u.Z.Control,{type:"text",name:"email",defaultValue:null==a?void 0:a.email})]})]}),(0,m.jsx)(q.Z,{className:"mt-3",children:(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"password",style:{color:"black"},children:"Password (empty to keep it unchanged):"}),(0,m.jsx)(u.Z.Control,{type:"password",name:"password"})]})}),(0,m.jsx)(q.Z,{className:"mt-3",children:(0,m.jsxs)(u.Z.Group,{as:r.Z,children:[(0,m.jsx)(u.Z.Label,{htmlFor:"pfp",style:{color:"black"},children:"Profile pic:"}),(0,m.jsx)(u.Z.Control,{type:"file",name:"pfp"})]})}),(0,m.jsx)(q.Z,{className:"mt-4",children:(0,m.jsx)(r.Z,{md:6,className:"mx-auto",children:(0,m.jsx)(z.l,{loading:g,type:"submit",className:"w-100",color:"primary",children:"Update User"})})})]})})})})}},4876:function(a){a.exports={albumBoxContainer:"AlbumBoxes_albumBoxContainer___5OUW",anim:"AlbumBoxes_anim__Xn34t",albumBox:"AlbumBoxes_albumBox__qjbi0",img:"AlbumBoxes_img__gFWAG",coming:"AlbumBoxes_coming__jiMAE"}},9409:function(a){a.exports={albumSpan:"Profile_albumSpan__O9GbQ"}}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=6326)}),_N_E=a.O()}])