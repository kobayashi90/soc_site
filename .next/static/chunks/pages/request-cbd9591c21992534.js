(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{7224:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return c(2437)}])},2437:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return A},default:function(){return B}});var d=c(7297),e=c(5893),f=c(7294),g=c(682),h=c(1555),i=c(343),j=c(2878),k=c(1608),l=c(4716),m=c(2318),n=c(5147),o=c(7283),p=c(7887),q=c(782),r=c(4184),s=c.n(r),t=c(2045),u=c(5043),v=c(8295),w=c.n(v);function x(){var a=(0,d.Z)(["\n  query ($state: String!, $donator: [Boolean!]!, $filter: String, $page: Int!, $limit: Int!) {\n    searchRequests(state: [$state], donator: $donator, filter: $filter, limit: $limit, page: $page) {\n      rows {\n        id\n        title\n        link\n        user\n        userID\n        state\n        donator\n        reason\n      }\n      count\n    }\n  }\n"]);return x=function(){return a},a}var y=["Complete","Pending","Hold"].map(function(a){return{label:a,value:a.toLowerCase()}}),z=["Donators","Members"].map(function(a){return{label:a,value:"Donators"===a}}),A=!0;function B(){return(0,e.jsx)(g.Z,{children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(D,{})})})}function C(a){var b=a.request,c=a.setRequest;return(0,e.jsx)(i.Z,{show:b,onHide:function(){return c()},centered:!0,children:(0,e.jsx)(i.Z.Body,{children:(0,e.jsxs)(j.Z,{children:[(0,e.jsx)(k.Z,{children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==b?void 0:b.title,readOnly:!0})]})}),(0,e.jsxs)(k.Z,{className:"mt-3",children:[(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"link",style:{color:"black"},children:"Link:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==b?void 0:b.link,readOnly:!0})]}),(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Status:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"state",defaultValue:null==b?void 0:b.state,readOnly:!0,style:{textTransform:"capitalize"}})]})]}),(null==b?void 0:b.reason)?(0,e.jsx)(k.Z,{className:"mt-3",children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"reason",style:{color:"black"},defaultValue:null==b?void 0:b.reason,children:"Reason:"}),(0,e.jsx)(l.Z,{required:!0,as:"textarea",name:"reason",readOnly:!0})]})}):null]})})})}function D(){var a=(0,f.useState)(["pending"]),b=a[0],c=a[1],d=(0,f.useState)([!1]),g=d[0],i=d[1],n=(0,f.useState)(""),o=n[0],p=n[1],q=(0,f.useState)(),r=q[0],s=q[1],u=function(a){a.persist(),a.preventDefault(),p(a.target.value)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(C,{request:r,setRequest:s}),(0,e.jsxs)(j.Z,{className:"site-form blackblock my-5 py-4",children:[(0,e.jsx)(k.Z,{className:"mb-3",children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(j.Z.Group,{children:(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(m.Z.Text,{children:"\uD83D\uDD0E"}),(0,e.jsx)(l.Z,{type:"text",onBlur:u,onKeyDown:function(a){"Enter"===a.key&&u(a)}})]})})})}),(0,e.jsxs)(k.Z,{className:"my-3",children:[(0,e.jsx)(h.Z,{md:"auto",children:(0,e.jsx)(j.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(t.d7,{onChange:function(a){return c(a.map(function(a){return a.value}))},name:"status",defaultValue:b.map(function(a){return y.find(function(b){return a===b.value})}),options:y})})]}),(0,e.jsxs)(k.Z,{className:"my-3",children:[(0,e.jsx)(h.Z,{md:"auto",children:(0,e.jsx)(j.Z.Label,{htmlFor:"status",children:"Users:"})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(t.d7,{onChange:function(a){return i(a.map(function(a){return a.value}))},name:"users",defaultValue:g.map(function(a){return{label:a?"Donators":"Members",value:a}}),options:z})})]}),b.map(function(a){return(0,e.jsx)(E,{state:a,users:g,filter:o,setRequest:s},a)})]})]})}function E(a){var b=function(){return null==D?void 0:D.map(function(a){var b=a.id,c=a.title,d=a.link,f=a.user,g=a.userID,h=a.donator,i=a.reason;return(0,e.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return j(a)},children:[(0,e.jsx)("td",{children:b}),(0,e.jsx)("td",{children:c}),(0,e.jsx)("td",{children:d}),(0,e.jsx)("td",{children:f||(g?"<@".concat(g,">"):"Not Found")}),(0,e.jsx)("td",{style:{textAlign:"center"},children:h?"‚≠ê":""}),l&&(0,e.jsx)("td",{children:i})]},b)})},c=function(){for(var a=function(a){c.push((0,e.jsx)("li",{className:"page-item",children:(0,e.jsx)("span",{onClick:function(){return v(a)},className:s()(w().pageLink,{disabled:a===t},"nav-link"),children:a+1})},a))},b=Math.floor(E/15),c=[],d=0;d<=b;d++)a(d);return(0,e.jsxs)("ul",{className:s()(w().pagination,"pagination justify-content-center m-auto"),children:[t>0&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("li",{className:"page-item my-auto",children:(0,e.jsx)("span",{onClick:function(){return v(0)},className:"fas fa-angle-double-left align-middle nav-link"})}),(0,e.jsx)("li",{className:"page-item my-auto",children:(0,e.jsx)("span",{onClick:function(){return v(t-1)},className:"fas fa-angle-left align-middle nav-link"})})]}),c,t!==b?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("li",{className:"page-item my-auto",children:(0,e.jsx)("span",{onClick:function(){return v(t+1)},className:"fas fa-angle-right align-middle nav-link"})}),(0,e.jsx)("li",{className:"page-item my-auto",children:(0,e.jsx)("span",{onClick:function(){return v(b)},className:"fas fa-angle-double-right align-middle nav-link"})})]}):null]})},d=a.state,g=a.users,i=a.filter,j=a.setRequest,l="hold"===d,m=(0,o.Ps)(x()),r=(0,f.useState)(0),t=r[0],v=r[1],y=(0,p.a)(m,{variables:{state:d,donator:g,filter:i,page:t,limit:15}}),z=y.data,A=y.loading,B=y.error,C=(null==z?void 0:z.searchRequests)||{},D=C.rows,E=C.count,F=E&&E>15;return B&&(console.log(B),q.Am.error("Failed to fetch requests")),A||(null==D?void 0:D.length)>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{className:"mt-4",children:(0,e.jsxs)(h.Z,{className:"d-flex",children:[(0,e.jsx)("h3",{className:"text-capitalize me-2",children:d}),F?(0,e.jsxs)("h3",{children:["(Showing ",15," results of ",E,")"]}):null]})}),(0,e.jsx)(k.Z,{children:(0,e.jsx)(h.Z,{style:{height:"500px"},children:(0,e.jsxs)("div",{className:s()("overflow-auto h-100",w().table),children:[A&&(0,e.jsx)(u.Z,{dev:!0,className:"mx-auto"}),(null==D?void 0:D.length)>0&&(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(n.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:"ID"}),(0,e.jsx)("th",{children:"Title"}),(0,e.jsx)("th",{children:"Link"}),(0,e.jsx)("th",{children:"User"}),(0,e.jsx)("th",{children:"Donator"}),l&&(0,e.jsx)("th",{children:"Reason"}),(0,e.jsx)("th",{})]})}),(0,e.jsx)("tbody",{children:(0,e.jsx)(b,{})})]})})]})})}),(0,e.jsx)(k.Z,{children:F?(0,e.jsx)(c,{}):null})]}):null}},8295:function(a){a.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6611),h=c(6792),i=c(6558),j=c(3045),k=c(5893);let l=(0,g.Z)("input-group-text",{Component:"span"}),m=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"checkbox",...a})}),n=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"radio",...a})}),o=f.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:g="div",...i},l)=>{a=(0,h.vE)(a,"input-group");let m=(0,f.useMemo)(()=>({}),[]);return(0,k.jsx)(j.Z.Provider,{value:m,children:(0,k.jsx)(g,{ref:l,...i,className:e()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});o.displayName="InputGroup",b.Z=Object.assign(o,{Text:l,Radio:n,Checkbox:m})},5147:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6792),h=c(5893);let i=f.forwardRef(({bsPrefix:a,className:b,striped:c,bordered:d,borderless:f,hover:i,size:j,variant:k,responsive:l,...m},n)=>{let o=(0,g.vE)(a,"table"),p=e()(b,o,k&&`${o}-${k}`,j&&`${o}-${j}`,c&&`${o}-${"string"==typeof c?`striped-${c}`:"striped"}`,d&&`${o}-bordered`,f&&`${o}-borderless`,i&&`${o}-hover`),q=(0,h.jsx)("table",{...m,className:p,ref:n});if(l){let r=`${o}-responsive`;return"string"==typeof l&&(r=`${r}-${l}`),(0,h.jsx)("div",{className:r,children:q})}return q});b.Z=i}},function(a){a.O(0,[45,774,888,179],function(){var b;return a(a.s=7224)}),_N_E=a.O()}])