(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[800],{7224:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/request",function(){return t(2437)}])},2437:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return _},default:function(){return q}});var s=t(7297),r=t(5893),l=t(7294),a=t(682),i=t(1555),o=t(7931),u=t(2878),c=t(4051),d=t(4716),h=t(2318),x=t(5147),j=t(7283),m=t(1641),f=t(782),p=t(4184),Z=t.n(p),v=t(2045),g=t(5043),b=t(8295),y=t.n(b);function k(){var e=(0,s.Z)(["\n  query ($state: String!, $donator: [Boolean!]!, $filter: String, $page: Int!, $limit: Int!) {\n    searchRequests(state: [$state], donator: $donator, filter: $filter, limit: $limit, page: $page) {\n      rows {\n        id\n        title\n        link\n        user\n        userID\n        state\n        donator\n        reason\n      }\n      count\n    }\n  }\n"]);return k=function(){return e},e}var N=["Complete","Pending","Hold"].map(function(e){return{label:e,value:e.toLowerCase()}}),$=["Donators","Members"].map(function(e){return{label:e,value:"Donators"===e}}),_=!0;function q(){return(0,r.jsx)(a.Z,{children:(0,r.jsx)(i.Z,{children:(0,r.jsx)(w,{})})})}function C(e){var n=e.request,t=e.setRequest;return(0,r.jsx)(o.Z,{show:n,onHide:function(){return t()},centered:!0,children:(0,r.jsx)(o.Z.Body,{children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(c.Z,{children:(0,r.jsxs)(u.Z.Group,{as:i.Z,children:[(0,r.jsx)(u.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,r.jsx)(u.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==n?void 0:n.title,readOnly:!0})]})}),(0,r.jsxs)(c.Z,{className:"mt-3",children:[(0,r.jsxs)(u.Z.Group,{as:i.Z,children:[(0,r.jsx)(u.Z.Label,{htmlFor:"link",style:{color:"black"},children:"Link:"}),(0,r.jsx)(u.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==n?void 0:n.link,readOnly:!0})]}),(0,r.jsxs)(u.Z.Group,{as:i.Z,children:[(0,r.jsx)(u.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Status:"}),(0,r.jsx)(u.Z.Control,{required:!0,type:"text",name:"state",defaultValue:null==n?void 0:n.state,readOnly:!0,style:{textTransform:"capitalize"}})]})]}),(null==n?void 0:n.reason)?(0,r.jsx)(c.Z,{className:"mt-3",children:(0,r.jsxs)(u.Z.Group,{as:i.Z,children:[(0,r.jsx)(u.Z.Label,{htmlFor:"reason",style:{color:"black"},defaultValue:null==n?void 0:n.reason,children:"Reason:"}),(0,r.jsx)(d.Z,{required:!0,as:"textarea",name:"reason",readOnly:!0})]})}):null]})})})}function w(){var e=(0,l.useState)(["pending"]),n=e[0],t=e[1],s=(0,l.useState)([!1]),a=s[0],o=s[1],x=(0,l.useState)(""),j=x[0],m=x[1],f=(0,l.useState)(),p=f[0],Z=f[1],g=function(e){e.persist(),e.preventDefault(),m(e.target.value)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C,{request:p,setRequest:Z}),(0,r.jsxs)(u.Z,{className:"site-form blackblock my-5 py-4",children:[(0,r.jsx)(c.Z,{className:"mb-3",children:(0,r.jsx)(i.Z,{children:(0,r.jsx)(u.Z.Group,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z.Text,{children:"\uD83D\uDD0E"}),(0,r.jsx)(d.Z,{type:"text",onBlur:g,onKeyDown:function(e){"Enter"===e.key&&g(e)}})]})})})}),(0,r.jsxs)(c.Z,{className:"my-3",children:[(0,r.jsx)(i.Z,{md:"auto",children:(0,r.jsx)(u.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,r.jsx)(i.Z,{children:(0,r.jsx)(v.d7,{onChange:function(e){return t(e.map(function(e){return e.value}))},name:"status",defaultValue:n.map(function(e){return N.find(function(n){return e===n.value})}),options:N})})]}),(0,r.jsxs)(c.Z,{className:"my-3",children:[(0,r.jsx)(i.Z,{md:"auto",children:(0,r.jsx)(u.Z.Label,{htmlFor:"status",children:"Users:"})}),(0,r.jsx)(i.Z,{children:(0,r.jsx)(v.d7,{onChange:function(e){return o(e.map(function(e){return e.value}))},name:"users",defaultValue:a.map(function(e){return{label:e?"Donators":"Members",value:e}}),options:$})})]}),n.map(function(e){return(0,r.jsx)(D,{state:e,users:a,filter:j,setRequest:Z},e)})]})]})}function D(e){var n=function(){return null==w?void 0:w.map(function(e){var n=e.id,t=e.title,s=e.link,l=e.user,a=e.userID,i=e.donator,o=e.reason;return(0,r.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return u(e)},children:[(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:s}),(0,r.jsx)("td",{children:l||(a?"<@".concat(a,">"):"Not Found")}),(0,r.jsx)("td",{style:{textAlign:"center"},children:i?"‚≠ê":""}),d&&(0,r.jsx)("td",{children:o})]},n)})},t=function(){for(var e=function(e){t.push((0,r.jsx)("li",{className:"page-item",children:(0,r.jsx)("span",{onClick:function(){return b(e)},className:Z()(y().pageLink,{disabled:e===v},"nav-link"),children:e+1})},e))},n=Math.floor(D/15),t=[],s=0;s<=n;s++)e(s);return(0,r.jsxs)("ul",{className:Z()(y().pagination,"pagination justify-content-center m-auto"),children:[v>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"page-item my-auto",children:(0,r.jsx)("span",{onClick:function(){return b(0)},className:"fas fa-angle-double-left align-middle nav-link"})}),(0,r.jsx)("li",{className:"page-item my-auto",children:(0,r.jsx)("span",{onClick:function(){return b(v-1)},className:"fas fa-angle-left align-middle nav-link"})})]}),t,v!==n?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:"page-item my-auto",children:(0,r.jsx)("span",{onClick:function(){return b(v+1)},className:"fas fa-angle-right align-middle nav-link"})}),(0,r.jsx)("li",{className:"page-item my-auto",children:(0,r.jsx)("span",{onClick:function(){return b(n)},className:"fas fa-angle-double-right align-middle nav-link"})})]}):null]})},s=e.state,a=e.users,o=e.filter,u=e.setRequest,d="hold"===s,h=(0,j.Ps)(k()),p=(0,l.useState)(0),v=p[0],b=p[1],N=(0,m.a)(h,{variables:{state:s,donator:a,filter:o,page:v,limit:15}}),$=N.data,_=N.loading,q=N.error,C=(null==$?void 0:$.searchRequests)||{},w=C.rows,D=C.count,F=D&&D>15;return q&&(console.log(q),f.Am.error("Failed to fetch requests")),_||(null==w?void 0:w.length)>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"mt-4",children:(0,r.jsxs)(i.Z,{className:"d-flex",children:[(0,r.jsx)("h3",{className:"text-capitalize me-2",children:s}),F?(0,r.jsxs)("h3",{children:["(Showing ",15," results of ",D,")"]}):null]})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(i.Z,{style:{height:"500px"},children:(0,r.jsxs)("div",{className:Z()("overflow-auto h-100",y().table),children:[_&&(0,r.jsx)(g.Z,{dev:!0,className:"mx-auto"}),(null==w?void 0:w.length)>0&&(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)(x.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Link"}),(0,r.jsx)("th",{children:"User"}),(0,r.jsx)("th",{children:"Donator"}),d&&(0,r.jsx)("th",{children:"Reason"}),(0,r.jsx)("th",{})]})}),(0,r.jsx)("tbody",{children:(0,r.jsx)(n,{})})]})})]})})}),(0,r.jsx)(c.Z,{children:F?(0,r.jsx)(t,{}):null})]}):null}},8295:function(e){e.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(e,n,t){"use strict";var s=t(4184),r=t.n(s),l=t(7294),a=t(6611),i=t(6792),o=t(6558),u=t(3045),c=t(5893);let d=(0,a.Z)("input-group-text",{Component:"span"}),h=e=>(0,c.jsx)(d,{children:(0,c.jsx)(o.Z,{type:"checkbox",...e})}),x=e=>(0,c.jsx)(d,{children:(0,c.jsx)(o.Z,{type:"radio",...e})}),j=l.forwardRef(({bsPrefix:e,size:n,hasValidation:t,className:s,as:a="div",...o},d)=>{e=(0,i.vE)(e,"input-group");let h=(0,l.useMemo)(()=>({}),[]);return(0,c.jsx)(u.Z.Provider,{value:h,children:(0,c.jsx)(a,{ref:d,...o,className:r()(s,e,n&&`${e}-${n}`,t&&"has-validation")})})});j.displayName="InputGroup",n.Z=Object.assign(j,{Text:d,Radio:x,Checkbox:h})},5147:function(e,n,t){"use strict";var s=t(4184),r=t.n(s),l=t(7294),a=t(6792),i=t(5893);let o=l.forwardRef(({bsPrefix:e,className:n,striped:t,bordered:s,borderless:l,hover:o,size:u,variant:c,responsive:d,...h},x)=>{let j=(0,a.vE)(e,"table"),m=r()(n,j,c&&`${j}-${c}`,u&&`${j}-${u}`,t&&`${j}-striped`,s&&`${j}-bordered`,l&&`${j}-borderless`,o&&`${j}-hover`),f=(0,i.jsx)("table",{...h,className:m,ref:x});if(d){let p=`${j}-responsive`;return"string"==typeof d&&(p=`${p}-${d}`),(0,i.jsx)("div",{className:p,children:f})}return f});n.Z=o}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7224)}),_N_E=e.O()}]);