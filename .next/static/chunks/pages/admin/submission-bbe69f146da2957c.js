(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{7434:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/submission",function(){return c(1833)}])},1833:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return z},default:function(){return A}});var d=c(7297),e=c(5893),f=c(7294),g=c(682),h=c(1555),i=c(7931),j=c(2878),k=c(1608),l=c(4716),m=c(2318),n=c(5147),o=c(7283),p=c(1641),q=c(782),r=c(4184),s=c.n(r),t=c(2045),u=c(5043),v=c(8295),w=c.n(v);function x(){var a=(0,d.Z)(["\n  query ($state: String!) {\n    submissions(state: [$state]) {\n      ","\n    }\n  }\n"]);return x=function(){return a},a}var y=["Pending","Rejected","Accepted","Published"].map(function(a){return{label:a,value:a.toLowerCase()}}),z=!0;function A(){return(0,e.jsx)(g.Z,{children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(C,{})})})}function B(a){var b=a.submission,c=a.setRequest,d=(0,f.useRef)(null);return(0,e.jsx)(i.Z,{show:b,onHide:function(){return c()},centered:!0,children:(0,e.jsx)(i.Z.Body,{children:(0,e.jsxs)(j.Z,{ref:d,children:[(0,e.jsx)(k.Z,{children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==b?void 0:b.title})]})}),(0,e.jsxs)(k.Z,{className:"mt-3",children:[(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"link",style:{color:"black"},children:"VGMDB:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==b?void 0:b.vgmdb})]}),(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Submitter:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==b?void 0:b.submitter.username})]})]}),(0,e.jsx)(k.Z,{className:"mt-3",children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"comment",style:{color:"black"},children:"Links:"}),(0,e.jsx)(l.Z,{required:!0,as:"textarea",name:"comment",value:null==b?void 0:b.links,readOnly:!0})]})})]})})})}function C(){var a=(0,f.useState)(["pending"]),b=a[0],c=a[1],d=(0,f.useState)(""),g=d[0],i=d[1],n=(0,f.useState)(),o=n[0],p=n[1],q=function(a){a.persist(),a.preventDefault(),i(a.target.value)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(B,{submission:o,setRequest:p}),(0,e.jsxs)(j.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,e.jsx)(k.Z,{className:"mb-3",children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(j.Z.Group,{children:(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(m.Z.Text,{children:"\uD83D\uDD0E"}),(0,e.jsx)(l.Z,{type:"text",onBlur:q,onKeyDown:function(a){"Enter"===a.key&&q(a)}})]})})})}),(0,e.jsxs)(k.Z,{className:"my-3",children:[(0,e.jsx)(h.Z,{md:"auto",children:(0,e.jsx)(j.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(t.d7,{onChange:function(a){return c(a.map(function(a){return a.value}))},required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:y})})]}),b.map(function(a){return(0,e.jsx)(D,{state:a,search:g.toLowerCase(),setRequest:p},a)})]})]})}function D(a){var b=function(){return j.submissions.filter(function(a){var b=a.title,c=a.link;return(null==b?void 0:b.toLowerCase().includes(d))||(null==c?void 0:c.toLowerCase())===d}).map(function(a){var b=a.id,c=a.title,d=a.vgmdb,g=a.submitter,h=a.request;return(0,e.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return f(a)},children:[(0,e.jsx)("td",{children:b}),(0,e.jsx)("td",{children:c}),(0,e.jsx)("td",{children:d}),h?(0,e.jsx)("td",{children:"âœ“"}):(0,e.jsx)("td",{}),(0,e.jsx)("td",{children:g.username})]},b)})},c=a.state,d=a.search,f=a.setRequest,g=(0,o.Ps)(x(),"\n  id\n  title\n  vgmdb\n  links\n  request {\n    id\n  }\n  submitter {\n    username\n  }\n"),i=(0,p.a)(g,{variables:{state:c}}),j=i.data,l=i.loading,m=i.error;return m&&(console.log(m),q.Am.error("Failed to fetch requests")),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{className:"mt-4",children:(0,e.jsx)(h.Z,{children:(0,e.jsx)("h3",{className:"text-capitalize",children:c})})}),(0,e.jsx)(k.Z,{children:(0,e.jsx)(h.Z,{style:{height:"500px"},children:(0,e.jsxs)("div",{className:s()("overflow-auto h-100",w().table),children:[l&&(0,e.jsx)(u.Z,{dev:!0,className:"mx-auto"}),j&&(0,e.jsxs)(n.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:"ID"}),(0,e.jsx)("th",{children:"Title"}),(0,e.jsx)("th",{children:"Link"}),(0,e.jsx)("th",{children:"Requested"}),(0,e.jsx)("th",{children:"Submitter"})]})}),(0,e.jsx)("tbody",{children:(0,e.jsx)(b,{})})]})]})})})]})}},8295:function(a){a.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6611),h=c(6792),i=c(6558),j=c(3045),k=c(5893);let l=(0,g.Z)("input-group-text",{Component:"span"}),m=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"checkbox",...a})}),n=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"radio",...a})}),o=f.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:g="div",...i},l)=>{a=(0,h.vE)(a,"input-group");let m=(0,f.useMemo)(()=>({}),[]);return(0,k.jsx)(j.Z.Provider,{value:m,children:(0,k.jsx)(g,{ref:l,...i,className:e()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});o.displayName="InputGroup",b.Z=Object.assign(o,{Text:l,Radio:n,Checkbox:m})},5147:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6792),h=c(5893);let i=f.forwardRef(({bsPrefix:a,className:b,striped:c,bordered:d,borderless:f,hover:i,size:j,variant:k,responsive:l,...m},n)=>{let o=(0,g.vE)(a,"table"),p=e()(b,o,k&&`${o}-${k}`,j&&`${o}-${j}`,c&&`${o}-striped`,d&&`${o}-bordered`,f&&`${o}-borderless`,i&&`${o}-hover`),q=(0,h.jsx)("table",{...m,className:p,ref:n});if(l){let r=`${o}-responsive`;return"string"==typeof l&&(r=`${r}-${l}`),(0,h.jsx)("div",{className:r,children:q})}return q});b.Z=i}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=7434)}),_N_E=a.O()}])