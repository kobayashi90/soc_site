(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{7612:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/album/[id]",function(){return c(9884)}])},9884:function(f,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return A},"default":function(){return B}});var g=a(5893),h=a(7294),c=a(7283),i=a(319),j=a(7887),k=a(682),l=a(1608),m=a(1555),n=a(2878),o=a(4716),p=a(782),q=a(3907),r=a(8046),s=a(2628),t=a(2446),u=a(599);function v(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function w(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function x(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function d(){var a=x(["\nquery downloads ($id: ID!) {\n  downloads(id: $id) {\n    id\n    title\n    small\n    links {\n      id\n      url\n      provider\n      custom\n      directUrl\n    }\n  }\n}\n"]);return d=function(){return a},a}function e(){var a=x(["\n    mutation updateAlbum(\n      $id: ID!,\n      $title: String,\n      $subTitle: String,\n      $cover: Upload,\n      $releaseDate: String,\n      $label: String,\n      $description: String,\n      $downloads: [DownloadInput],\n      $artists: [String],\n      $classes: [String],\n      $categories: [String],\n      $platforms: [ID],\n      $games: [String],\n      $animations: [ID],\n      $discs: [DiscInput],\n      $related: [ID],\n      $stores: [StoreInput],\n      $vgmdb: String,\n      $status: String!\n    ){\n      updateAlbum(\n        id: $id,\n        title: $title,\n        subTitle: $subTitle,\n        cover: $cover,\n        releaseDate: $releaseDate,\n        label: $label,\n        description: $description,\n        downloads: $downloads,\n        artists: $artists,\n        classes: $classes,\n        categories: $categories,\n        platforms: $platforms,\n        games: $games,\n        animations: $animations\n        discs: $discs,\n        related: $related,\n        stores: $stores,\n        vgmdb: $vgmdb,\n        status: $status\n      ){ id }\n    } \n  "]);return e=function(){return a},a}var y=(0,c.Ps)(d()),z=(0,c.Ps)(e()),A=!0;function B(a){return(0,g.jsx)(k.Z,{fluid:!0,children:(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(m.Z,{xs:2,children:(0,g.jsx)(r.W_,{title:"Edit"})}),(0,g.jsxs)(m.Z,{xs:10,children:[(0,g.jsx)(C,function(d){for(var a=1;a<arguments.length;a++){var c=null!=arguments[a]?arguments[a]:{},b=Object.keys(c);"function"==typeof Object.getOwnPropertySymbols&&(b=b.concat(Object.getOwnPropertySymbols(c).filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable}))),b.forEach(function(a){w(d,a,c[a])})}return d}({},a)),(0,g.jsx)(r.sH,{})]})]})})}function C(b){var c,d,e,f=b.id,a=b.album,B=b.classes,C=b.categories,k=(c=(0,i.D)(z),d=2,function(a){if(Array.isArray(a))return a}(c)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(c,d)||function(a,c){if(a){if("string"==typeof a)return v(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return v(a,c)}}(c,d)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),H=k[0],D=k[1].loading,w=(0,h.useState)(""),E=w[0],I=w[1],F=(0,t.Z)().user,x=(0,j.a)(y,{variables:{id:f}}),A=x.data,G=x.refetch;return(0,h.useEffect)(function(){return G({id:f})},[F,f,G]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsxs)("div",{id:"addAlbum",className:"mb-2 mt-3",children:["Editing ",'"'.concat(a.title,'"')," (",a.id,")"]}),(0,g.jsxs)(n.Z,{className:"site-form blackblock",onSubmit:function(b){b.persist(),b.preventDefault();var c=(0,u.ar)(b);c.id=a.id,H({mutation:z,variables:c}).then(function(a){p.Am.success('Updated "'.concat(c.title,'" succesfully!'))}).catch(function(a){console.log(a),p.Am.error(a.message,{autoclose:!1})})},children:[(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(m.Z,{md:3,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"title",children:"Title:"}),(0,g.jsx)(o.Z,{required:!0,type:"text",name:"title",defaultValue:a.title})]})}),(0,g.jsx)(m.Z,{md:3,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"subTitle",children:"Sub Title:"}),(0,g.jsx)(o.Z,{as:"textarea",name:"subTitle",defaultValue:a.subTitle})]})}),(0,g.jsx)(m.Z,{md:3,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"releaseDate",children:"Release Date:"}),(0,g.jsx)(o.Z,{required:!0,type:"date",name:"releaseDate",defaultValue:a.releaseDate})]})}),(0,g.jsx)(m.Z,{md:3,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"label",children:"Label:"}),(0,g.jsx)(o.Z,{type:"text",name:"label",defaultValue:a.label})]})})]}),(0,g.jsx)(l.Z,{className:"mb-3",children:(0,g.jsx)(m.Z,{children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"status",children:"Status:"}),(0,g.jsx)(q.d7,{isSingle:!0,required:!0,name:"status",defaultValue:{value:a.status,label:"string"!=typeof(e=a.status)?"":e.charAt(0).toUpperCase()+e.slice(1)},options:["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}})})]})})}),(0,g.jsx)(l.Z,{children:(0,g.jsx)(m.Z,{md:12,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"title",children:"Description:"}),(0,g.jsx)(o.Z,{as:"textarea",name:"description",defaultValue:a.description})]})})}),(0,g.jsx)("hr",{className:"style2 style-white"}),(0,g.jsxs)(l.Z,{className:"mb-3",children:[(0,g.jsx)(m.Z,{md:4,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"artists",children:"Artists:"}),(0,g.jsx)(o.Z,{name:"artists",as:"textarea",defaultValue:a.artists.map(function(a){return a.name}).join(",")})]})}),(0,g.jsx)(m.Z,{md:4,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"classes",children:"Classification:"}),(0,g.jsx)(q.d7,{defaultValue:a.classes,required:!0,name:"classes",options:B,onChange:function(a){return I(a&&1===a.length?a[0].label:"")}})]})}),(0,g.jsx)(m.Z,{md:4,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"categories",children:"Categories:"}),(0,g.jsx)(q.d7,{defaultValue:a.categories,required:!0,name:"categories",options:C})]})})]}),(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(m.Z,{md:6,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"vgmdb",children:"VGMdb:"}),(0,g.jsx)(o.Z,{defaultValue:a.vgmdb,name:"vgmdb",type:"text"})]})}),(0,g.jsx)(m.Z,{md:6,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"cover",children:"Cover:"}),(0,g.jsx)(o.Z,{name:"cover",type:"file",accept:"image/*"})]})})]}),(0,g.jsx)("hr",{className:"style2 style-white"}),(0,g.jsxs)(l.Z,{children:[(0,g.jsx)(m.Z,{md:4,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"games",children:"Games:"}),(0,g.jsx)(q.D_,{defaultValue:a.games,name:"games"})]})}),(0,g.jsx)(m.Z,{md:4,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"platforms",children:"Platforms:"}),(0,g.jsx)(q.J3,{type:E,defaultValue:a.platforms,name:"platforms"})]})}),(0,g.jsx)(m.Z,{md:4,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"animations",children:"Animations:"}),(0,g.jsx)(q.S7,{defaultValue:a.animations,name:"animations"})]})})]}),(0,g.jsx)("hr",{className:"style2 style-white"}),(0,g.jsx)(l.Z,{children:(0,g.jsx)(m.Z,{md:12,children:(0,g.jsxs)(n.Z.Group,{children:[(0,g.jsx)(n.Z.Label,{htmlFor:"related",children:"Related OSTs:"}),(0,g.jsx)(q.Q$,{defaultValue:a.related,name:"related"})]})})}),(0,g.jsx)("hr",{className:"style2 style-white"}),(0,g.jsx)(r.r8,{defaults:a.discs}),(0,g.jsx)("hr",{className:"style2 style-white"}),(0,g.jsx)(r.rL,{defaults:a.stores}),(0,g.jsx)("hr",{className:"style2 style-white"}),A&&(0,g.jsx)(r.ie,{defaults:A.downloads}),(0,g.jsx)(l.Z,{children:(0,g.jsx)(m.Z,{className:"m-auto",children:(0,g.jsx)(s.Z,{loading:D,type:"submit",color:"primary",children:"Save Changes"})})})]})]})}}},function(a){a.O(0,[907,46,774,888,179],function(){return a(a.s=7612)}),_N_E=a.O()}])