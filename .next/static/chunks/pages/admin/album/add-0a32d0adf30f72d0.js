(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{3337:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/album/add",function(){return n(7287)}])},7287:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return S},default:function(){return w}});var t=n(7297),l=n(5893),r=n(4051),a=n(1555),i=n(2878),c=n(4716),d=n(7294),o=n(7283),u=n(1641),m=n(3359),h=n(319),x=n(782),j=n(3907),Z=n(8046),b=n(2628),p=n(599),f=n(9738),g=n(2392);function $(){let e=(0,t.Z)(["\n  query {\n    categories {\n      name\n    }\n    classifications {\n      name\n    }     \n  }\n"]);return $=function(){return e},e}function v(){let e=(0,t.Z)(["\n    mutation createAlbum(\n      $title: String,\n      $subTitle: String,\n      $cover: Upload,\n      $releaseDate: String,\n      $label: String,\n      $description: String,\n      $downloads: [DownloadInput],\n      $artists: [String],\n      $categories: [String],\n      $classifications: [String],\n      $platforms: [ID],\n      $games: [String],\n      $animations: [ID],\n      $discs: [DiscInput],\n      $related: [ID],\n      $stores: [StoreInput],\n      $vgmdb: String,\n      $status: String!,\n      $request: ID\n    ){\n      createAlbum(\n        title: $title,\n        subTitle: $subTitle,\n        cover: $cover,\n        releaseDate: $releaseDate,\n        label: $label,\n        description: $description,\n        downloads: $downloads,\n        artists: $artists,\n        categories: $categories,\n        classifications: $classifications,\n        platforms: $platforms,\n        games: $games,\n        animations: $animations\n        discs: $discs,\n        related: $related,\n        stores: $stores,\n        vgmdb: $vgmdb,\n        status: $status,\n        request: $request\n      )\n      {\n        id\n      }\n    }\n  "]);return v=function(){return e},e}function y(){let e=(0,t.Z)(["\n  query ($search: String!){\n    vgmdb(search: $search){\n      vgmdbUrl\n      name\n      subTitle\n      releaseDate\n      artists\n      categories\n      classifications\n      tracklist {\n        number\n        body\n      }\n    }\n  }\n"]);return y=function(){return e},e}var S=!0;function w(){return(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(a.Z,{xs:2,children:(0,l.jsx)(Z.W_,{title:"Add"})}),(0,l.jsxs)(a.Z,{xs:10,children:[(0,l.jsx)(F,{}),(0,l.jsx)(Z.sH,{})]})]})}let N=(0,o.Ps)($()),L=(0,o.Ps)(v()),D=(0,o.Ps)(y());function F(e){let[s,n]=(0,d.useState)([]),[t,o]=(0,d.useState)([]),[$,v]=(0,d.useState)(),{data:y={}}=(0,u.a)(N),[S,{loading:w}]=(0,m.t)(D),{categories:F=[],classifications:G=[]}=y,_=(0,d.useRef)(null),A=(0,d.useRef)(null),q=(0,d.useRef)(null),C=(0,d.useRef)(null),T=(0,d.useRef)(null),[k,{loading:I}]=(0,h.D)(L,{refetchQueries:"searchAlbum"});async function P(e){e.persist(),e.preventDefault();let s=(0,p.ar)(e);k({variables:s}).then(n=>{x.Am.success('Added "'.concat(s.title,'" succesfully!')),e.target.reset()}).catch(e=>{console.log(e),x.Am.error(e.message,{autoclose:!1})})}async function R(){let{data:e}=await S({variables:{search:q.current.value}});if(null==e?void 0:e.vgmdb){let{vgmdb:s}=e,{vgmdbUrl:t,name:l,subTitle:r,releaseDate:a,artists:i,categories:c,classifications:d,tracklist:u}=s;A.current.value=a,q.current.value=t,_.current.value=l,C.current.value=r,T.current.value=i.join(","),n(c),o(d),v(u)}}return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{id:"addAlbum",className:"mb-2 mt-3",children:"Add Album"}),(0,l.jsxs)(i.Z,{className:"site-form blackblock",onSubmit:P,children:[(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(a.Z,{md:3,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"title",children:"Title:"}),(0,l.jsx)(c.Z,{ref:_,required:!0,type:"text",name:"title"})]})}),(0,l.jsx)(a.Z,{md:3,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"subTitle",children:"Sub Title:"}),(0,l.jsx)(c.Z,{ref:C,as:"textarea",name:"subTitle"})]})}),(0,l.jsx)(a.Z,{md:3,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"releaseDate",children:"Release Date:"}),(0,l.jsx)(c.Z,{ref:A,required:!0,type:"date",name:"releaseDate"})]})}),(0,l.jsx)(a.Z,{md:3,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"label",children:"Label:"}),(0,l.jsx)(c.Z,{type:"text",name:"label"})]})})]}),(0,l.jsx)(r.Z,{className:"mb-3",children:(0,l.jsx)(a.Z,{children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"status",children:"Status:"}),(0,l.jsx)(j.d7,{isSingle:!0,required:!0,name:"status",defaultValue:{value:"show",label:"Show"},options:["Show","Hidden","Coming"].map(e=>({label:e,value:e.toLowerCase()}))})]})})}),(0,l.jsxs)(r.Z,{className:"mb-3",children:[(0,l.jsx)(a.Z,{md:6,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"title",children:"Description:"}),(0,l.jsx)(c.Z,{as:"textarea",name:"description"})]})}),(0,l.jsx)(a.Z,{md:6,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"cover",children:"Cover:"}),(0,l.jsx)(c.Z,{required:!0,name:"cover",type:"file",accept:"image/*"})]})})]}),(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(a.Z,{md:6,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"vgmdb",children:"VGMdb:"}),(0,l.jsx)(c.Z,{ref:q,name:"vgmdb",type:"text"})]})}),(0,l.jsx)(a.Z,{className:"mt-auto",children:(0,l.jsx)(f.l,{color:"primary",loading:w,onClick:R,children:"Fetch info"})}),(0,l.jsx)(a.Z,{})]}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsxs)(r.Z,{className:"mb-3",children:[(0,l.jsx)(a.Z,{md:4,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"artists",children:"Artists:"}),(0,l.jsx)(c.Z,{ref:T,name:"artists",as:"textarea"})]})}),(0,l.jsx)(a.Z,{md:4,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"categories",children:"Categories:"}),(0,l.jsx)(j.d7,{required:!0,name:"categories",defaultValue:s.map(e=>({value:e,label:e})),options:F.map(e=>({value:e.name,label:e.name})),onChange:e=>n(e.map(e=>e.value))})]})}),(0,l.jsx)(a.Z,{md:4,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"classifications",children:"Classifications:"}),(0,l.jsx)(j.d7,{required:!0,name:"classifications",defaultValue:t.map(e=>({value:e,label:e})),options:G.map(e=>({value:e.name,label:e.name})),onChange:e=>o(e.map(e=>e.value))})]})})]}),(0,l.jsx)(r.Z,{}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(a.Z,{md:4,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"games",children:"Games:"}),(0,l.jsx)(j.D_,{options:{name:"games"}})]})}),(0,l.jsx)(a.Z,{md:4,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"platforms",children:"Platforms:"}),(0,l.jsx)(j.J3,{categories:s,options:{name:"platforms"}})]})}),(0,l.jsx)(a.Z,{md:4,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"animations",children:"Animations:"}),(0,l.jsx)(j.S7,{options:{name:"animations"}})]})})]}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsx)(r.Z,{children:(0,l.jsx)(a.Z,{md:12,children:(0,l.jsxs)(i.Z.Group,{children:[(0,l.jsx)(i.Z.Label,{htmlFor:"related",children:"Related albums:"}),(0,l.jsx)(j.Q$,{options:{name:"related"}})]})})}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsx)(Z.r8,{defaults:$}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsx)(Z.rL,{}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsx)(Z.ie,{}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsx)(g.Z,{element:q.current}),(0,l.jsx)("hr",{className:"style2 style-white"}),(0,l.jsx)(r.Z,{className:"mb-2",children:(0,l.jsx)(a.Z,{xs:"auto",className:"pe-0",children:(0,l.jsx)(b.Z,{loading:I,type:"submit",color:"primary",children:"Add Album"})})})]})]})}}},function(e){e.O(0,[46,774,888,179],function(){return e(e.s=3337)}),_N_E=e.O()}]);