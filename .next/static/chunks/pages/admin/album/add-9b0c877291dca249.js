(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{3337:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/album/add",function(){return c(7777)}])},7777:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return C},default:function(){return D}});var d=c(7568),e=c(828),f=c(7297),g=c(4051),h=c.n(g),i=c(5893),j=c(1608),k=c(1555),l=c(2878),m=c(4716),n=c(7294),o=c(7283),p=c(1641),q=c(3359),r=c(319),s=c(782),t=c(2045),u=c(4978),v=c(7065),w=c(1331),x=c(5043),y=c(5994);function z(){var a=(0,f.Z)(["\n  query {\n    categories {\n      name\n    }\n    classifications {\n      name\n    }     \n  }\n"]);return z=function(){return a},a}function A(){var a=(0,f.Z)(["\n    mutation createAlbum(\n      $title: String,\n      $subTitle: String,\n      $cover: Upload,\n      $releaseDate: String,\n      $label: String,\n      $description: String,\n      $downloads: [DownloadInput],\n      $artists: [String],\n      $categories: [String],\n      $classifications: [String],\n      $platforms: [ID],\n      $games: [String],\n      $animations: [ID],\n      $discs: [DiscInput],\n      $related: [ID],\n      $stores: [StoreInput],\n      $vgmdb: String,\n      $status: String!,\n      $request: ID\n    ){\n      createAlbum(\n        title: $title,\n        subTitle: $subTitle,\n        cover: $cover,\n        releaseDate: $releaseDate,\n        label: $label,\n        description: $description,\n        downloads: $downloads,\n        artists: $artists,\n        categories: $categories,\n        classifications: $classifications,\n        platforms: $platforms,\n        games: $games,\n        animations: $animations\n        discs: $discs,\n        related: $related,\n        stores: $stores,\n        vgmdb: $vgmdb,\n        status: $status,\n        request: $request\n      )\n      {\n        id\n      }\n    }\n  "]);return A=function(){return a},a}function B(){var a=(0,f.Z)(["\n  query ($search: String!){\n    vgmdb(search: $search){\n      vgmdbUrl\n      name\n      subTitle\n      releaseDate\n      artists\n      categories\n      classifications\n      tracklist {\n        number\n        body\n      }\n    }\n  }\n"]);return B=function(){return a},a}var C=!0;function D(){return(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(k.Z,{xs:2,children:(0,i.jsx)(u.W_,{title:"Add"})}),(0,i.jsxs)(k.Z,{xs:10,children:[(0,i.jsx)(H,{}),(0,i.jsx)(u.sH,{})]})]})}var E=(0,o.Ps)(z()),F=(0,o.Ps)(A()),G=(0,o.Ps)(B());function H(a){var b=(0,n.useState)([]),c=b[0],f=b[1],g=(0,n.useState)([]),o=g[0],z=g[1],A=(0,n.useState)(),B=A[0],C=A[1],D=(0,p.a)(E),H=D.data,I=void 0===H?{}:H,J=(0,e.Z)((0,q.t)(G),2),K=J[0],L=J[1],M=L.loading,N=I.categories,O=I.classifications,P=(0,n.useRef)(null),Q=(0,n.useRef)(null),R=(0,n.useRef)(null),S=(0,n.useRef)(null),T=(0,n.useRef)(null),U=(0,e.Z)((0,r.D)(F,{refetchQueries:"searchAlbum"}),2),V=U[0],W=U[1].loading;function X(){return(X=(0,d.Z)(h().mark(function a(b){var c;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.persist(),b.preventDefault(),V({variables:c=(0,w.ar)(b)}).then(function(a){s.Am.success('Added "'.concat(c.title,'" succesfully!')),b.target.reset()}).catch(function(a){console.log(a),s.Am.error(a.message,{autoclose:!1})});case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}function Y(){return(Y=(0,d.Z)(h().mark(function a(){var b,c,d,e,g,i,j,k,l,m;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,K({variables:{search:R.current.value}});case 2:(null==(b=a.sent.data)?void 0:b.vgmdb)&&(d=(c=b.vgmdb).vgmdbUrl,e=c.name,g=c.subTitle,i=c.releaseDate,j=c.artists,k=c.categories,l=c.classifications,m=c.tracklist,Q.current.value=i,R.current.value=d,P.current.value=e,S.current.value=g,T.current.value=j.join(","),f(k),z(l),C(m));case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{id:"addAlbum",className:"mb-2 mt-3",children:"Add Album"}),(0,i.jsxs)(l.Z,{className:"site-form blackblock",onSubmit:function(a){return X.apply(this,arguments)},children:[(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(k.Z,{md:3,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"title",children:"Title:"}),(0,i.jsx)(m.Z,{ref:P,required:!0,type:"text",name:"title"})]})}),(0,i.jsx)(k.Z,{md:3,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"subTitle",children:"Sub Title:"}),(0,i.jsx)(m.Z,{ref:S,as:"textarea",name:"subTitle"})]})}),(0,i.jsx)(k.Z,{md:3,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"releaseDate",children:"Release Date:"}),(0,i.jsx)(m.Z,{ref:Q,required:!0,type:"date",name:"releaseDate"})]})}),(0,i.jsx)(k.Z,{md:3,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"label",children:"Label:"}),(0,i.jsx)(m.Z,{type:"text",name:"label"})]})})]}),(0,i.jsx)(j.Z,{className:"mb-3",children:(0,i.jsx)(k.Z,{children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"status",children:"Status:"}),(0,i.jsx)(t.d7,{isSingle:!0,required:!0,name:"status",defaultValue:{value:"show",label:"Show"},options:["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}})})]})})}),(0,i.jsxs)(j.Z,{className:"mb-3",children:[(0,i.jsx)(k.Z,{md:6,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"title",children:"Description:"}),(0,i.jsx)(m.Z,{as:"textarea",name:"description"})]})}),(0,i.jsx)(k.Z,{md:6,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"cover",children:"Cover:"}),(0,i.jsx)(m.Z,{required:!0,name:"cover",type:"file",accept:"image/*"})]})})]}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(k.Z,{md:6,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"vgmdb",children:"VGMdb:"}),(0,i.jsx)(m.Z,{ref:R,name:"vgmdb",type:"text"})]})}),(0,i.jsx)(k.Z,{className:"mt-auto",children:(0,i.jsx)(x.l,{color:"primary",loading:M,onClick:function(){return Y.apply(this,arguments)},children:"Fetch info"})}),(0,i.jsx)(k.Z,{})]}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsxs)(j.Z,{className:"mb-3",children:[(0,i.jsx)(k.Z,{md:4,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"artists",children:"Artists:"}),(0,i.jsx)(m.Z,{ref:T,name:"artists",as:"textarea"})]})}),(0,i.jsx)(k.Z,{md:4,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"categories",children:"Categories:"}),(0,i.jsx)(t.d7,{required:!0,name:"categories",defaultValue:c.map(function(a){return{value:a,label:a}}),options:(void 0===N?[]:N).map(function(a){return{value:a.name,label:a.name}}),onChange:function(a){return f(a.map(function(a){return a.value}))}})]})}),(0,i.jsx)(k.Z,{md:4,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"classifications",children:"Classifications:"}),(0,i.jsx)(t.d7,{required:!0,name:"classifications",defaultValue:o.map(function(a){return{value:a,label:a}}),options:(void 0===O?[]:O).map(function(a){return{value:a.name,label:a.name}}),onChange:function(a){return z(a.map(function(a){return a.value}))}})]})})]}),(0,i.jsx)(j.Z,{}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsxs)(j.Z,{children:[(0,i.jsx)(k.Z,{md:4,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"games",children:"Games:"}),(0,i.jsx)(t.D_,{options:{name:"games"}})]})}),(0,i.jsx)(k.Z,{md:4,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"platforms",children:"Platforms:"}),(0,i.jsx)(t.J3,{categories:c,options:{name:"platforms"}})]})}),(0,i.jsx)(k.Z,{md:4,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"animations",children:"Animations:"}),(0,i.jsx)(t.S7,{options:{name:"animations"}})]})})]}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(j.Z,{children:(0,i.jsx)(k.Z,{md:12,children:(0,i.jsxs)(l.Z.Group,{children:[(0,i.jsx)(l.Z.Label,{htmlFor:"related",children:"Related albums:"}),(0,i.jsx)(t.Q$,{options:{name:"related"}})]})})}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(u.r8,{defaults:B}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(u.rL,{}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(u.ie,{}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(y.Z,{element:R.current}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(j.Z,{className:"mb-2",children:(0,i.jsx)(k.Z,{xs:"auto",className:"pe-0",children:(0,i.jsx)(v.Z,{loading:W,type:"submit",color:"primary",children:"Add Album"})})})]})]})}}},function(a){a.O(0,[45,683,774,888,179],function(){var b;return a(a.s=3337)}),_N_E=a.O()}])