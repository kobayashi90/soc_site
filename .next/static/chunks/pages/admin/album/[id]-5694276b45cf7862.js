(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[216],{7612:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/album/[id]",function(){return c(9884)}])},9884:function(f,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return A},default:function(){return B}});var g=a(337),h=a(4941),i=a(2378),j=a(5893),k=a(7294),c=a(7283),l=a(319),m=a(7887),n=a(682),o=a(1608),p=a(1555),q=a(2878),r=a(4716),s=a(782),t=a(3907),u=a(8046),v=a(2628),w=a(2446),x=a(599);function d(){var a=(0,i.Z)(["\nquery downloads ($id: ID!) {\n  downloads(id: $id) {\n    id\n    title\n    small\n    links {\n      id\n      url\n      provider\n      custom\n      directUrl\n    }\n  }\n}\n"]);return d=function(){return a},a}function e(){var a=(0,i.Z)(["\n    mutation updateAlbum(\n      $id: ID!,\n      $title: String,\n      $subTitle: String,\n      $cover: Upload,\n      $releaseDate: String,\n      $label: String,\n      $description: String,\n      $downloads: [DownloadInput],\n      $artists: [String],\n      $classes: [String],\n      $categories: [String],\n      $platforms: [ID],\n      $games: [String],\n      $animations: [ID],\n      $discs: [DiscInput],\n      $related: [ID],\n      $stores: [StoreInput],\n      $vgmdb: String,\n      $status: String!\n    ){\n      updateAlbum(\n        id: $id,\n        title: $title,\n        subTitle: $subTitle,\n        cover: $cover,\n        releaseDate: $releaseDate,\n        label: $label,\n        description: $description,\n        downloads: $downloads,\n        artists: $artists,\n        classes: $classes,\n        categories: $categories,\n        platforms: $platforms,\n        games: $games,\n        animations: $animations\n        discs: $discs,\n        related: $related,\n        stores: $stores,\n        vgmdb: $vgmdb,\n        status: $status\n      ){ id }\n    } \n  "]);return e=function(){return a},a}var y=(0,c.Ps)(d()),z=(0,c.Ps)(e()),A=!0;function B(a){return(0,j.jsx)(n.Z,{fluid:!0,children:(0,j.jsxs)(o.Z,{children:[(0,j.jsx)(p.Z,{xs:2,children:(0,j.jsx)(u.W_,{title:"Edit"})}),(0,j.jsxs)(p.Z,{xs:10,children:[(0,j.jsx)(C,(0,g.Z)({},a)),(0,j.jsx)(u.sH,{})]})]})})}function C(b){var c,d=b.id,a=b.album,n=b.classes,A=b.categories,e=(0,h.Z)((0,l.D)(z),2),F=e[0],B=e[1].loading,f=(0,k.useState)([]),C=f[0],G=f[1],D=(0,w.Z)().user,g=(0,m.a)(y,{variables:{id:d}}),i=g.data,E=g.refetch;return(0,k.useEffect)(function(){return E({id:d})},[D,d,E]),(0,j.jsxs)(j.Fragment,{children:[(0,j.jsxs)("div",{id:"addAlbum",className:"mb-2 mt-3",children:["Editing ",'"'.concat(a.title,'"')," (",a.id,")"]}),(0,j.jsxs)(q.Z,{className:"site-form blackblock",onSubmit:function(b){b.persist(),b.preventDefault();var c=(0,x.ar)(b);c.id=a.id,F({mutation:z,variables:c}).then(function(a){s.Am.success('Updated "'.concat(c.title,'" succesfully!'))}).catch(function(a){console.log(a),s.Am.error(a.message,{autoclose:!1})})},children:[(0,j.jsxs)(o.Z,{children:[(0,j.jsx)(p.Z,{md:3,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"title",children:"Title:"}),(0,j.jsx)(r.Z,{required:!0,type:"text",name:"title",defaultValue:a.title})]})}),(0,j.jsx)(p.Z,{md:3,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"subTitle",children:"Sub Title:"}),(0,j.jsx)(r.Z,{as:"textarea",name:"subTitle",defaultValue:a.subTitle})]})}),(0,j.jsx)(p.Z,{md:3,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"releaseDate",children:"Release Date:"}),(0,j.jsx)(r.Z,{required:!0,type:"date",name:"releaseDate",defaultValue:a.releaseDate})]})}),(0,j.jsx)(p.Z,{md:3,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"label",children:"Label:"}),(0,j.jsx)(r.Z,{type:"text",name:"label",defaultValue:a.label})]})})]}),(0,j.jsx)(o.Z,{className:"mb-3",children:(0,j.jsx)(p.Z,{children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"status",children:"Status:"}),(0,j.jsx)(t.d7,{isSingle:!0,required:!0,name:"status",defaultValue:{value:a.status,label:"string"!=typeof(c=a.status)?"":c.charAt(0).toUpperCase()+c.slice(1)},options:["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}})})]})})}),(0,j.jsx)(o.Z,{children:(0,j.jsx)(p.Z,{md:12,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"title",children:"Description:"}),(0,j.jsx)(r.Z,{as:"textarea",name:"description",defaultValue:a.description})]})})}),(0,j.jsx)("hr",{className:"style2 style-white"}),(0,j.jsxs)(o.Z,{className:"mb-3",children:[(0,j.jsx)(p.Z,{md:4,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"artists",children:"Artists:"}),(0,j.jsx)(r.Z,{name:"artists",as:"textarea",defaultValue:a.artists.map(function(a){return a.name}).join(",")})]})}),(0,j.jsx)(p.Z,{md:4,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"classes",children:"Classification:"}),(0,j.jsx)(t.d7,{defaultValue:a.classes,required:!0,name:"classes",options:n,onChange:function(a){return G(a&&1===a.length?a[0].label:"")}})]})}),(0,j.jsx)(p.Z,{md:4,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"categories",children:"Categories:"}),(0,j.jsx)(t.d7,{defaultValue:a.categories,required:!0,name:"categories",options:A})]})})]}),(0,j.jsxs)(o.Z,{children:[(0,j.jsx)(p.Z,{md:6,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"vgmdb",children:"VGMdb:"}),(0,j.jsx)(r.Z,{defaultValue:a.vgmdb,name:"vgmdb",type:"text"})]})}),(0,j.jsx)(p.Z,{md:6,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"cover",children:"Cover:"}),(0,j.jsx)(r.Z,{name:"cover",type:"file",accept:"image/*"})]})})]}),(0,j.jsx)("hr",{className:"style2 style-white"}),(0,j.jsxs)(o.Z,{children:[(0,j.jsx)(p.Z,{md:4,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"games",children:"Games:"}),(0,j.jsx)(t.D_,{defaultValue:a.games,name:"games"})]})}),(0,j.jsx)(p.Z,{md:4,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"platforms",children:"Platforms:"}),(0,j.jsx)(t.J3,{classes:C,defaultValue:a.platforms,name:"platforms",onChange:function(a){return G(a.map(function(a){return a.value}))}})]})}),(0,j.jsx)(p.Z,{md:4,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"animations",children:"Animations:"}),(0,j.jsx)(t.S7,{defaultValue:a.animations,name:"animations"})]})})]}),(0,j.jsx)("hr",{className:"style2 style-white"}),(0,j.jsx)(o.Z,{children:(0,j.jsx)(p.Z,{md:12,children:(0,j.jsxs)(q.Z.Group,{children:[(0,j.jsx)(q.Z.Label,{htmlFor:"related",children:"Related OSTs:"}),(0,j.jsx)(t.Q$,{defaultValue:a.related,name:"related"})]})})}),(0,j.jsx)("hr",{className:"style2 style-white"}),(0,j.jsx)(u.r8,{defaults:a.discs}),(0,j.jsx)("hr",{className:"style2 style-white"}),(0,j.jsx)(u.rL,{defaults:a.stores}),(0,j.jsx)("hr",{className:"style2 style-white"}),i&&(0,j.jsx)(u.ie,{defaults:i.downloads}),(0,j.jsx)(o.Z,{children:(0,j.jsx)(p.Z,{className:"m-auto",children:(0,j.jsx)(v.Z,{loading:B,type:"submit",color:"primary",children:"Save Changes"})})})]})]})}}},function(a){a.O(0,[907,46,774,888,179],function(){return a(a.s=7612)}),_N_E=a.O()}])