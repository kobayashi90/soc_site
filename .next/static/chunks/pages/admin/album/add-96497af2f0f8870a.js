(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{3337:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/album/add",function(){return c(7777)}])},7777:function(h,c,a){"use strict";a.r(c),a.d(c,{"__N_SSP":function(){return C},default:function(){return D}});var i=a(7568),j=a(828),k=a(7297),d=a(4051),l=a.n(d),m=a(5893),n=a(1608),o=a(1555),p=a(2878),q=a(4716),r=a(7294),b=a(7283),s=a(7887),t=a(3359),u=a(319),v=a(782),w=a(2045),x=a(4978),y=a(7065),z=a(1331),A=a(5043),B=a(5994);function e(){var a=(0,k.Z)(["\n      query {\n        categories {\n          name\n        }\n        classes {\n          name\n        }     \n      }\n    "]);return e=function(){return a},a}function f(){var a=(0,k.Z)(["\n    mutation createAlbum(\n      $title: String,\n      $subTitle: String,\n      $cover: Upload,\n      $releaseDate: String,\n      $label: String,\n      $description: String,\n      $downloads: [DownloadInput],\n      $artists: [String],\n      $classes: [String],\n      $categories: [String],\n      $platforms: [ID],\n      $games: [String],\n      $animations: [ID],\n      $discs: [DiscInput],\n      $related: [ID],\n      $stores: [StoreInput],\n      $vgmdb: String,\n      $status: String!,\n      $request: ID\n    ){\n      createAlbum(\n        title: $title,\n        subTitle: $subTitle,\n        cover: $cover,\n        releaseDate: $releaseDate,\n        label: $label,\n        description: $description,\n        downloads: $downloads,\n        artists: $artists,\n        classes: $classes,\n        categories: $categories,\n        platforms: $platforms,\n        games: $games,\n        animations: $animations\n        discs: $discs,\n        related: $related,\n        stores: $stores,\n        vgmdb: $vgmdb,\n        status: $status,\n        request: $request\n      )\n      {\n        id\n      }\n    }\n  "]);return f=function(){return a},a}function g(){var a=(0,k.Z)(["\n  query ($search: String!){\n    vgmdb(search: $search){\n      vgmdbUrl\n      name\n      subTitle\n      releaseDate\n      artists\n      categories\n      classifications\n      tracklist {\n        number\n        body\n      }\n    }\n  }\n"]);return g=function(){return a},a}var C=!0;function D(){return(0,m.jsxs)(n.Z,{children:[(0,m.jsx)(o.Z,{xs:2,children:(0,m.jsx)(x.W_,{title:"Add"})}),(0,m.jsxs)(o.Z,{xs:10,children:[(0,m.jsx)(H,{}),(0,m.jsx)(x.sH,{})]})]})}var E=(0,b.Ps)(e()),F=(0,b.Ps)(f()),G=(0,b.Ps)(g());function H(R){var a=(0,r.useState)([]),b=a[0],S=a[1],c=(0,r.useState)([]),H=c[0],T=c[1],d=(0,r.useState)(),I=d[0],U=d[1],J=(0,s.a)(E),e=J.data,f=void 0===e?{}:e,g=(0,j.Z)((0,t.t)(G),2),V=g[0],K=g[1],L=K.loading,h=f.classes,k=f.categories,M=(0,r.useRef)(null),N=(0,r.useRef)(null),C=(0,r.useRef)(null),O=(0,r.useRef)(null),P=(0,r.useRef)(null),D=(0,j.Z)((0,u.D)(F,{refetchQueries:"searchAlbum"}),2),W=D[0],Q=D[1].loading;function X(){return(X=(0,i.Z)(l().mark(function a(b){var c;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:b.persist(),b.preventDefault(),W({variables:c=(0,z.ar)(b)}).then(function(a){v.Am.success('Added "'.concat(c.title,'" succesfully!')),b.target.reset()}).catch(function(a){console.log(a),v.Am.error(a.message,{autoclose:!1})});case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}function Y(){return(Y=(0,i.Z)(l().mark(function a(){var b,c,d,e,f,g,h,i,j,k;return l().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,V({variables:{search:C.current.value}});case 2:(null==(b=a.sent.data)?void 0:b.vgmdb)&&(d=(c=b.vgmdb).vgmdbUrl,e=c.name,f=c.subTitle,g=c.releaseDate,h=c.artists,i=c.categories,j=c.classifications,k=c.tracklist,N.current.value=g,C.current.value=d,M.current.value=e,O.current.value=f,P.current.value=h.join(","),S(i),T(j),U(k));case 4:case"end":return a.stop()}},a)}))).apply(this,arguments)}return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{id:"addAlbum",className:"mb-2 mt-3",children:"Add Album"}),(0,m.jsxs)(p.Z,{className:"site-form blackblock",onSubmit:function(a){return X.apply(this,arguments)},children:[(0,m.jsxs)(n.Z,{children:[(0,m.jsx)(o.Z,{md:3,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"title",children:"Title:"}),(0,m.jsx)(q.Z,{ref:M,required:!0,type:"text",name:"title"})]})}),(0,m.jsx)(o.Z,{md:3,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"subTitle",children:"Sub Title:"}),(0,m.jsx)(q.Z,{ref:O,as:"textarea",name:"subTitle"})]})}),(0,m.jsx)(o.Z,{md:3,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"releaseDate",children:"Release Date:"}),(0,m.jsx)(q.Z,{ref:N,required:!0,type:"date",name:"releaseDate"})]})}),(0,m.jsx)(o.Z,{md:3,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"label",children:"Label:"}),(0,m.jsx)(q.Z,{type:"text",name:"label"})]})})]}),(0,m.jsx)(n.Z,{className:"mb-3",children:(0,m.jsx)(o.Z,{children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"status",children:"Status:"}),(0,m.jsx)(w.d7,{isSingle:!0,required:!0,name:"status",defaultValue:{value:"show",label:"Show"},options:["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}})})]})})}),(0,m.jsxs)(n.Z,{className:"mb-3",children:[(0,m.jsx)(o.Z,{md:6,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"title",children:"Description:"}),(0,m.jsx)(q.Z,{as:"textarea",name:"description"})]})}),(0,m.jsx)(o.Z,{md:6,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"cover",children:"Cover:"}),(0,m.jsx)(q.Z,{required:!0,name:"cover",type:"file",accept:"image/*"})]})})]}),(0,m.jsxs)(n.Z,{children:[(0,m.jsx)(o.Z,{md:6,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"vgmdb",children:"VGMdb:"}),(0,m.jsx)(q.Z,{ref:C,name:"vgmdb",type:"text"})]})}),(0,m.jsx)(o.Z,{className:"mt-auto",children:(0,m.jsx)(A.l,{color:"primary",loading:L,onClick:function(){return Y.apply(this,arguments)},children:"Fetch info"})}),(0,m.jsx)(o.Z,{})]}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsxs)(n.Z,{className:"mb-3",children:[(0,m.jsx)(o.Z,{md:4,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"artists",children:"Artists:"}),(0,m.jsx)(q.Z,{ref:P,name:"artists",as:"textarea"})]})}),(0,m.jsx)(o.Z,{md:4,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"classes",children:"Classification:"}),(0,m.jsx)(w.d7,{required:!0,name:"classes",defaultValue:b.map(function(a){return{value:a,label:a}}),options:(void 0===h?[]:h).map(function(a){return{value:a.name,label:a.name}}),onChange:function(a){return S(a.map(function(a){return a.value}))}})]})}),(0,m.jsx)(o.Z,{md:4,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"categories",children:"Categories:"}),(0,m.jsx)(w.d7,{required:!0,name:"categories",defaultValue:H.map(function(a){return{value:a,label:a}}),options:(void 0===k?[]:k).map(function(a){return{value:a.name,label:a.name}}),onChange:function(a){return T(a.map(function(a){return a.value}))}})]})})]}),(0,m.jsx)(n.Z,{}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsxs)(n.Z,{children:[(0,m.jsx)(o.Z,{md:4,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"games",children:"Games:"}),(0,m.jsx)(w.D_,{options:{name:"games"}})]})}),(0,m.jsx)(o.Z,{md:4,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"platforms",children:"Platforms:"}),(0,m.jsx)(w.J3,{classes:b,options:{name:"platforms"}})]})}),(0,m.jsx)(o.Z,{md:4,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"animations",children:"Animations:"}),(0,m.jsx)(w.S7,{options:{name:"animations"}})]})})]}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(n.Z,{children:(0,m.jsx)(o.Z,{md:12,children:(0,m.jsxs)(p.Z.Group,{children:[(0,m.jsx)(p.Z.Label,{htmlFor:"related",children:"Related OSTs:"}),(0,m.jsx)(w.Q$,{options:{name:"related"}})]})})}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(x.r8,{defaults:I}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(x.rL,{}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(x.ie,{}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(B.Z,{element:C.current}),(0,m.jsx)("hr",{className:"style2 style-white"}),(0,m.jsx)(n.Z,{className:"mb-2",children:(0,m.jsx)(o.Z,{xs:"auto",className:"pe-0",children:(0,m.jsx)(y.Z,{loading:Q,type:"submit",color:"primary",children:"Add Album"})})})]})]})}}},function(a){a.O(0,[45,683,774,888,179],function(){var b;return a(a.s=3337)}),_N_E=a.O()}])