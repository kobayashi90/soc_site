(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{3337:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/album/add",function(){return n(7777)}])},7777:function(e,s,n){"use strict";n.r(s),n.d(s,{__N_SSP:function(){return _},default:function(){return D}});var t=n(7568),r=n(828),a=n(7297),l=n(655),i=n(5893),c=n(4051),o=n(1555),u=n(2878),d=n(4716),m=n(7294),h=n(7283),x=n(1641),j=n(3359),Z=n(319),f=n(782),b=n(2045),p=n(4978),g=n(7065),v=n(1331),$=n(5043),y=n(5994);function S(){var e=(0,a.Z)(["\n  query {\n    categories {\n      name\n    }\n    classifications {\n      name\n    }     \n  }\n"]);return S=function(){return e},e}function w(){var e=(0,a.Z)(["\n    mutation createAlbum(\n      $title: String,\n      $subTitle: String,\n      $cover: Upload,\n      $releaseDate: String,\n      $label: String,\n      $description: String,\n      $downloads: [DownloadInput],\n      $artists: [String],\n      $categories: [String],\n      $classifications: [String],\n      $platforms: [ID],\n      $games: [String],\n      $animations: [ID],\n      $discs: [DiscInput],\n      $related: [ID],\n      $stores: [StoreInput],\n      $vgmdb: String,\n      $status: String!,\n      $request: ID\n    ){\n      createAlbum(\n        title: $title,\n        subTitle: $subTitle,\n        cover: $cover,\n        releaseDate: $releaseDate,\n        label: $label,\n        description: $description,\n        downloads: $downloads,\n        artists: $artists,\n        categories: $categories,\n        classifications: $classifications,\n        platforms: $platforms,\n        games: $games,\n        animations: $animations\n        discs: $discs,\n        related: $related,\n        stores: $stores,\n        vgmdb: $vgmdb,\n        status: $status,\n        request: $request\n      )\n      {\n        id\n      }\n    }\n  "]);return w=function(){return e},e}function N(){var e=(0,a.Z)(["\n  query ($search: String!){\n    vgmdb(search: $search){\n      vgmdbUrl\n      name\n      subTitle\n      releaseDate\n      artists\n      categories\n      classifications\n      tracklist {\n        number\n        body\n      }\n    }\n  }\n"]);return N=function(){return e},e}var _=!0;function D(){return(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(o.Z,{xs:2,children:(0,i.jsx)(p.W_,{title:"Add"})}),(0,i.jsxs)(o.Z,{xs:10,children:[(0,i.jsx)(A,{}),(0,i.jsx)(p.sH,{})]})]})}var L=(0,h.Ps)(S()),F=(0,h.Ps)(w()),G=(0,h.Ps)(N());function A(e){var s=(0,m.useState)([]),n=s[0],a=s[1],h=(0,m.useState)([]),S=h[0],w=h[1],N=(0,m.useState)(),_=N[0],D=N[1],A=(0,x.a)(L).data,q=void 0===A?{}:A,T=(0,r.Z)((0,j.t)(G),2),C=T[0],k=T[1].loading,I=q.categories,P=q.classifications,R=(0,m.useRef)(null),E=(0,m.useRef)(null),V=(0,m.useRef)(null),U=(0,m.useRef)(null),H=(0,m.useRef)(null),O=(0,r.Z)((0,Z.D)(F,{refetchQueries:"searchAlbum"}),2),Q=O[0],X=O[1].loading;function J(){return(J=(0,t.Z)(function(e){var s;return(0,l.__generator)(this,function(n){return e.persist(),e.preventDefault(),Q({variables:s=(0,v.ar)(e)}).then(function(n){f.Am.success('Added "'.concat(s.title,'" succesfully!')),e.target.reset()}).catch(function(e){console.log(e),f.Am.error(e.message,{autoclose:!1})}),[2]})})).apply(this,arguments)}function M(){return(M=(0,t.Z)(function(){var e,s,n,t,r,i,c,o,u,d;return(0,l.__generator)(this,function(l){switch(l.label){case 0:return[4,C({variables:{search:V.current.value}})];case 1:return(null==(e=l.sent().data)?void 0:e.vgmdb)&&(n=(s=e.vgmdb).vgmdbUrl,t=s.name,r=s.subTitle,i=s.releaseDate,c=s.artists,o=s.categories,u=s.classifications,d=s.tracklist,E.current.value=i,V.current.value=n,R.current.value=t,U.current.value=r,H.current.value=c.join(","),a(o),w(u),D(d)),[2]}})})).apply(this,arguments)}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{id:"addAlbum",className:"mb-2 mt-3",children:"Add Album"}),(0,i.jsxs)(u.Z,{className:"site-form blackblock",onSubmit:function(e){return J.apply(this,arguments)},children:[(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(o.Z,{md:3,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"title",children:"Title:"}),(0,i.jsx)(d.Z,{ref:R,required:!0,type:"text",name:"title"})]})}),(0,i.jsx)(o.Z,{md:3,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"subTitle",children:"Sub Title:"}),(0,i.jsx)(d.Z,{ref:U,as:"textarea",name:"subTitle"})]})}),(0,i.jsx)(o.Z,{md:3,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"releaseDate",children:"Release Date:"}),(0,i.jsx)(d.Z,{ref:E,required:!0,type:"date",name:"releaseDate"})]})}),(0,i.jsx)(o.Z,{md:3,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"label",children:"Label:"}),(0,i.jsx)(d.Z,{type:"text",name:"label"})]})})]}),(0,i.jsx)(c.Z,{className:"mb-3",children:(0,i.jsx)(o.Z,{children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"status",children:"Status:"}),(0,i.jsx)(b.d7,{isSingle:!0,required:!0,name:"status",defaultValue:{value:"show",label:"Show"},options:["Show","Hidden","Coming"].map(function(e){return{label:e,value:e.toLowerCase()}})})]})})}),(0,i.jsxs)(c.Z,{className:"mb-3",children:[(0,i.jsx)(o.Z,{md:6,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"title",children:"Description:"}),(0,i.jsx)(d.Z,{as:"textarea",name:"description"})]})}),(0,i.jsx)(o.Z,{md:6,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"cover",children:"Cover:"}),(0,i.jsx)(d.Z,{required:!0,name:"cover",type:"file",accept:"image/*"})]})})]}),(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(o.Z,{md:6,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"vgmdb",children:"VGMdb:"}),(0,i.jsx)(d.Z,{ref:V,name:"vgmdb",type:"text"})]})}),(0,i.jsx)(o.Z,{className:"mt-auto",children:(0,i.jsx)($.l,{color:"primary",loading:k,onClick:function(){return M.apply(this,arguments)},children:"Fetch info"})}),(0,i.jsx)(o.Z,{})]}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsxs)(c.Z,{className:"mb-3",children:[(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"artists",children:"Artists:"}),(0,i.jsx)(d.Z,{ref:H,name:"artists",as:"textarea"})]})}),(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"categories",children:"Categories:"}),(0,i.jsx)(b.d7,{required:!0,name:"categories",defaultValue:n.map(function(e){return{value:e,label:e}}),options:(void 0===I?[]:I).map(function(e){return{value:e.name,label:e.name}}),onChange:function(e){return a(e.map(function(e){return e.value}))}})]})}),(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"classifications",children:"Classifications:"}),(0,i.jsx)(b.d7,{required:!0,name:"classifications",defaultValue:S.map(function(e){return{value:e,label:e}}),options:(void 0===P?[]:P).map(function(e){return{value:e.name,label:e.name}}),onChange:function(e){return w(e.map(function(e){return e.value}))}})]})})]}),(0,i.jsx)(c.Z,{}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"games",children:"Games:"}),(0,i.jsx)(b.D_,{options:{name:"games"}})]})}),(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"platforms",children:"Platforms:"}),(0,i.jsx)(b.J3,{categories:n,options:{name:"platforms"}})]})}),(0,i.jsx)(o.Z,{md:4,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"animations",children:"Animations:"}),(0,i.jsx)(b.S7,{options:{name:"animations"}})]})})]}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(o.Z,{md:12,children:(0,i.jsxs)(u.Z.Group,{children:[(0,i.jsx)(u.Z.Label,{htmlFor:"related",children:"Related albums:"}),(0,i.jsx)(b.Q$,{options:{name:"related"}})]})})}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(p.r8,{defaults:_}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(p.rL,{}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(p.ie,{}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(y.Z,{element:V.current}),(0,i.jsx)("hr",{className:"style2 style-white"}),(0,i.jsx)(c.Z,{className:"mb-2",children:(0,i.jsx)(o.Z,{xs:"auto",className:"pe-0",children:(0,i.jsx)(g.Z,{loading:X,type:"submit",color:"primary",children:"Add Album"})})})]})]})}}},function(e){e.O(0,[978,774,888,179],function(){return e(e.s=3337)}),_N_E=e.O()}]);