(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{7434:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/submission",function(){return t(6280)}])},6280:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return N},default:function(){return w}});var n=t(7297),r=t(5893),l=t(7294),i=t(682),a=t(1555),d=t(343),c=t(2878),u=t(4051),o=t(4716),x=t(2318),h=t(5147),j=t(7283),m=t(1641),Z=t(782),p=t(4184),b=t.n(p),f=t(3907),v=t(9738),y=t(4495),k=t.n(y);function _(){let e=(0,n.Z)(["\n  query ($state: String!) {\n    submissions(state: [$state]) {\n      ","\n    }\n  }\n"]);return _=function(){return e},e}let g=["Pending","Rejected","Accepted","Published"].map(e=>({label:e,value:e.toLowerCase()}));var N=!0;function w(){return(0,r.jsx)(i.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(q,{})})})}function $(e){let{submission:s,setRequest:t}=e,n=(0,l.useRef)(null);return(0,r.jsx)(d.Z,{show:s,onHide:()=>t(),centered:!0,children:(0,r.jsx)(d.Z.Body,{children:(0,r.jsxs)(c.Z,{ref:n,children:[(0,r.jsx)(u.Z,{children:(0,r.jsxs)(c.Z.Group,{as:a.Z,children:[(0,r.jsx)(c.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,r.jsx)(c.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==s?void 0:s.title})]})}),(0,r.jsxs)(u.Z,{className:"mt-3",children:[(0,r.jsxs)(c.Z.Group,{as:a.Z,children:[(0,r.jsx)(c.Z.Label,{htmlFor:"link",style:{color:"black"},children:"VGMDB:"}),(0,r.jsx)(c.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==s?void 0:s.vgmdb})]}),(0,r.jsxs)(c.Z.Group,{as:a.Z,children:[(0,r.jsx)(c.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Submitter:"}),(0,r.jsx)(c.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==s?void 0:s.submitter.username})]})]}),(0,r.jsx)(u.Z,{className:"mt-3",children:(0,r.jsxs)(c.Z.Group,{as:a.Z,children:[(0,r.jsx)(c.Z.Label,{htmlFor:"comment",style:{color:"black"},children:"Links:"}),(0,r.jsx)(o.Z,{required:!0,as:"textarea",name:"comment",value:null==s?void 0:s.links,readOnly:!0})]})})]})})})}function q(){let[e,s]=(0,l.useState)(["pending"]),[t,n]=(0,l.useState)(""),[i,d]=(0,l.useState)(),h=e=>{e.persist(),e.preventDefault(),n(e.target.value)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($,{submission:i,setRequest:d}),(0,r.jsxs)(c.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,r.jsx)(u.Z,{className:"mb-3",children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(c.Z.Group,{children:(0,r.jsxs)(x.Z,{children:[(0,r.jsx)(x.Z.Text,{children:"\uD83D\uDD0E"}),(0,r.jsx)(o.Z,{type:"text",onBlur:h,onKeyDown(e){"Enter"===e.key&&h(e)}})]})})})}),(0,r.jsxs)(u.Z,{className:"my-3",children:[(0,r.jsx)(a.Z,{md:"auto",children:(0,r.jsx)(c.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(f.d7,{onChange:e=>s(e.map(e=>e.value)),required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:g})})]}),e.map(e=>(0,r.jsx)(C,{state:e,search:t.toLowerCase(),setRequest:d},e))]})]})}function C(e){let{state:s,search:t,setRequest:n}=e,l=(0,j.Ps)(_(),"\n  id\n  title\n  vgmdb\n  links\n  request {\n    id\n  }\n  submitter {\n    username\n  }\n"),{data:i,loading:d,error:c}=(0,m.a)(l,{variables:{state:s}});return c&&(console.log(c),Z.Am.error("Failed to fetch requests")),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.Z,{className:"mt-4",children:(0,r.jsx)(a.Z,{children:(0,r.jsx)("h3",{className:"text-capitalize",children:s})})}),(0,r.jsx)(u.Z,{children:(0,r.jsx)(a.Z,{style:{height:"500px"},children:(0,r.jsxs)("div",{className:b()("overflow-auto h-100",k().table),children:[d&&(0,r.jsx)(v.Z,{dev:!0,className:"mx-auto"}),i&&(0,r.jsxs)(h.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Link"}),(0,r.jsx)("th",{children:"Requested"}),(0,r.jsx)("th",{children:"Submitter"})]})}),(0,r.jsx)("tbody",{children:(0,r.jsx)(function(){return i.submissions.filter(e=>{let{title:s,link:n}=e;return(null==s?void 0:s.toLowerCase().includes(t))||(null==n?void 0:n.toLowerCase())===t}).map(e=>{let{id:s,title:t,vgmdb:l,submitter:i,request:a}=e;return(0,r.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>n(e),children:[(0,r.jsx)("td",{children:s}),(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:l}),a?(0,r.jsx)("td",{children:"âœ“"}):(0,r.jsx)("td",{}),(0,r.jsx)("td",{children:i.username})]},s)})},{})})]})]})})})]})}},4495:function(e){e.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(e,s,t){"use strict";var n=t(4184),r=t.n(n),l=t(7294),i=t(6611),a=t(6792),d=t(6558),c=t(3045),u=t(5893);let o=(0,i.Z)("input-group-text",{Component:"span"}),x=e=>(0,u.jsx)(o,{children:(0,u.jsx)(d.Z,{type:"checkbox",...e})}),h=e=>(0,u.jsx)(o,{children:(0,u.jsx)(d.Z,{type:"radio",...e})}),j=l.forwardRef(({bsPrefix:e,size:s,hasValidation:t,className:n,as:i="div",...d},o)=>{e=(0,a.vE)(e,"input-group");let x=(0,l.useMemo)(()=>({}),[]);return(0,u.jsx)(c.Z.Provider,{value:x,children:(0,u.jsx)(i,{ref:o,...d,className:r()(n,e,s&&`${e}-${s}`,t&&"has-validation")})})});j.displayName="InputGroup",s.Z=Object.assign(j,{Text:o,Radio:h,Checkbox:x})},5147:function(e,s,t){"use strict";var n=t(4184),r=t.n(n),l=t(7294),i=t(6792),a=t(5893);let d=l.forwardRef(({bsPrefix:e,className:s,striped:t,bordered:n,borderless:l,hover:d,size:c,variant:u,responsive:o,...x},h)=>{let j=(0,i.vE)(e,"table"),m=r()(s,j,u&&`${j}-${u}`,c&&`${j}-${c}`,t&&`${j}-striped`,n&&`${j}-bordered`,l&&`${j}-borderless`,d&&`${j}-hover`),Z=(0,a.jsx)("table",{...x,className:m,ref:h});if(o){let p=`${j}-responsive`;return"string"==typeof o&&(p=`${p}-${o}`),(0,a.jsx)("div",{className:p,children:Z})}return Z});s.Z=d}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7434)}),_N_E=e.O()}]);