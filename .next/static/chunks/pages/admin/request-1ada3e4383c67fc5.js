(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{1365:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/request",function(){return t(8906)}])},8906:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return L},default:function(){return F}});var s=t(828),r=t(7297),l=t(5893),a=t(7294),i=t(682),o=t(1555),c=t(7931),u=t(2878),d=t(4051),h=t(4716),x=t(2318),j=t(5147),m=t(7283),f=t(319),Z=t(1641),v=t(7422),p=t.n(v),b=t(782),g=t(4184),$=t.n(g),k=t(2045),y=t(5043),q=t(8295),N=t.n(q);function _(){var e=(0,r.Z)(["\n    mutation ($id: ID!, $reason: String){\n      rejectRequest(id: $id, reason: $reason)\n    }\n  "]);return _=function(){return e},e}function C(){var e=(0,r.Z)(["\n    mutation ($id: ID!, $title: String, $link: String, $state: String, $comments: String, $reason: String){\n      editRequest(id: $id, title: $title, link: $link, state: $state, comments: $comments, reason: $reason){\n        ","\n      }\n    }\n  "]);return C=function(){return e},e}function R(){var e=(0,r.Z)(["\n  query ($state: String!, $donator: [Boolean!]!) {\n    requests(state: [$state], donator: $donator) {\n      ","\n    }\n  }\n"]);return R=function(){return e},e}var S=["Complete","Pending","Hold"].map(function(e){return{label:e,value:e.toLowerCase()}}),w=["Donators","Members"].map(function(e){return{label:e,value:"Donators"===e}}),D="\n  id\n  title\n  link\n  user\n  userID\n  state\n  donator\n  reason\n  comments\n",L=!0;function F(){return(0,l.jsx)(i.Z,{children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(P,{})})})}function E(e){var n=function(){var e=N.current,n=p()(e,{hash:!0});n.id=r.id,k({variables:n}).then(function(n){b.Am.success("Updated request succesfully!"),i(n.data.editRequest),e.reset()}).catch(function(e){console.log(e),b.Am.error(e.message,{autoclose:!1})})},t=function(){var e=N.current,n=p()(e,{hash:!0});n.id=r.id,v({variables:n}).then(function(n){b.Am.success("Request rejected succesfully!"),i(),e.reset()}).catch(function(e){console.log(e),b.Am.error(e.message,{autoclose:!1})})},r=e.request,i=e.setRequest,x=(0,m.Ps)(_()),j=(0,m.Ps)(C(),D),Z=(0,s.Z)((0,f.D)(x),2),v=Z[0],g=Z[1].loading,$=(0,s.Z)((0,f.D)(j),2),k=$[0],q=$[1].loading,N=(0,a.useRef)(null);return(0,l.jsxs)(c.Z,{show:r,onHide:function(){return i()},centered:!0,children:[(0,l.jsx)(c.Z.Body,{children:(0,l.jsxs)(u.Z,{ref:N,children:[(0,l.jsx)(d.Z,{children:(0,l.jsxs)(u.Z.Group,{as:o.Z,children:[(0,l.jsx)(u.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,l.jsx)(u.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==r?void 0:r.title})]})}),(0,l.jsxs)(d.Z,{className:"mt-3",children:[(0,l.jsxs)(u.Z.Group,{as:o.Z,children:[(0,l.jsx)(u.Z.Label,{htmlFor:"link",style:{color:"black"},children:"Link:"}),(0,l.jsx)(u.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==r?void 0:r.link})]}),(0,l.jsxs)(u.Z.Group,{as:o.Z,children:[(0,l.jsx)(u.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Status:"}),(0,l.jsx)("select",{className:"form-control",name:"state",defaultValue:null==r?void 0:r.state,children:S.map(function(e){return(0,l.jsx)("option",{value:e.value,children:e.label},e.value)})})]})]}),(0,l.jsx)(d.Z,{className:"mt-3",children:(0,l.jsxs)(u.Z.Group,{as:o.Z,children:[(0,l.jsx)(u.Z.Label,{htmlFor:"comment",style:{color:"black"},defaultValue:null==r?void 0:r.comment,children:"Comments:"}),(0,l.jsx)(h.Z,{required:!0,as:"textarea",name:"comment"})]})}),(0,l.jsx)(d.Z,{className:"mt-3",children:(0,l.jsxs)(u.Z.Group,{as:o.Z,children:[(0,l.jsx)(u.Z.Label,{htmlFor:"reason",style:{color:"black"},defaultValue:null==r?void 0:r.reason,children:"Reason:"}),(0,l.jsx)(h.Z,{required:!0,as:"textarea",name:"reason"})]})})]})}),(0,l.jsxs)(c.Z.Footer,{children:[(0,l.jsx)(y.l,{loading:g,disabled:q,variant:"danger",onClick:t,children:"Reject"}),(0,l.jsx)(y.l,{loading:q,disabled:g,variant:"primary",onClick:n,children:"Save Changes"})]})]})}function P(){var e=(0,a.useState)(["pending"]),n=e[0],t=e[1],s=(0,a.useState)(w.map(function(e){return e.value})),r=s[0],i=s[1],c=(0,a.useState)(""),j=c[0],m=c[1],f=(0,a.useState)(),Z=f[0],v=f[1],p=function(e){e.persist(),e.preventDefault(),m(e.target.value)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E,{request:Z,setRequest:v}),(0,l.jsxs)(u.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,l.jsx)(d.Z,{className:"mb-3",children:(0,l.jsx)(o.Z,{children:(0,l.jsx)(u.Z.Group,{children:(0,l.jsxs)(x.Z,{children:[(0,l.jsx)(x.Z.Text,{children:"\uD83D\uDD0E"}),(0,l.jsx)(h.Z,{type:"text",onBlur:p,onKeyDown:function(e){"Enter"===e.key&&p(e)}})]})})})}),(0,l.jsxs)(d.Z,{className:"my-3",children:[(0,l.jsx)(o.Z,{md:"auto",children:(0,l.jsx)(u.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,l.jsx)(o.Z,{children:(0,l.jsx)(k.d7,{onChange:function(e){return t(e.map(function(e){return e.value}))},required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:S})})]}),(0,l.jsxs)(d.Z,{className:"my-3",children:[(0,l.jsx)(o.Z,{md:"auto",children:(0,l.jsx)(u.Z.Label,{htmlFor:"status",children:"Users:"})}),(0,l.jsx)(o.Z,{children:(0,l.jsx)(k.d7,{onChange:function(e){return i(e.map(function(e){return e.value}))},required:!0,name:"users",defaultValue:w,options:w})})]}),n.map(function(e){return(0,l.jsx)(G,{state:e,users:r,search:j.toLowerCase(),setRequest:v},e)})]})]})}function G(e){var n=function(){return h.requests.filter(function(e){var n=e.title,t=e.link;return(null==n?void 0:n.toLowerCase().includes(r))||(null==t?void 0:t.toLowerCase())===r}).map(function(e){var n=e.id,t=e.title,s=e.link,r=e.user,o=e.userID,c=e.donator,u=e.reason,d=e.comments;return(0,l.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return a(e)},children:[(0,l.jsx)("td",{children:n}),(0,l.jsx)("td",{children:t}),(0,l.jsx)("td",{children:s}),(0,l.jsx)("td",{children:r||(o?"<@".concat(o,">"):"Not Found")}),(0,l.jsx)("td",{style:{textAlign:"center"},children:c?"⭐":""}),i&&(0,l.jsx)("td",{children:u}),(0,l.jsx)("td",{children:d})]},n)})},t=e.state,s=e.users,r=e.search,a=e.setRequest,i="hold"===t,c=(0,m.Ps)(R(),D),u=(0,Z.a)(c,{variables:{state:t,donator:s}}),h=u.data,x=u.loading,f=u.error;return f&&(console.log(f),b.Am.error("Failed to fetch requests")),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d.Z,{className:"mt-4",children:(0,l.jsx)(o.Z,{children:(0,l.jsx)("h3",{className:"text-capitalize",children:t})})}),(0,l.jsx)(d.Z,{children:(0,l.jsx)(o.Z,{style:{height:"500px"},children:(0,l.jsxs)("div",{className:$()("overflow-auto h-100",N().table),children:[x&&(0,l.jsx)(y.Z,{dev:!0,className:"mx-auto"}),h&&(0,l.jsxs)(j.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"ID"}),(0,l.jsx)("th",{children:"Title"}),(0,l.jsx)("th",{children:"Link"}),(0,l.jsx)("th",{children:"User"}),(0,l.jsx)("th",{children:"Donator"}),i&&(0,l.jsx)("th",{children:"Reason"}),(0,l.jsx)("th",{children:"Comments"}),(0,l.jsx)("th",{})]})}),(0,l.jsx)("tbody",{children:(0,l.jsx)(n,{})})]})]})})})]})}},8295:function(e){e.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(e,n,t){"use strict";var s=t(4184),r=t.n(s),l=t(7294),a=t(6611),i=t(6792),o=t(6558),c=t(3045),u=t(5893);let d=(0,a.Z)("input-group-text",{Component:"span"}),h=e=>(0,u.jsx)(d,{children:(0,u.jsx)(o.Z,{type:"checkbox",...e})}),x=e=>(0,u.jsx)(d,{children:(0,u.jsx)(o.Z,{type:"radio",...e})}),j=l.forwardRef(({bsPrefix:e,size:n,hasValidation:t,className:s,as:a="div",...o},d)=>{e=(0,i.vE)(e,"input-group");let h=(0,l.useMemo)(()=>({}),[]);return(0,u.jsx)(c.Z.Provider,{value:h,children:(0,u.jsx)(a,{ref:d,...o,className:r()(s,e,n&&`${e}-${n}`,t&&"has-validation")})})});j.displayName="InputGroup",n.Z=Object.assign(j,{Text:d,Radio:x,Checkbox:h})},5147:function(e,n,t){"use strict";var s=t(4184),r=t.n(s),l=t(7294),a=t(6792),i=t(5893);let o=l.forwardRef(({bsPrefix:e,className:n,striped:t,bordered:s,borderless:l,hover:o,size:c,variant:u,responsive:d,...h},x)=>{let j=(0,a.vE)(e,"table"),m=r()(n,j,u&&`${j}-${u}`,c&&`${j}-${c}`,t&&`${j}-striped`,s&&`${j}-bordered`,l&&`${j}-borderless`,o&&`${j}-hover`),f=(0,i.jsx)("table",{...h,className:m,ref:x});if(d){let Z=`${j}-responsive`;return"string"==typeof d&&(Z=`${Z}-${d}`),(0,i.jsx)("div",{className:Z,children:f})}return f});n.Z=o}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1365)}),_N_E=e.O()}]);