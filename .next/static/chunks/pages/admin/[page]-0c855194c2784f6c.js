(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{244:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/[page]",function(){return c(1736)}])},1736:function(f,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return M},"default":function(){return N}});var g=a(5893),h=a(7294),i=a(682),j=a(1555),k=a(343),l=a(2053),m=a(1608),n=a(5005),o=a(2878),p=a(2318),q=a(4716),r=a(5147),s=a(782),c=a(381),t=a.n(c),d=a(4184),u=a.n(d),v=a(7283),w=a(319),x=a(7887),y=a(1163),e=a(1664),z=a.n(e),A=a(3907),B=a(9738),C=a(599);function D(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function E(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||G(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function G(a,c){if(a){if("string"==typeof a)return D(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return D(a,c)}}function H(){var a=F(["\n    mutation deleteAlbum($id: ID!){\n      deleteAlbum(id: $id)\n    }\n  "]);return H=function(){return a},a}function I(){var a=F(["\n      query searchAlbum(\n        $title: String,\n        $page: Int,\n        $limit: Int,\n        $name: String,\n        $status: [String!]!\n      ){\n        searchAlbum(\n          title: $title,\n          page: $page,\n          limit: $limit,\n          status: $status\n        ){\n          rows{\n            id,\n            title,\n            createdAt,\n            updatedAt\n          },\n          count\n        }\n\n        config(name:$name){\n          label: name\n          value\n        }\n      }\n    "]);return I=function(){return a},a}function J(){var a=F(["\n      query {\n        highlight {\n          value: id\n          label: title\n        }\n      }\n    "]);return J=function(){return a},a}function K(){var a=F(["\n      mutation Config($name: String!, $value: String!){\n        config(name: $name, value: $value){\n          name\n          value\n        }\n      }\n    "]);return K=function(){return a},a}function L(){var a=F(["\n      mutation UploadBanner($banner: Upload!){\n        uploadBanner(banner: $banner)\n      }\n    "]);return L=function(){return a},a}var M=!0;function N(){return(0,g.jsxs)(i.Z,{fluid:!0,className:"d-flex",children:[(0,g.jsx)(j.Z,{xs:2,className:"pe-3",children:(0,g.jsxs)("div",{className:"sticky-top",children:[(0,g.jsx)("div",{className:"mb-2 mt-3 text-center",children:"Navigation"}),(0,g.jsxs)("div",{className:"py-2 site-form blackblock d-flex flex-column",children:[(0,g.jsx)("a",{href:"#addAlbum",children:"OST List"}),(0,g.jsx)("a",{href:"#addSeries",children:"Edit highlight"}),(0,g.jsx)("a",{href:"#addGame",children:"Edit banner"})]})]})}),(0,g.jsxs)(j.Z,{xs:10,children:[(0,g.jsx)(O,{}),(0,g.jsx)(P,{}),(0,g.jsx)(Q,{})]})]})}function O(){var i=parseInt((0,y.useRouter)().query.page||"1"),D=(0,v.Ps)(H()),F=(0,v.Ps)(I()),b=(0,h.useState)(["show","hidden","coming"]),G=b[0],L=b[1],c=E((0,w.D)(D),2),M=c[0],J=c[1],N=J.loading,a=(0,x.a)(F,{variables:{title:"",page:i-1,limit:10,name:"highlight",status:G}}),d=a.data,K=a.loading,e=a.error,O=a.refetch;e&&(console.log(e),s.Am.error("Failed to fetch server info"));var f=["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}});return(0,g.jsxs)(o.Z,{className:"site-form blackblock mt-5",children:[(0,g.jsxs)(m.Z,{className:"my-3",children:[(0,g.jsx)(j.Z,{xs:"auto",children:(0,g.jsx)(o.Z.Group,{children:(0,g.jsx)(z(),{href:"/admin/album/add",passHref:!0,children:(0,g.jsx)(n.Z,{variant:"primary",children:"Add Album"})})})}),(0,g.jsx)(j.Z,{children:(0,g.jsx)(o.Z.Group,{children:(0,g.jsxs)(p.Z,{children:[(0,g.jsx)(p.Z.Text,{children:"\uD83D\uDD0E"}),(0,g.jsx)(q.Z,{type:"text",onChange:function(a){a.persist(),a.preventDefault(),O({title:a.target.value,page:i-1,limit:10,name:"highlight",status:G})}})]})})})]}),(0,g.jsxs)(m.Z,{className:"my-3",children:[(0,g.jsx)(j.Z,{md:"auto",children:(0,g.jsx)(o.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,g.jsx)(j.Z,{children:(0,g.jsx)(A.d7,{onChange:function(a){return L(a.map(function(a){return a.value}))},required:!0,name:"status",defaultValue:f,options:f})})]}),(0,g.jsx)(m.Z,{children:(0,g.jsxs)(j.Z,{children:[(0,g.jsxs)(r.Z,{variant:"dark",hover:!0,children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Title"}),(0,g.jsx)("th",{children:"Created"}),(0,g.jsx)("th",{children:"Last Updated"}),(0,g.jsx)("th",{})]})}),(0,g.jsx)("tbody",{children:d&&(0,g.jsx)(function(){var a=(0,h.useState)(!1),f=a[0],p=a[1],b=(0,h.useState)({}),c=b[0],q=b[1],e=d.searchAlbum,i=c.id,o=c.title;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(k.Z,{centered:!0,show:f,onHide:function(){return p(!1)},children:(0,g.jsxs)(l.Z,{className:"m-3",style:{color:"black"},children:[(0,g.jsx)(m.Z,{children:(0,g.jsx)(j.Z,{children:'Delete the OST "'.concat(o,'" (ID: ').concat(i,")?")})}),(0,g.jsx)(m.Z,{className:"mt-2",children:(0,g.jsxs)(j.Z,{children:[(0,g.jsx)(n.Z,{color:"primary",className:"mx-2",onClick:function(){M({variables:{id:i}}).then(function(a){s.Am.success('Deleted OST "'.concat(o,'" (').concat(i,") succesfully")),O()}).catch(function(a){console.log(a),s.Am.error('Failed to delete OST "'.concat(o,'" (').concat(i,")"))}).finally(function(){return q(!f)})},children:N?(0,g.jsx)(B.Z,{dev:!0}):"Yes"}),(0,g.jsx)(n.Z,{color:"primary",className:"mx-2",onClick:function(){return q(!f)},children:"No"})]})})]})}),e.rows&&e.rows.map(function(a){var b=a.id,c=a.title,d=a.createdAt,e=a.updatedAt;return(0,g.jsxs)("tr",{children:[(0,g.jsx)(z(),{href:"/admin/album/".concat(b),passHref:!0,children:(0,g.jsx)("td",{style:{cursor:"pointer"},children:c})}),(0,g.jsx)(z(),{href:"/admin/album/".concat(b),passHref:!0,children:(0,g.jsx)("td",{style:{cursor:"pointer"},children:t()(d).format("DD/MM/YYYY HH:mm:ss")})}),(0,g.jsx)(z(),{href:"/admin/album/".concat(b),passHref:!0,children:(0,g.jsx)("td",{style:{cursor:"pointer"},children:t()(e).format("DD/MM/YYYY HH:mm:ss")})}),(0,g.jsx)("td",{children:(0,g.jsx)(n.Z,{onClick:function(){q({id:b,title:c}),p(!0)},children:"Remove"})})]},b)})]})},{})})]}),K&&(0,g.jsx)(B.Z,{dev:!0})]})}),(0,g.jsx)(m.Z,{children:d&&(0,g.jsx)(function(){var f=d.searchAlbum,b=(0,C.Hx)(f.count,10),c=(0,C.RB)(b,15,i),h=c.pageList,a=c.currentList,e=c.currentListIndex;return(0,g.jsx)(j.Z,{xs:"auto",className:"pagination mx-auto page-bar",children:a&&(0,g.jsxs)(g.Fragment,{children:[e>0&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(z(),{href:"/admin/1",children:(0,g.jsx)("a",{className:"fas fa-angle-double-left align-middle nav-link"})}),(0,g.jsx)(z(),{href:"/admin/".concat(a[0]-1),children:(0,g.jsx)("a",{className:"fas fa-angle-left align-middle nav-link"})})]}),a.map(function(a){return(0,g.jsx)(z(),{href:"/admin/".concat(a),children:(0,g.jsx)("a",{className:u()({disabled:a===parseInt(i)},"nav-link"),children:a})},a)}),e!==h.length-1&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(z(),{href:"/admin/".concat(a[a.length-1]+1),children:(0,g.jsx)("a",{className:"fas fa-angle-right align-middle nav-link"})}),(0,g.jsx)(z(),{href:"/admin/".concat(b[b.length-1]),children:(0,g.jsx)("a",{className:"fas fa-angle-double-right align-middle nav-link"})})]})]})})},{})})]})}function P(){var d=(0,v.Ps)(J()),e=(0,v.Ps)(K()),a=(0,x.a)(d),f=a.loading,b=a.data,c=a.error,i=a.refetch,h=E((0,w.D)(e),1),k=h[0];return c&&(console.log(c),s.Am.error("Hightlight: Failed to fetch server info")),(0,g.jsxs)(j.Z,{md:12,className:"mt-3 site-form blackblock p-3",children:[(0,g.jsx)(o.Z.Label,{children:"Highlight OST:"}),(0,g.jsx)(A.Q$,{isSingle:!0,defaultValue:b&&[b.highlight],onChange:function(a){k({variables:{name:"highlight",value:a.value}}).then(function(a){s.Am.success("Updated highlighted OST!"),i()}).catch(function(a){console.log(a),s.Am.error("Failed to update highlighted OST")})},loading:f})]})}function Q(){var b=(0,v.Ps)(L()),a=E((0,w.D)(b),2),d=a[0],c=a[1].loading;return(0,g.jsx)(j.Z,{md:12,className:"mt-3 site-form blackblock p-3",children:(0,g.jsxs)(o.Z.Group,{children:[(0,g.jsx)(o.Z.Label,{htmlFor:"banner",children:"Upload Banner:"}),c?(0,g.jsx)(B.Z,{dev:!0}):(0,g.jsx)(q.Z,{type:"file",onChange:function(a){d({variables:{banner:E(a.target.files,1)[0]}}).then(function(a){s.Am.success("Updated banner!")}).catch(function(a){console.log(a),s.Am.error("Failed to update banner")}),a.persist(),a.preventDefault()}})]})})}},2318:function(h,c,a){"use strict";var d=a(4184),i=a.n(d),e=a(7294),f=a(6611),j=a(6792),k=a(6558),l=a(3045),m=a(5893);let g=(0,f.Z)("input-group-text",{Component:"span"}),b=e.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:f="div",...g},h)=>{a=(0,j.vE)(a,"input-group");let k=(0,e.useMemo)(()=>({}),[]);return(0,m.jsx)(l.Z.Provider,{value:k,children:(0,m.jsx)(f,{ref:h,...g,className:i()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});b.displayName="InputGroup",c.Z=Object.assign(b,{Text:g,Radio:a=>(0,m.jsx)(g,{children:(0,m.jsx)(k.Z,{type:"radio",...a})}),Checkbox:a=>(0,m.jsx)(g,{children:(0,m.jsx)(k.Z,{type:"checkbox",...a})})})},5147:function(f,b,a){"use strict";var c=a(4184),g=a.n(c),d=a(7294),h=a(6792),i=a(5893);let e=d.forwardRef(({bsPrefix:j,className:k,striped:l,bordered:m,borderless:n,hover:o,size:d,variant:e,responsive:b,...p},q)=>{let a=(0,h.vE)(j,"table"),r=g()(k,a,e&&`${a}-${e}`,d&&`${a}-${d}`,l&&`${a}-striped`,m&&`${a}-bordered`,n&&`${a}-borderless`,o&&`${a}-hover`),f=(0,i.jsx)("table",{...p,className:r,ref:q});if(b){let c=`${a}-responsive`;return"string"==typeof b&&(c=`${c}-${b}`),(0,i.jsx)("div",{className:c,children:f})}return f});b.Z=e}},function(a){a.O(0,[885,907,774,888,179],function(){return a(a.s=244)}),_N_E=a.O()}])