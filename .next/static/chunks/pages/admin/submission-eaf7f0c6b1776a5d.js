(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{7434:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/submission",function(){return t(6280)}])},6280:function(e,s,t){"use strict";t.r(s),t.d(s,{__N_SSP:function(){return g},default:function(){return C}});var n=t(7297),l=t(5893),r=t(7294),i=t(682),a=t(1555),d=t(343),o=t(2878),u=t(4051),c=t(4716),h=t(2318),x=t(5147),j=t(7283),m=t(1641),Z=t(782),p=t(4184),b=t.n(p),v=t(3907),f=t(9738),y=t(4495),k=t.n(y);function N(){let e=(0,n.Z)(["\n  query ($state: String!) {\n    submissions(state: [$state]) {\n      ","\n    }\n  }\n"]);return N=function(){return e},e}let _=["Pending","Rejected","Accepted","Published"].map(e=>({label:e,value:e.toLowerCase()}));var g=!0;function C(){return(0,l.jsx)(i.Z,{children:(0,l.jsx)(a.Z,{children:(0,l.jsx)(q,{})})})}function w(e){let{submission:s,setRequest:t}=e,n=(0,r.useRef)(null);return(0,l.jsx)(d.Z,{show:s,onHide:()=>t(),centered:!0,children:(0,l.jsx)(d.Z.Body,{children:(0,l.jsxs)(o.Z,{ref:n,style:{color:"black"},children:[(0,l.jsx)(u.Z,{children:(0,l.jsxs)(o.Z.Group,{as:a.Z,children:[(0,l.jsx)(o.Z.Label,{htmlFor:"title",children:"Title:"}),(0,l.jsx)(o.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==s?void 0:s.title})]})}),(0,l.jsx)(u.Z,{className:"mt-3",children:(0,l.jsxs)(o.Z.Group,{as:a.Z,children:[(0,l.jsx)(o.Z.Label,{htmlFor:"link",children:"VGMDB:"}),(0,l.jsx)(o.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==s?void 0:s.vgmdb})]})}),(0,l.jsxs)(u.Z,{className:"mt-3",children:[(0,l.jsxs)(o.Z.Group,{as:a.Z,children:[(0,l.jsx)(o.Z.Label,{htmlFor:"link",children:"State:"}),(0,l.jsx)("select",{className:"form-control",name:"state",defaultValue:null==s?void 0:s.state,children:_.map(e=>(0,l.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,l.jsxs)(o.Z.Group,{as:a.Z,children:[(0,l.jsx)(o.Z.Label,{htmlFor:"state",children:"Submitter:"}),(0,l.jsx)(o.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==s?void 0:s.submitter.username,readOnly:!0})]})]}),(0,l.jsx)(u.Z,{className:"mt-3",children:(0,l.jsxs)(o.Z.Group,{as:a.Z,children:[(0,l.jsx)(o.Z.Label,{htmlFor:"comment",children:"Links:"}),(0,l.jsx)(c.Z,{required:!0,as:"textarea",name:"comment",value:null==s?void 0:s.links,readOnly:!0})]})}),(0,l.jsx)(u.Z,{className:"mt-3",children:(0,l.jsxs)(o.Z.Group,{as:a.Z,children:[(0,l.jsx)(o.Z.Label,{htmlFor:"observations",children:"Observations:"}),(0,l.jsx)(c.Z,{required:!0,as:"textarea",name:"observations",defaultValue:null==s?void 0:s.observations})]})}),(0,l.jsxs)(u.Z,{className:"mt-4",children:[(0,l.jsx)(o.Z.Group,{as:a.Z,children:(0,l.jsx)(o.Z.Check,{type:"checkbox",name:"lossy",label:"Lossy / MP3 Only",defaultChecked:null==s?void 0:s.lossy})}),(0,l.jsx)(o.Z.Group,{as:a.Z,children:(0,l.jsx)(o.Z.Check,{type:"checkbox",name:"hold",label:'"Hold" request bonus',defaultChecked:null==s?void 0:s.hold})})]})]})})})}function q(){let[e,s]=(0,r.useState)(["pending"]),[t,n]=(0,r.useState)(""),[i,d]=(0,r.useState)(),x=e=>{e.persist(),e.preventDefault(),n(e.target.value)};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w,{submission:i,setRequest:d}),(0,l.jsxs)(o.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,l.jsx)(u.Z,{className:"mb-3",children:(0,l.jsx)(a.Z,{children:(0,l.jsx)(o.Z.Group,{children:(0,l.jsxs)(h.Z,{children:[(0,l.jsx)(h.Z.Text,{children:"\uD83D\uDD0E"}),(0,l.jsx)(c.Z,{type:"text",onBlur:x,onKeyDown(e){"Enter"===e.key&&x(e)}})]})})})}),(0,l.jsxs)(u.Z,{className:"my-3",children:[(0,l.jsx)(a.Z,{md:"auto",children:(0,l.jsx)(o.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,l.jsx)(a.Z,{children:(0,l.jsx)(v.d7,{onChange:e=>s(e.map(e=>e.value)),required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:_})})]}),e.map(e=>(0,l.jsx)($,{state:e,search:t.toLowerCase(),setRequest:d},e))]})]})}function $(e){let{state:s,search:t,setRequest:n}=e,r=(0,j.Ps)(N(),"\n  id\n  title\n  vgmdb\n  links\n  request {\n    id\n  }\n  submitter {\n    username\n  }\n"),{data:i,loading:d,error:o}=(0,m.a)(r,{variables:{state:s}});return o&&(console.log(o),Z.Am.error("Failed to fetch requests")),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.Z,{className:"mt-4",children:(0,l.jsx)(a.Z,{children:(0,l.jsx)("h3",{className:"text-capitalize",children:s})})}),(0,l.jsx)(u.Z,{children:(0,l.jsx)(a.Z,{style:{height:"500px"},children:(0,l.jsxs)("div",{className:b()("overflow-auto h-100",k().table),children:[d&&(0,l.jsx)(f.Z,{dev:!0,className:"mx-auto"}),i&&(0,l.jsxs)(x.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,l.jsx)("thead",{children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{children:"ID"}),(0,l.jsx)("th",{children:"Title"}),(0,l.jsx)("th",{children:"Link"}),(0,l.jsx)("th",{children:"Requested"}),(0,l.jsx)("th",{children:"Submitter"})]})}),(0,l.jsx)("tbody",{children:(0,l.jsx)(function(){return i.submissions.filter(e=>{let{title:s,link:n}=e;return(null==s?void 0:s.toLowerCase().includes(t))||(null==n?void 0:n.toLowerCase())===t}).map(e=>{let{id:s,title:t,vgmdb:r,submitter:i,request:a}=e;return(0,l.jsxs)("tr",{style:{cursor:"pointer"},onClick:()=>n(e),children:[(0,l.jsx)("td",{children:s}),(0,l.jsx)("td",{children:t}),(0,l.jsx)("td",{children:r}),a?(0,l.jsx)("td",{children:"âœ“"}):(0,l.jsx)("td",{}),(0,l.jsx)("td",{children:i.username})]},s)})},{})})]})]})})})]})}},4495:function(e){e.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(e,s,t){"use strict";var n=t(4184),l=t.n(n),r=t(7294),i=t(6611),a=t(6792),d=t(6558),o=t(3045),u=t(5893);let c=(0,i.Z)("input-group-text",{Component:"span"}),h=e=>(0,u.jsx)(c,{children:(0,u.jsx)(d.Z,{type:"checkbox",...e})}),x=e=>(0,u.jsx)(c,{children:(0,u.jsx)(d.Z,{type:"radio",...e})}),j=r.forwardRef(({bsPrefix:e,size:s,hasValidation:t,className:n,as:i="div",...d},c)=>{e=(0,a.vE)(e,"input-group");let h=(0,r.useMemo)(()=>({}),[]);return(0,u.jsx)(o.Z.Provider,{value:h,children:(0,u.jsx)(i,{ref:c,...d,className:l()(n,e,s&&`${e}-${s}`,t&&"has-validation")})})});j.displayName="InputGroup",s.Z=Object.assign(j,{Text:c,Radio:x,Checkbox:h})},5147:function(e,s,t){"use strict";var n=t(4184),l=t.n(n),r=t(7294),i=t(6792),a=t(5893);let d=r.forwardRef(({bsPrefix:e,className:s,striped:t,bordered:n,borderless:r,hover:d,size:o,variant:u,responsive:c,...h},x)=>{let j=(0,i.vE)(e,"table"),m=l()(s,j,u&&`${j}-${u}`,o&&`${j}-${o}`,t&&`${j}-striped`,n&&`${j}-bordered`,r&&`${j}-borderless`,d&&`${j}-hover`),Z=(0,a.jsx)("table",{...h,className:m,ref:x});if(c){let p=`${j}-responsive`;return"string"==typeof c&&(p=`${p}-${c}`),(0,a.jsx)("div",{className:p,children:Z})}return Z});s.Z=d}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7434)}),_N_E=e.O()}]);