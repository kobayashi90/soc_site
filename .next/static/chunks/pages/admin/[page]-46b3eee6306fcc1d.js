(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{244:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/[page]",function(){return t(1736)}])},1736:function(e,n,t){"use strict";t.r(n),t.d(n,{__N_SSP:function(){return Y},default:function(){return I}});var a=t(7297),s=t(5893),l=t(7294),r=t(682),i=t(1555),c=t(4051),o=t(343),d=t(2053),u=t(5005),h=t(2878),m=t(2318),x=t(4716),f=t(5147),j=t(782),g=t(381),p=t.n(g),b=t(4184),v=t.n(b),Z=t(7283),N=t(319),k=t(1641),$=t(1163),y=t(1664),A=t.n(y),w=t(3907),D=t(9738),C=t(599);function S(){let e=(0,a.Z)(["\n    mutation deleteAlbum($id: ID!){\n      deleteAlbum(id: $id)\n    }\n  "]);return S=function(){return e},e}function _(){let e=(0,a.Z)(["\n      query searchAlbum(\n        $title: String,\n        $page: Int,\n        $limit: Int,\n        $name: String,\n        $status: [String!]!\n      ){\n        searchAlbum(\n          title: $title,\n          page: $page,\n          limit: $limit,\n          status: $status\n        ){\n          rows{\n            id,\n            title,\n            createdAt,\n            updatedAt\n          },\n          count\n        }\n\n        config(name:$name){\n          label: name\n          value\n        }\n      }\n    "]);return _=function(){return e},e}function H(){let e=(0,a.Z)(["\n      query {\n        highlight {\n          value: id\n          label: title\n        }\n      }\n    "]);return H=function(){return e},e}function F(){let e=(0,a.Z)(["\n      mutation Config($name: String!, $value: String!){\n        config(name: $name, value: $value){\n          name\n          value\n        }\n      }\n    "]);return F=function(){return e},e}function P(){let e=(0,a.Z)(["\n      mutation UploadBanner($banner: Upload!){\n        uploadBanner(banner: $banner)\n      }\n    "]);return P=function(){return e},e}function E(){let e=(0,a.Z)(["\n      query {\n        banners\n      }\n    "]);return E=function(){return e},e}function B(){let e=(0,a.Z)(["\n      mutation ($name: String!){\n        selectBanner(name: $name)\n      }\n    "]);return B=function(){return e},e}var Y=!0;function I(){return(0,s.jsxs)(r.Z,{fluid:!0,className:"d-flex",children:[(0,s.jsx)(i.Z,{xs:2,className:"pe-3",children:(0,s.jsxs)("div",{className:"sticky-top",children:[(0,s.jsx)("div",{className:"mb-2 mt-3 text-center",children:"Navigation"}),(0,s.jsxs)("div",{className:"py-2 site-form blackblock d-flex flex-column",children:[(0,s.jsx)("a",{href:"#addAlbum",children:"Album List"}),(0,s.jsx)("a",{href:"#addSeries",children:"Edit highlight"}),(0,s.jsx)("a",{href:"#addGame",children:"Edit banner"})]})]})}),(0,s.jsxs)(i.Z,{xs:10,children:[(0,s.jsx)(L,{}),(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(U,{}),(0,s.jsx)(q,{})]}),(0,s.jsx)(c.Z,{children:(0,s.jsx)(R,{})})]})]})}function L(){let e=(0,$.useRouter)(),n=parseInt(e.query.page||"1"),t=(0,Z.Ps)(S()),a=(0,Z.Ps)(_()),[r,g]=(0,l.useState)(["show","hidden","coming"]),[b,{loading:y}]=(0,N.D)(t),{data:H,loading:F,error:P,refetch:E}=(0,k.a)(a,{variables:{title:"",page:n-1,limit:10,name:"highlight",status:r}});P&&(console.log(P),j.Am.error("Failed to fetch server info"));let B=["Show","Hidden","Coming"].map(e=>({label:e,value:e.toLowerCase()}));return(0,s.jsxs)(h.Z,{className:"site-form blackblock mt-5",children:[(0,s.jsxs)(c.Z,{className:"my-3",children:[(0,s.jsx)(i.Z,{xs:"auto",children:(0,s.jsx)(h.Z.Group,{children:(0,s.jsx)(A(),{href:"/admin/album/add",passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(u.Z,{variant:"primary",children:"Add Album"})})})}),(0,s.jsx)(i.Z,{children:(0,s.jsx)(h.Z.Group,{children:(0,s.jsxs)(m.Z,{children:[(0,s.jsx)(m.Z.Text,{children:"\uD83D\uDD0E"}),(0,s.jsx)(x.Z,{type:"text",onChange:function(e){e.persist(),e.preventDefault(),E({title:e.target.value,page:n-1,limit:10,name:"highlight",status:r})}})]})})})]}),(0,s.jsxs)(c.Z,{className:"my-3",children:[(0,s.jsx)(i.Z,{md:"auto",children:(0,s.jsx)(h.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,s.jsx)(i.Z,{children:(0,s.jsx)(w.d7,{onChange:e=>g(e.map(e=>e.value)),required:!0,name:"status",defaultValue:B,options:B})})]}),(0,s.jsx)(c.Z,{children:(0,s.jsxs)(i.Z,{children:[(0,s.jsxs)(f.Z,{variant:"dark",hover:!0,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Title"}),(0,s.jsx)("th",{children:"Created"}),(0,s.jsx)("th",{children:"Last Updated"}),(0,s.jsx)("th",{})]})}),(0,s.jsx)("tbody",{children:H&&(0,s.jsx)(function(){let[e,n]=(0,l.useState)(!1),[t,a]=(0,l.useState)({}),{searchAlbum:r}=H,{id:h,title:m}=t;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{centered:!0,show:e,onHide:()=>n(!1),children:(0,s.jsxs)(d.Z,{className:"m-3",style:{color:"black"},children:[(0,s.jsx)(c.Z,{children:(0,s.jsx)(i.Z,{children:'Delete the album "'.concat(m,'" (ID: ').concat(h,")?")})}),(0,s.jsx)(c.Z,{className:"mt-2",children:(0,s.jsxs)(i.Z,{children:[(0,s.jsx)(u.Z,{color:"primary",className:"mx-2",onClick:function(){b({variables:{id:h}}).then(e=>{j.Am.success('Deleted album "'.concat(m,'" (').concat(h,") succesfully")),E()}).catch(e=>{console.log(e),j.Am.error('Failed to delete album "'.concat(m,'" (').concat(h,")"))}).finally(()=>a(!e))},children:y?(0,s.jsx)(D.Z,{dev:!0}):"Yes"}),(0,s.jsx)(u.Z,{color:"primary",className:"mx-2",onClick:()=>a(!e),children:"No"})]})})]})}),r.rows&&r.rows.map(e=>{let{id:t,title:l,createdAt:r,updatedAt:i}=e;return(0,s.jsxs)("tr",{children:[(0,s.jsx)(A(),{href:"/admin/album/".concat(t),passHref:!0,legacyBehavior:!0,children:(0,s.jsx)("td",{style:{cursor:"pointer"},children:l})}),(0,s.jsx)(A(),{href:"/admin/album/".concat(t),passHref:!0,legacyBehavior:!0,children:(0,s.jsx)("td",{style:{cursor:"pointer"},children:p()(r).format("DD/MM/YYYY HH:mm:ss")})}),(0,s.jsx)(A(),{href:"/admin/album/".concat(t),passHref:!0,legacyBehavior:!0,children:(0,s.jsx)("td",{style:{cursor:"pointer"},children:p()(i).format("DD/MM/YYYY HH:mm:ss")})}),(0,s.jsx)("td",{children:(0,s.jsx)(u.Z,{onClick(){a({id:t,title:l}),n(!0)},children:"Remove"})})]},t)})]})},{})})]}),F&&(0,s.jsx)(D.Z,{dev:!0})]})}),(0,s.jsx)(c.Z,{children:H&&(0,s.jsx)(function(){let{searchAlbum:e}=H,t=(0,C.Hx)(e.count,10),{pageList:a,currentList:l,currentListIndex:r}=(0,C.RB)(t,15,n);return(0,s.jsx)(i.Z,{xs:"auto",className:"pagination mx-auto page-bar",children:l&&(0,s.jsxs)(s.Fragment,{children:[r>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A(),{href:"/admin/1",className:"fas fa-angle-double-left align-middle nav-link"}),(0,s.jsx)(A(),{href:"/admin/".concat(l[0]-1),className:"fas fa-angle-left align-middle nav-link"})]}),l.map(e=>(0,s.jsx)(A(),{href:"/admin/".concat(e),className:v()({disabled:e===parseInt(n)},"nav-link"),children:e},e)),r!==a.length-1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(A(),{href:"/admin/".concat(l[l.length-1]+1),className:"fas fa-angle-right align-middle nav-link"}),(0,s.jsx)(A(),{href:"/admin/".concat(t[t.length-1]),className:"fas fa-angle-double-right align-middle nav-link"})]})]})})},{})})]})}function U(){let e=(0,Z.Ps)(H()),n=(0,Z.Ps)(F()),{loading:t,data:a,error:l,refetch:r}=(0,k.a)(e),[c]=(0,N.D)(n);return l&&(console.log(l),j.Am.error("Hightlight: Failed to fetch server info")),(0,s.jsxs)(i.Z,{md:6,className:"mt-3 site-form blackblock p-3",children:[(0,s.jsx)(h.Z.Label,{children:"Highlight album:"}),(0,s.jsx)(w.Q$,{options:{isSingle:!0,defaultValue:null==a?void 0:a.highlight,onChange:function(e){let{value:n}=e;c({variables:{name:"highlight",value:n}}).then(e=>{j.Am.success("Updated highlighted album!"),r()}).catch(e=>{console.log(e),j.Am.error("Failed to update highlighted album")})},loading:t}})]})}function q(){let e=(0,Z.Ps)(P()),[n,{loading:t}]=(0,N.D)(e);return(0,s.jsx)(i.Z,{md:6,className:"mt-3 site-form blackblock p-3",children:(0,s.jsxs)(h.Z.Group,{children:[(0,s.jsx)(h.Z.Label,{htmlFor:"banner",children:"Upload Banner:"}),t?(0,s.jsx)(D.Z,{dev:!0}):(0,s.jsx)(x.Z,{type:"file",onChange:function(e){let[t]=e.target.files;n({variables:{banner:t}}).then(e=>{j.Am.success("Updated banner!")}).catch(e=>{console.log(e),j.Am.error("Failed to update banner")}),e.persist(),e.preventDefault()}})]})})}function R(){let e=(0,Z.Ps)(E()),n=(0,Z.Ps)(B()),{loadingQuery:t,data:a,error:l,refetch:r}=(0,k.a)(e),[c,{loading:o}]=(0,N.D)(n);return l&&(console.log(l),j.Am.error("Hightlight: Failed to fetch server info")),(0,s.jsxs)(i.Z,{md:12,className:"p-0 my-3 site-form blackblock position-relative",children:[(o||t)&&(0,s.jsxs)("div",{className:"p-0 position-absolute h-100 w-100",children:[(0,s.jsx)("div",{className:"p-0 blackblock position-absolute h-100 w-100",style:{backgroundColor:"black",opacity:.65}}),(0,s.jsx)(D.Z,{className:"m-auto"})]}),(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)(h.Z.Label,{children:"Available banners:"}),null==a?void 0:a.banners.map(e=>(0,s.jsx)("div",{className:"my-2",onClick:()=>(function(e){c({variables:{name:e.replace(".png","")}}).then(e=>{j.Am.success("Updated banner!"),r()}).catch(e=>{console.log(e),j.Am.error("Failed to update banner")})})(e),style:{cursor:"pointer",height:"110px",width:"100%",backgroundSize:"cover",backgroundImage:"url('/_next/image?w=3840&q=25&url=".concat("https://cdn.sittingonclouds.net/live/".concat(e))}},e))]})]})}},2318:function(e,n,t){"use strict";var a=t(4184),s=t.n(a),l=t(7294),r=t(6611),i=t(6792),c=t(6558),o=t(3045),d=t(5893);let u=(0,r.Z)("input-group-text",{Component:"span"}),h=e=>(0,d.jsx)(u,{children:(0,d.jsx)(c.Z,{type:"checkbox",...e})}),m=e=>(0,d.jsx)(u,{children:(0,d.jsx)(c.Z,{type:"radio",...e})}),x=l.forwardRef(({bsPrefix:e,size:n,hasValidation:t,className:a,as:r="div",...c},u)=>{e=(0,i.vE)(e,"input-group");let h=(0,l.useMemo)(()=>({}),[]);return(0,d.jsx)(o.Z.Provider,{value:h,children:(0,d.jsx)(r,{ref:u,...c,className:s()(a,e,n&&`${e}-${n}`,t&&"has-validation")})})});x.displayName="InputGroup",n.Z=Object.assign(x,{Text:u,Radio:m,Checkbox:h})},5147:function(e,n,t){"use strict";var a=t(4184),s=t.n(a),l=t(7294),r=t(6792),i=t(5893);let c=l.forwardRef(({bsPrefix:e,className:n,striped:t,bordered:a,borderless:l,hover:c,size:o,variant:d,responsive:u,...h},m)=>{let x=(0,r.vE)(e,"table"),f=s()(n,x,d&&`${x}-${d}`,o&&`${x}-${o}`,t&&`${x}-striped`,a&&`${x}-bordered`,l&&`${x}-borderless`,c&&`${x}-hover`),j=(0,i.jsx)("table",{...h,className:f,ref:m});if(u){let g=`${x}-responsive`;return"string"==typeof u&&(g=`${g}-${u}`),(0,i.jsx)("div",{className:g,children:j})}return j});n.Z=c}},function(e){e.O(0,[885,774,888,179],function(){return e(e.s=244)}),_N_E=e.O()}]);