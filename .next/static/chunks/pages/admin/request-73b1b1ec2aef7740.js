(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{1365:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/request",function(){return c(8906)}])},8906:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return H},default:function(){return I}});var d=c(828),e=c(7297),f=c(5893),g=c(7294),h=c(682),i=c(1555),j=c(7931),k=c(2878),l=c(1608),m=c(4716),n=c(2318),o=c(5147),p=c(7283),q=c(319),r=c(1641),s=c(7422),t=c.n(s),u=c(782),v=c(4184),w=c.n(v),x=c(2045),y=c(5043),z=c(8295),A=c.n(z);function B(){var a=(0,e.Z)(["\n    mutation ($id: ID!, $reason: String){\n      rejectRequest(id: $id, reason: $reason)\n    }\n  "]);return B=function(){return a},a}function C(){var a=(0,e.Z)(["\n    mutation ($id: ID!, $title: String, $link: String, $state: String, $comments: String, $reason: String){\n      editRequest(id: $id, title: $title, link: $link, state: $state, comments: $comments, reason: $reason){\n        ","\n      }\n    }\n  "]);return C=function(){return a},a}function D(){var a=(0,e.Z)(["\n  query ($state: String!, $donator: [Boolean!]!) {\n    requests(state: [$state], donator: $donator) {\n      ","\n    }\n  }\n"]);return D=function(){return a},a}var E=["Complete","Pending","Hold"].map(function(a){return{label:a,value:a.toLowerCase()}}),F=["Donators","Members"].map(function(a){return{label:a,value:"Donators"===a}}),G="\n  id\n  title\n  link\n  user\n  userID\n  state\n  donator\n  reason\n  comments\n",H=!0;function I(){return(0,f.jsx)(h.Z,{children:(0,f.jsx)(i.Z,{children:(0,f.jsx)(K,{})})})}function J(a){var b=function(){var a=F.current,b=t()(a,{hash:!0});b.id=e.id,z({variables:b}).then(function(b){u.Am.success("Updated request succesfully!"),h(b.data.editRequest),a.reset()}).catch(function(a){console.log(a),u.Am.error(a.message,{autoclose:!1})})},c=function(){var a=F.current,b=t()(a,{hash:!0});b.id=e.id,s({variables:b}).then(function(b){u.Am.success("Request rejected succesfully!"),h(),a.reset()}).catch(function(a){console.log(a),u.Am.error(a.message,{autoclose:!1})})},e=a.request,h=a.setRequest,n=(0,p.Ps)(B()),o=(0,p.Ps)(C(),G),r=(0,d.Z)((0,q.D)(n),2),s=r[0],v=r[1],w=v.loading,x=(0,d.Z)((0,q.D)(o),2),z=x[0],A=x[1],D=A.loading,F=(0,g.useRef)(null);return(0,f.jsxs)(j.Z,{show:e,onHide:function(){return h()},centered:!0,children:[(0,f.jsx)(j.Z.Body,{children:(0,f.jsxs)(k.Z,{ref:F,children:[(0,f.jsx)(l.Z,{children:(0,f.jsxs)(k.Z.Group,{as:i.Z,children:[(0,f.jsx)(k.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,f.jsx)(k.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==e?void 0:e.title})]})}),(0,f.jsxs)(l.Z,{className:"mt-3",children:[(0,f.jsxs)(k.Z.Group,{as:i.Z,children:[(0,f.jsx)(k.Z.Label,{htmlFor:"link",style:{color:"black"},children:"Link:"}),(0,f.jsx)(k.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==e?void 0:e.link})]}),(0,f.jsxs)(k.Z.Group,{as:i.Z,children:[(0,f.jsx)(k.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Status:"}),(0,f.jsx)("select",{className:"form-control",name:"state",defaultValue:null==e?void 0:e.state,children:E.map(function(a){return(0,f.jsx)("option",{value:a.value,children:a.label},a.value)})})]})]}),(0,f.jsx)(l.Z,{className:"mt-3",children:(0,f.jsxs)(k.Z.Group,{as:i.Z,children:[(0,f.jsx)(k.Z.Label,{htmlFor:"comment",style:{color:"black"},defaultValue:null==e?void 0:e.comment,children:"Comments:"}),(0,f.jsx)(m.Z,{required:!0,as:"textarea",name:"comment"})]})}),(0,f.jsx)(l.Z,{className:"mt-3",children:(0,f.jsxs)(k.Z.Group,{as:i.Z,children:[(0,f.jsx)(k.Z.Label,{htmlFor:"reason",style:{color:"black"},defaultValue:null==e?void 0:e.reason,children:"Reason:"}),(0,f.jsx)(m.Z,{required:!0,as:"textarea",name:"reason"})]})})]})}),(0,f.jsxs)(j.Z.Footer,{children:[(0,f.jsx)(y.l,{loading:w,disabled:D,variant:"danger",onClick:c,children:"Reject"}),(0,f.jsx)(y.l,{loading:D,disabled:w,variant:"primary",onClick:b,children:"Save Changes"})]})]})}function K(){var a=(0,g.useState)(["pending"]),b=a[0],c=a[1],d=(0,g.useState)(F.map(function(a){return a.value})),e=d[0],h=d[1],j=(0,g.useState)(""),o=j[0],p=j[1],q=(0,g.useState)(),r=q[0],s=q[1],t=function(a){a.persist(),a.preventDefault(),p(a.target.value)};return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(J,{request:r,setRequest:s}),(0,f.jsxs)(k.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,f.jsx)(l.Z,{className:"mb-3",children:(0,f.jsx)(i.Z,{children:(0,f.jsx)(k.Z.Group,{children:(0,f.jsxs)(n.Z,{children:[(0,f.jsx)(n.Z.Text,{children:"\uD83D\uDD0E"}),(0,f.jsx)(m.Z,{type:"text",onBlur:t,onKeyDown:function(a){"Enter"===a.key&&t(a)}})]})})})}),(0,f.jsxs)(l.Z,{className:"my-3",children:[(0,f.jsx)(i.Z,{md:"auto",children:(0,f.jsx)(k.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(x.d7,{onChange:function(a){return c(a.map(function(a){return a.value}))},required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:E})})]}),(0,f.jsxs)(l.Z,{className:"my-3",children:[(0,f.jsx)(i.Z,{md:"auto",children:(0,f.jsx)(k.Z.Label,{htmlFor:"status",children:"Users:"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(x.d7,{onChange:function(a){return h(a.map(function(a){return a.value}))},required:!0,name:"users",defaultValue:F,options:F})})]}),b.map(function(a){return(0,f.jsx)(L,{state:a,users:e,search:o.toLowerCase(),setRequest:s},a)})]})]})}function L(a){var b=function(){return m.requests.filter(function(a){var b=a.title,c=a.link;return(null==b?void 0:b.toLowerCase().includes(e))||(null==c?void 0:c.toLowerCase())===e}).map(function(a){var b=a.id,c=a.title,d=a.link,e=a.user,i=a.userID,j=a.donator,k=a.reason,l=a.comments;return(0,f.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return g(a)},children:[(0,f.jsx)("td",{children:b}),(0,f.jsx)("td",{children:c}),(0,f.jsx)("td",{children:d}),(0,f.jsx)("td",{children:e||(i?"<@".concat(i,">"):"Not Found")}),(0,f.jsx)("td",{style:{textAlign:"center"},children:j?"⭐":""}),h&&(0,f.jsx)("td",{children:k}),(0,f.jsx)("td",{children:l})]},b)})},c=a.state,d=a.users,e=a.search,g=a.setRequest,h="hold"===c,j=(0,p.Ps)(D(),G),k=(0,r.a)(j,{variables:{state:c,donator:d}}),m=k.data,n=k.loading,q=k.error;return q&&(console.log(q),u.Am.error("Failed to fetch requests")),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(l.Z,{className:"mt-4",children:(0,f.jsx)(i.Z,{children:(0,f.jsx)("h3",{className:"text-capitalize",children:c})})}),(0,f.jsx)(l.Z,{children:(0,f.jsx)(i.Z,{style:{height:"500px"},children:(0,f.jsxs)("div",{className:w()("overflow-auto h-100",A().table),children:[n&&(0,f.jsx)(y.Z,{dev:!0,className:"mx-auto"}),m&&(0,f.jsxs)(o.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"ID"}),(0,f.jsx)("th",{children:"Title"}),(0,f.jsx)("th",{children:"Link"}),(0,f.jsx)("th",{children:"User"}),(0,f.jsx)("th",{children:"Donator"}),h&&(0,f.jsx)("th",{children:"Reason"}),(0,f.jsx)("th",{children:"Comments"}),(0,f.jsx)("th",{})]})}),(0,f.jsx)("tbody",{children:(0,f.jsx)(b,{})})]})]})})})]})}},8295:function(a){a.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6611),h=c(6792),i=c(6558),j=c(3045),k=c(5893);let l=(0,g.Z)("input-group-text",{Component:"span"}),m=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"checkbox",...a})}),n=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"radio",...a})}),o=f.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:g="div",...i},l)=>{a=(0,h.vE)(a,"input-group");let m=(0,f.useMemo)(()=>({}),[]);return(0,k.jsx)(j.Z.Provider,{value:m,children:(0,k.jsx)(g,{ref:l,...i,className:e()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});o.displayName="InputGroup",b.Z=Object.assign(o,{Text:l,Radio:n,Checkbox:m})},5147:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6792),h=c(5893);let i=f.forwardRef(({bsPrefix:a,className:b,striped:c,bordered:d,borderless:f,hover:i,size:j,variant:k,responsive:l,...m},n)=>{let o=(0,g.vE)(a,"table"),p=e()(b,o,k&&`${o}-${k}`,j&&`${o}-${j}`,c&&`${o}-striped`,d&&`${o}-bordered`,f&&`${o}-borderless`,i&&`${o}-hover`),q=(0,h.jsx)("table",{...m,className:p,ref:n});if(l){let r=`${o}-responsive`;return"string"==typeof l&&(r=`${r}-${l}`),(0,h.jsx)("div",{className:r,children:q})}return q});b.Z=i}},function(a){a.O(0,[45,774,888,179],function(){var b;return a(a.s=1365)}),_N_E=a.O()}])