(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[750],{7434:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/submission",function(){return n(1833)}])},1833:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return N},default:function(){return q}});var s=n(7297),r=n(5893),i=n(7294),l=n(682),a=n(1555),u=n(7931),o=n(2878),c=n(4051),d=n(4716),h=n(2318),x=n(5147),j=n(7283),m=n(1641),f=n(782),Z=n(4184),p=n.n(Z),b=n(2045),v=n(5043),k=n(8295),y=n.n(k);function g(){var e=(0,s.Z)(["\n  query ($state: String!) {\n    submissions(state: [$state]) {\n      ","\n    }\n  }\n"]);return g=function(){return e},e}var _=["Pending","Rejected","Accepted","Published"].map(function(e){return{label:e,value:e.toLowerCase()}}),N=!0;function q(){return(0,r.jsx)(l.Z,{children:(0,r.jsx)(a.Z,{children:(0,r.jsx)($,{})})})}function w(e){var t=e.submission,n=e.setRequest,s=(0,i.useRef)(null);return(0,r.jsx)(u.Z,{show:t,onHide:function(){return n()},centered:!0,children:(0,r.jsx)(u.Z.Body,{children:(0,r.jsxs)(o.Z,{ref:s,children:[(0,r.jsx)(c.Z,{children:(0,r.jsxs)(o.Z.Group,{as:a.Z,children:[(0,r.jsx)(o.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,r.jsx)(o.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==t?void 0:t.title})]})}),(0,r.jsxs)(c.Z,{className:"mt-3",children:[(0,r.jsxs)(o.Z.Group,{as:a.Z,children:[(0,r.jsx)(o.Z.Label,{htmlFor:"link",style:{color:"black"},children:"VGMDB:"}),(0,r.jsx)(o.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==t?void 0:t.vgmdb})]}),(0,r.jsxs)(o.Z.Group,{as:a.Z,children:[(0,r.jsx)(o.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Submitter:"}),(0,r.jsx)(o.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==t?void 0:t.submitter.username})]})]}),(0,r.jsx)(c.Z,{className:"mt-3",children:(0,r.jsxs)(o.Z.Group,{as:a.Z,children:[(0,r.jsx)(o.Z.Label,{htmlFor:"comment",style:{color:"black"},children:"Links:"}),(0,r.jsx)(d.Z,{required:!0,as:"textarea",name:"comment",value:null==t?void 0:t.links,readOnly:!0})]})})]})})})}function $(){var e=(0,i.useState)(["pending"]),t=e[0],n=e[1],s=(0,i.useState)(""),l=s[0],u=s[1],x=(0,i.useState)(),j=x[0],m=x[1],f=function(e){e.persist(),e.preventDefault(),u(e.target.value)};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(w,{submission:j,setRequest:m}),(0,r.jsxs)(o.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,r.jsx)(c.Z,{className:"mb-3",children:(0,r.jsx)(a.Z,{children:(0,r.jsx)(o.Z.Group,{children:(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(h.Z.Text,{children:"\uD83D\uDD0E"}),(0,r.jsx)(d.Z,{type:"text",onBlur:f,onKeyDown:function(e){"Enter"===e.key&&f(e)}})]})})})}),(0,r.jsxs)(c.Z,{className:"my-3",children:[(0,r.jsx)(a.Z,{md:"auto",children:(0,r.jsx)(o.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,r.jsx)(a.Z,{children:(0,r.jsx)(b.d7,{onChange:function(e){return n(e.map(function(e){return e.value}))},required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:_})})]}),t.map(function(e){return(0,r.jsx)(C,{state:e,search:l.toLowerCase(),setRequest:m},e)})]})]})}function C(e){var t=function(){return o.submissions.filter(function(e){var t=e.title,n=e.link;return(null==t?void 0:t.toLowerCase().includes(s))||(null==n?void 0:n.toLowerCase())===s}).map(function(e){var t=e.id,n=e.title,s=e.vgmdb,l=e.submitter,a=e.request;return(0,r.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return i(e)},children:[(0,r.jsx)("td",{children:t}),(0,r.jsx)("td",{children:n}),(0,r.jsx)("td",{children:s}),a?(0,r.jsx)("td",{children:"âœ“"}):(0,r.jsx)("td",{}),(0,r.jsx)("td",{children:l.username})]},t)})},n=e.state,s=e.search,i=e.setRequest,l=(0,j.Ps)(g(),"\n  id\n  title\n  vgmdb\n  links\n  request {\n    id\n  }\n  submitter {\n    username\n  }\n"),u=(0,m.a)(l,{variables:{state:n}}),o=u.data,d=u.loading,h=u.error;return h&&(console.log(h),f.Am.error("Failed to fetch requests")),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.Z,{className:"mt-4",children:(0,r.jsx)(a.Z,{children:(0,r.jsx)("h3",{className:"text-capitalize",children:n})})}),(0,r.jsx)(c.Z,{children:(0,r.jsx)(a.Z,{style:{height:"500px"},children:(0,r.jsxs)("div",{className:p()("overflow-auto h-100",y().table),children:[d&&(0,r.jsx)(v.Z,{dev:!0,className:"mx-auto"}),o&&(0,r.jsxs)(x.Z,{variant:"dark",hover:!0,responsive:!0,style:{overflowX:"visible"},children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Title"}),(0,r.jsx)("th",{children:"Link"}),(0,r.jsx)("th",{children:"Requested"}),(0,r.jsx)("th",{children:"Submitter"})]})}),(0,r.jsx)("tbody",{children:(0,r.jsx)(t,{})})]})]})})})]})}},8295:function(e){e.exports={table:"Request_table__Sr4vK",pagination:"Request_pagination__bcal1"}},2318:function(e,t,n){"use strict";var s=n(4184),r=n.n(s),i=n(7294),l=n(6611),a=n(6792),u=n(6558),o=n(3045),c=n(5893);let d=(0,l.Z)("input-group-text",{Component:"span"}),h=e=>(0,c.jsx)(d,{children:(0,c.jsx)(u.Z,{type:"checkbox",...e})}),x=e=>(0,c.jsx)(d,{children:(0,c.jsx)(u.Z,{type:"radio",...e})}),j=i.forwardRef(({bsPrefix:e,size:t,hasValidation:n,className:s,as:l="div",...u},d)=>{e=(0,a.vE)(e,"input-group");let h=(0,i.useMemo)(()=>({}),[]);return(0,c.jsx)(o.Z.Provider,{value:h,children:(0,c.jsx)(l,{ref:d,...u,className:r()(s,e,t&&`${e}-${t}`,n&&"has-validation")})})});j.displayName="InputGroup",t.Z=Object.assign(j,{Text:d,Radio:x,Checkbox:h})},5147:function(e,t,n){"use strict";var s=n(4184),r=n.n(s),i=n(7294),l=n(6792),a=n(5893);let u=i.forwardRef(({bsPrefix:e,className:t,striped:n,bordered:s,borderless:i,hover:u,size:o,variant:c,responsive:d,...h},x)=>{let j=(0,l.vE)(e,"table"),m=r()(t,j,c&&`${j}-${c}`,o&&`${j}-${o}`,n&&`${j}-striped`,s&&`${j}-bordered`,i&&`${j}-borderless`,u&&`${j}-hover`),f=(0,a.jsx)("table",{...h,className:m,ref:x});if(d){let Z=`${j}-responsive`;return"string"==typeof d&&(Z=`${Z}-${d}`),(0,a.jsx)("div",{className:Z,children:f})}return f});t.Z=u}},function(e){e.O(0,[774,888,179],function(){return e(e.s=7434)}),_N_E=e.O()}]);