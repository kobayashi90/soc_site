(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{244:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/[page]",function(){return c(9042)}])},9042:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return M},default:function(){return N}});var d=c(828),e=c(7297),f=c(5893),g=c(7294),h=c(682),i=c(1555),j=c(1608),k=c(7931),l=c(2053),m=c(5005),n=c(2878),o=c(2318),p=c(4716),q=c(5147),r=c(782),s=c(381),t=c.n(s),u=c(4184),v=c.n(u),w=c(7283),x=c(319),y=c(1641),z=c(1163),A=c(1664),B=c.n(A),C=c(2045),D=c(5043),E=c(1331);function F(){var a=(0,e.Z)(["\n    mutation deleteAlbum($id: ID!){\n      deleteAlbum(id: $id)\n    }\n  "]);return F=function(){return a},a}function G(){var a=(0,e.Z)(["\n      query searchAlbum(\n        $title: String,\n        $page: Int,\n        $limit: Int,\n        $name: String,\n        $status: [String!]!\n      ){\n        searchAlbum(\n          title: $title,\n          page: $page,\n          limit: $limit,\n          status: $status\n        ){\n          rows{\n            id,\n            title,\n            createdAt,\n            updatedAt\n          },\n          count\n        }\n\n        config(name:$name){\n          label: name\n          value\n        }\n      }\n    "]);return G=function(){return a},a}function H(){var a=(0,e.Z)(["\n      query {\n        highlight {\n          value: id\n          label: title\n        }\n      }\n    "]);return H=function(){return a},a}function I(){var a=(0,e.Z)(["\n      mutation Config($name: String!, $value: String!){\n        config(name: $name, value: $value){\n          name\n          value\n        }\n      }\n    "]);return I=function(){return a},a}function J(){var a=(0,e.Z)(["\n      mutation UploadBanner($banner: Upload!){\n        uploadBanner(banner: $banner)\n      }\n    "]);return J=function(){return a},a}function K(){var a=(0,e.Z)(["\n      query {\n        banners\n      }\n    "]);return K=function(){return a},a}function L(){var a=(0,e.Z)(["\n      mutation ($name: String!){\n        selectBanner(name: $name)\n      }\n    "]);return L=function(){return a},a}var M=!0;function N(){return(0,f.jsxs)(h.Z,{fluid:!0,className:"d-flex",children:[(0,f.jsx)(i.Z,{xs:2,className:"pe-3",children:(0,f.jsxs)("div",{className:"sticky-top",children:[(0,f.jsx)("div",{className:"mb-2 mt-3 text-center",children:"Navigation"}),(0,f.jsxs)("div",{className:"py-2 site-form blackblock d-flex flex-column",children:[(0,f.jsx)("a",{href:"#addAlbum",children:"Album List"}),(0,f.jsx)("a",{href:"#addSeries",children:"Edit highlight"}),(0,f.jsx)("a",{href:"#addGame",children:"Edit banner"})]})]})}),(0,f.jsxs)(i.Z,{xs:10,children:[(0,f.jsx)(O,{}),(0,f.jsxs)(j.Z,{children:[(0,f.jsx)(P,{}),(0,f.jsx)(Q,{})]}),(0,f.jsx)(j.Z,{children:(0,f.jsx)(R,{})})]})]})}function O(){var a=function(a){a.persist(),a.preventDefault(),Q({title:a.target.value,page:e-1,limit:10,name:"highlight",status:A})},b=function(){var a=(0,g.useState)(!1),b=a[0],c=a[1],d=(0,g.useState)({}),e=d[0],h=d[1],n=N.searchAlbum,o=e.id,p=e.title;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(k.Z,{centered:!0,show:b,onHide:function(){return c(!1)},children:(0,f.jsxs)(l.Z,{className:"m-3",style:{color:"black"},children:[(0,f.jsx)(j.Z,{children:(0,f.jsx)(i.Z,{children:'Delete the album "'.concat(p,'" (ID: ').concat(o,")?")})}),(0,f.jsx)(j.Z,{className:"mt-2",children:(0,f.jsxs)(i.Z,{children:[(0,f.jsx)(m.Z,{color:"primary",className:"mx-2",onClick:function(){J({variables:{id:o}}).then(function(a){r.Am.success('Deleted album "'.concat(p,'" (').concat(o,") succesfully")),Q()}).catch(function(a){console.log(a),r.Am.error('Failed to delete album "'.concat(p,'" (').concat(o,")"))}).finally(function(){return h(!b)})},children:L?(0,f.jsx)(D.Z,{dev:!0}):"Yes"}),(0,f.jsx)(m.Z,{color:"primary",className:"mx-2",onClick:function(){return h(!b)},children:"No"})]})})]})}),n.rows&&n.rows.map(function(a){var b=a.id,d=a.title,e=a.createdAt,g=a.updatedAt;return(0,f.jsxs)("tr",{children:[(0,f.jsx)(B(),{href:"/admin/album/".concat(b),passHref:!0,legacyBehavior:!0,children:(0,f.jsx)("td",{style:{cursor:"pointer"},children:d})}),(0,f.jsx)(B(),{href:"/admin/album/".concat(b),passHref:!0,legacyBehavior:!0,children:(0,f.jsx)("td",{style:{cursor:"pointer"},children:t()(e).format("DD/MM/YYYY HH:mm:ss")})}),(0,f.jsx)(B(),{href:"/admin/album/".concat(b),passHref:!0,legacyBehavior:!0,children:(0,f.jsx)("td",{style:{cursor:"pointer"},children:t()(g).format("DD/MM/YYYY HH:mm:ss")})}),(0,f.jsx)("td",{children:(0,f.jsx)(m.Z,{onClick:function(){h({id:b,title:d}),c(!0)},children:"Remove"})})]},b)})]})},c=function(){var a=N.searchAlbum,b=(0,E.Hx)(a.count,10),c=(0,E.RB)(b,15,e),d=c.pageList,g=c.currentList,h=c.currentListIndex;return(0,f.jsx)(i.Z,{xs:"auto",className:"pagination mx-auto page-bar",children:g&&(0,f.jsxs)(f.Fragment,{children:[h>0&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(B(),{href:"/admin/1",className:"fas fa-angle-double-left align-middle nav-link"}),(0,f.jsx)(B(),{href:"/admin/".concat(g[0]-1),className:"fas fa-angle-left align-middle nav-link"})]}),g.map(function(a){return(0,f.jsx)(B(),{href:"/admin/".concat(a),className:v()({disabled:a===parseInt(e)},"nav-link"),children:a},a)}),h!==d.length-1&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(B(),{href:"/admin/".concat(g[g.length-1]+1),className:"fas fa-angle-right align-middle nav-link"}),(0,f.jsx)(B(),{href:"/admin/".concat(b[b.length-1]),className:"fas fa-angle-double-right align-middle nav-link"})]})]})})},e=parseInt((0,z.useRouter)().query.page||"1"),h=(0,w.Ps)(F()),s=(0,w.Ps)(G()),u=(0,g.useState)(["show","hidden","coming"]),A=u[0],H=u[1],I=(0,d.Z)((0,x.D)(h),2),J=I[0],K=I[1],L=K.loading,M=(0,y.a)(s,{variables:{title:"",page:e-1,limit:10,name:"highlight",status:A}}),N=M.data,O=M.loading,P=M.error,Q=M.refetch;P&&(console.log(P),r.Am.error("Failed to fetch server info"));var R=["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}});return(0,f.jsxs)(n.Z,{className:"site-form blackblock mt-5",children:[(0,f.jsxs)(j.Z,{className:"my-3",children:[(0,f.jsx)(i.Z,{xs:"auto",children:(0,f.jsx)(n.Z.Group,{children:(0,f.jsx)(B(),{href:"/admin/album/add",passHref:!0,legacyBehavior:!0,children:(0,f.jsx)(m.Z,{variant:"primary",children:"Add Album"})})})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(n.Z.Group,{children:(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(o.Z.Text,{children:"\uD83D\uDD0E"}),(0,f.jsx)(p.Z,{type:"text",onChange:a})]})})})]}),(0,f.jsxs)(j.Z,{className:"my-3",children:[(0,f.jsx)(i.Z,{md:"auto",children:(0,f.jsx)(n.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,f.jsx)(i.Z,{children:(0,f.jsx)(C.d7,{onChange:function(a){return H(a.map(function(a){return a.value}))},required:!0,name:"status",defaultValue:R,options:R})})]}),(0,f.jsx)(j.Z,{children:(0,f.jsxs)(i.Z,{children:[(0,f.jsxs)(q.Z,{variant:"dark",hover:!0,children:[(0,f.jsx)("thead",{children:(0,f.jsxs)("tr",{children:[(0,f.jsx)("th",{children:"Title"}),(0,f.jsx)("th",{children:"Created"}),(0,f.jsx)("th",{children:"Last Updated"}),(0,f.jsx)("th",{})]})}),(0,f.jsx)("tbody",{children:N&&(0,f.jsx)(b,{})})]}),O&&(0,f.jsx)(D.Z,{dev:!0})]})}),(0,f.jsx)(j.Z,{children:N&&(0,f.jsx)(c,{})})]})}function P(){var a=function(a){m({variables:{name:"highlight",value:a.value}}).then(function(a){r.Am.success("Updated highlighted album!"),k()}).catch(function(a){console.log(a),r.Am.error("Failed to update highlighted album")})},b=(0,w.Ps)(H()),c=(0,w.Ps)(I()),e=(0,y.a)(b),g=e.loading,h=e.data,j=e.error,k=e.refetch,l=(0,d.Z)((0,x.D)(c),1),m=l[0];return j&&(console.log(j),r.Am.error("Hightlight: Failed to fetch server info")),(0,f.jsxs)(i.Z,{md:6,className:"mt-3 site-form blackblock p-3",children:[(0,f.jsx)(n.Z.Label,{children:"Highlight album:"}),(0,f.jsx)(C.Q$,{options:{isSingle:!0,defaultValue:null==h?void 0:h.highlight,onChange:a,loading:g}})]})}function Q(){var a=function(a){e({variables:{banner:(0,d.Z)(a.target.files,1)[0]}}).then(function(a){r.Am.success("Updated banner!")}).catch(function(a){console.log(a),r.Am.error("Failed to update banner")}),a.persist(),a.preventDefault()},b=(0,w.Ps)(J()),c=(0,d.Z)((0,x.D)(b),2),e=c[0],g=c[1].loading;return(0,f.jsx)(i.Z,{md:6,className:"mt-3 site-form blackblock p-3",children:(0,f.jsxs)(n.Z.Group,{children:[(0,f.jsx)(n.Z.Label,{htmlFor:"banner",children:"Upload Banner:"}),g?(0,f.jsx)(D.Z,{dev:!0}):(0,f.jsx)(p.Z,{type:"file",onChange:a})]})})}function R(){var a=function(a){m({variables:{name:a.replace(".png","")}}).then(function(a){r.Am.success("Updated banner!"),k()}).catch(function(a){console.log(a),r.Am.error("Failed to update banner")})},b=(0,w.Ps)(K()),c=(0,w.Ps)(L()),e=(0,y.a)(b),g=e.loadingQuery,h=e.data,j=e.error,k=e.refetch,l=(0,d.Z)((0,x.D)(c),2),m=l[0],o=l[1].loading;return j&&(console.log(j),r.Am.error("Hightlight: Failed to fetch server info")),(0,f.jsxs)(i.Z,{md:12,className:"p-0 my-3 site-form blackblock position-relative",children:[(o||g)&&(0,f.jsxs)("div",{className:"p-0 position-absolute h-100 w-100",children:[(0,f.jsx)("div",{className:"p-0 blackblock position-absolute h-100 w-100",style:{backgroundColor:"black",opacity:.65}}),(0,f.jsx)(D.Z,{className:"m-auto"})]}),(0,f.jsxs)("div",{className:"p-3",children:[(0,f.jsx)(n.Z.Label,{children:"Available banners:"}),null==h?void 0:h.banners.map(function(b){return(0,f.jsx)("div",{className:"my-2",onClick:function(){return a(b)},style:{cursor:"pointer",height:"110px",width:"100%",backgroundSize:"cover",backgroundImage:"url('/_next/image?w=3840&q=25&url=".concat("https://cdn.sittingonclouds.net/live/".concat(b))}},b)})]})]})}},2318:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6611),h=c(6792),i=c(6558),j=c(3045),k=c(5893);let l=(0,g.Z)("input-group-text",{Component:"span"}),m=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"checkbox",...a})}),n=a=>(0,k.jsx)(l,{children:(0,k.jsx)(i.Z,{type:"radio",...a})}),o=f.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:g="div",...i},l)=>{a=(0,h.vE)(a,"input-group");let m=(0,f.useMemo)(()=>({}),[]);return(0,k.jsx)(j.Z.Provider,{value:m,children:(0,k.jsx)(g,{ref:l,...i,className:e()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});o.displayName="InputGroup",b.Z=Object.assign(o,{Text:l,Radio:n,Checkbox:m})},5147:function(a,b,c){"use strict";var d=c(4184),e=c.n(d),f=c(7294),g=c(6792),h=c(5893);let i=f.forwardRef(({bsPrefix:a,className:b,striped:c,bordered:d,borderless:f,hover:i,size:j,variant:k,responsive:l,...m},n)=>{let o=(0,g.vE)(a,"table"),p=e()(b,o,k&&`${o}-${k}`,j&&`${o}-${j}`,c&&`${o}-striped`,d&&`${o}-bordered`,f&&`${o}-borderless`,i&&`${o}-hover`),q=(0,h.jsx)("table",{...m,className:p,ref:n});if(l){let r=`${o}-responsive`;return"string"==typeof l&&(r=`${r}-${l}`),(0,h.jsx)("div",{className:r,children:q})}return q});b.Z=i}},function(a){a.O(0,[885,774,888,179],function(){var b;return a(a.s=244)}),_N_E=a.O()}])