(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{244:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/[page]",function(){return c(1736)}])},1736:function(f,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return K},default:function(){return L}});var g=a(4941),h=a(2378),i=a(5893),j=a(7294),k=a(682),l=a(1555),m=a(343),n=a(2053),o=a(1608),p=a(5005),q=a(2878),r=a(2318),s=a(4716),t=a(5147),u=a(782),c=a(381),v=a.n(c),d=a(4184),w=a.n(d),x=a(7283),y=a(319),z=a(7887),A=a(1163),e=a(1664),B=a.n(e),C=a(3907),D=a(9738),E=a(599);function F(){var a=(0,h.Z)(["\n    mutation deleteAlbum($id: ID!){\n      deleteAlbum(id: $id)\n    }\n  "]);return F=function(){return a},a}function G(){var a=(0,h.Z)(["\n      query searchAlbum(\n        $title: String,\n        $page: Int,\n        $limit: Int,\n        $name: String,\n        $status: [String!]!\n      ){\n        searchAlbum(\n          title: $title,\n          page: $page,\n          limit: $limit,\n          status: $status\n        ){\n          rows{\n            id,\n            title,\n            createdAt,\n            updatedAt\n          },\n          count\n        }\n\n        config(name:$name){\n          label: name\n          value\n        }\n      }\n    "]);return G=function(){return a},a}function H(){var a=(0,h.Z)(["\n      query {\n        highlight {\n          value: id\n          label: title\n        }\n      }\n    "]);return H=function(){return a},a}function I(){var a=(0,h.Z)(["\n      mutation Config($name: String!, $value: String!){\n        config(name: $name, value: $value){\n          name\n          value\n        }\n      }\n    "]);return I=function(){return a},a}function J(){var a=(0,h.Z)(["\n      mutation UploadBanner($banner: Upload!){\n        uploadBanner(banner: $banner)\n      }\n    "]);return J=function(){return a},a}var K=!0;function L(){return(0,i.jsxs)(k.Z,{fluid:!0,className:"d-flex",children:[(0,i.jsx)(l.Z,{xs:2,className:"pe-3",children:(0,i.jsxs)("div",{className:"sticky-top",children:[(0,i.jsx)("div",{className:"mb-2 mt-3 text-center",children:"Navigation"}),(0,i.jsxs)("div",{className:"py-2 site-form blackblock d-flex flex-column",children:[(0,i.jsx)("a",{href:"#addAlbum",children:"OST List"}),(0,i.jsx)("a",{href:"#addSeries",children:"Edit highlight"}),(0,i.jsx)("a",{href:"#addGame",children:"Edit banner"})]})]})}),(0,i.jsxs)(l.Z,{xs:10,children:[(0,i.jsx)(M,{}),(0,i.jsx)(N,{}),(0,i.jsx)(O,{})]})]})}function M(){var h=parseInt((0,A.useRouter)().query.page||"1"),k=(0,x.Ps)(F()),H=(0,x.Ps)(G()),b=(0,j.useState)(["show","hidden","coming"]),I=b[0],L=b[1],c=(0,g.Z)((0,y.D)(k),2),M=c[0],J=c[1],N=J.loading,a=(0,z.a)(H,{variables:{title:"",page:h-1,limit:10,name:"highlight",status:I}}),d=a.data,K=a.loading,e=a.error,O=a.refetch;e&&(console.log(e),u.Am.error("Failed to fetch server info"));var f=["Show","Hidden","Coming"].map(function(a){return{label:a,value:a.toLowerCase()}});return(0,i.jsxs)(q.Z,{className:"site-form blackblock mt-5",children:[(0,i.jsxs)(o.Z,{className:"my-3",children:[(0,i.jsx)(l.Z,{xs:"auto",children:(0,i.jsx)(q.Z.Group,{children:(0,i.jsx)(B(),{href:"/admin/album/add",passHref:!0,children:(0,i.jsx)(p.Z,{variant:"primary",children:"Add Album"})})})}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(q.Z.Group,{children:(0,i.jsxs)(r.Z,{children:[(0,i.jsx)(r.Z.Text,{children:"\uD83D\uDD0E"}),(0,i.jsx)(s.Z,{type:"text",onChange:function(a){a.persist(),a.preventDefault(),O({title:a.target.value,page:h-1,limit:10,name:"highlight",status:I})}})]})})})]}),(0,i.jsxs)(o.Z,{className:"my-3",children:[(0,i.jsx)(l.Z,{md:"auto",children:(0,i.jsx)(q.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,i.jsx)(l.Z,{children:(0,i.jsx)(C.d7,{onChange:function(a){return L(a.map(function(a){return a.value}))},required:!0,name:"status",defaultValue:f,options:f})})]}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(l.Z,{children:[(0,i.jsxs)(t.Z,{variant:"dark",hover:!0,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Title"}),(0,i.jsx)("th",{children:"Created"}),(0,i.jsx)("th",{children:"Last Updated"}),(0,i.jsx)("th",{})]})}),(0,i.jsx)("tbody",{children:d&&(0,i.jsx)(function(){var a=(0,j.useState)(!1),f=a[0],k=a[1],b=(0,j.useState)({}),c=b[0],q=b[1],e=d.searchAlbum,g=c.id,h=c.title;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m.Z,{centered:!0,show:f,onHide:function(){return k(!1)},children:(0,i.jsxs)(n.Z,{className:"m-3",style:{color:"black"},children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(l.Z,{children:'Delete the OST "'.concat(h,'" (ID: ').concat(g,")?")})}),(0,i.jsx)(o.Z,{className:"mt-2",children:(0,i.jsxs)(l.Z,{children:[(0,i.jsx)(p.Z,{color:"primary",className:"mx-2",onClick:function(){M({variables:{id:g}}).then(function(a){u.Am.success('Deleted OST "'.concat(h,'" (').concat(g,") succesfully")),O()}).catch(function(a){console.log(a),u.Am.error('Failed to delete OST "'.concat(h,'" (').concat(g,")"))}).finally(function(){return q(!f)})},children:N?(0,i.jsx)(D.Z,{dev:!0}):"Yes"}),(0,i.jsx)(p.Z,{color:"primary",className:"mx-2",onClick:function(){return q(!f)},children:"No"})]})})]})}),e.rows&&e.rows.map(function(a){var b=a.id,c=a.title,d=a.createdAt,e=a.updatedAt;return(0,i.jsxs)("tr",{children:[(0,i.jsx)(B(),{href:"/admin/album/".concat(b),passHref:!0,children:(0,i.jsx)("td",{style:{cursor:"pointer"},children:c})}),(0,i.jsx)(B(),{href:"/admin/album/".concat(b),passHref:!0,children:(0,i.jsx)("td",{style:{cursor:"pointer"},children:v()(d).format("DD/MM/YYYY HH:mm:ss")})}),(0,i.jsx)(B(),{href:"/admin/album/".concat(b),passHref:!0,children:(0,i.jsx)("td",{style:{cursor:"pointer"},children:v()(e).format("DD/MM/YYYY HH:mm:ss")})}),(0,i.jsx)("td",{children:(0,i.jsx)(p.Z,{onClick:function(){q({id:b,title:c}),k(!0)},children:"Remove"})})]},b)})]})},{})})]}),K&&(0,i.jsx)(D.Z,{dev:!0})]})}),(0,i.jsx)(o.Z,{children:d&&(0,i.jsx)(function(){var f=d.searchAlbum,b=(0,E.Hx)(f.count,10),c=(0,E.RB)(b,15,h),g=c.pageList,a=c.currentList,e=c.currentListIndex;return(0,i.jsx)(l.Z,{xs:"auto",className:"pagination mx-auto page-bar",children:a&&(0,i.jsxs)(i.Fragment,{children:[e>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B(),{href:"/admin/1",children:(0,i.jsx)("a",{className:"fas fa-angle-double-left align-middle nav-link"})}),(0,i.jsx)(B(),{href:"/admin/".concat(a[0]-1),children:(0,i.jsx)("a",{className:"fas fa-angle-left align-middle nav-link"})})]}),a.map(function(a){return(0,i.jsx)(B(),{href:"/admin/".concat(a),children:(0,i.jsx)("a",{className:w()({disabled:a===parseInt(h)},"nav-link"),children:a})},a)}),e!==g.length-1&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(B(),{href:"/admin/".concat(a[a.length-1]+1),children:(0,i.jsx)("a",{className:"fas fa-angle-right align-middle nav-link"})}),(0,i.jsx)(B(),{href:"/admin/".concat(b[b.length-1]),children:(0,i.jsx)("a",{className:"fas fa-angle-double-right align-middle nav-link"})})]})]})})},{})})]})}function N(){var d=(0,x.Ps)(H()),e=(0,x.Ps)(I()),a=(0,z.a)(d),f=a.loading,b=a.data,c=a.error,j=a.refetch,h=(0,g.Z)((0,y.D)(e),1),k=h[0];return c&&(console.log(c),u.Am.error("Hightlight: Failed to fetch server info")),(0,i.jsxs)(l.Z,{md:12,className:"mt-3 site-form blackblock p-3",children:[(0,i.jsx)(q.Z.Label,{children:"Highlight OST:"}),(0,i.jsx)(C.Q$,{isSingle:!0,defaultValue:b&&[b.highlight],onChange:function(a){k({variables:{name:"highlight",value:a.value}}).then(function(a){u.Am.success("Updated highlighted OST!"),j()}).catch(function(a){console.log(a),u.Am.error("Failed to update highlighted OST")})},loading:f})]})}function O(){var b=(0,x.Ps)(J()),a=(0,g.Z)((0,y.D)(b),2),d=a[0],c=a[1].loading;return(0,i.jsx)(l.Z,{md:12,className:"mt-3 site-form blackblock p-3",children:(0,i.jsxs)(q.Z.Group,{children:[(0,i.jsx)(q.Z.Label,{htmlFor:"banner",children:"Upload Banner:"}),c?(0,i.jsx)(D.Z,{dev:!0}):(0,i.jsx)(s.Z,{type:"file",onChange:function(a){d({variables:{banner:(0,g.Z)(a.target.files,1)[0]}}).then(function(a){u.Am.success("Updated banner!")}).catch(function(a){console.log(a),u.Am.error("Failed to update banner")}),a.persist(),a.preventDefault()}})]})})}},2318:function(h,c,a){"use strict";var d=a(4184),i=a.n(d),e=a(7294),f=a(6611),j=a(6792),k=a(6558),l=a(3045),m=a(5893);let g=(0,f.Z)("input-group-text",{Component:"span"}),b=e.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:f="div",...g},h)=>{a=(0,j.vE)(a,"input-group");let k=(0,e.useMemo)(()=>({}),[]);return(0,m.jsx)(l.Z.Provider,{value:k,children:(0,m.jsx)(f,{ref:h,...g,className:i()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});b.displayName="InputGroup",c.Z=Object.assign(b,{Text:g,Radio:a=>(0,m.jsx)(g,{children:(0,m.jsx)(k.Z,{type:"radio",...a})}),Checkbox:a=>(0,m.jsx)(g,{children:(0,m.jsx)(k.Z,{type:"checkbox",...a})})})},5147:function(f,b,a){"use strict";var c=a(4184),g=a.n(c),d=a(7294),h=a(6792),i=a(5893);let e=d.forwardRef(({bsPrefix:j,className:k,striped:l,bordered:m,borderless:n,hover:o,size:d,variant:e,responsive:b,...p},q)=>{let a=(0,h.vE)(j,"table"),r=g()(k,a,e&&`${a}-${e}`,d&&`${a}-${d}`,l&&`${a}-striped`,m&&`${a}-bordered`,n&&`${a}-borderless`,o&&`${a}-hover`),f=(0,i.jsx)("table",{...p,className:r,ref:q});if(b){let c=`${a}-responsive`;return"string"==typeof b&&(c=`${c}-${b}`),(0,i.jsx)("div",{className:c,children:f})}return f});b.Z=e}},function(a){a.O(0,[885,907,774,888,179],function(){return a(a.s=244)}),_N_E=a.O()}])