(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[476],{1365:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/request",function(){return c(5384)}])},5384:function(d,b,a){"use strict";a.r(b),a.d(b,{"__N_SSP":function(){return F},default:function(){return G}});var e=a(5893),f=a(7294),g=a(682),h=a(1555),i=a(343),j=a(2878),k=a(1608),l=a(4716),m=a(2318),n=a(5147),o=a(7283),p=a(319),q=a(7887),r=a(3907),s=a(9738),c=a(7422),t=a.n(c),u=a(782);function v(c,a){(null==a||a>c.length)&&(a=c.length);for(var b=0,d=new Array(a);b<a;b++)d[b]=c[b];return d}function w(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(b,e){var f,g,a=null==b?null:"undefined"!=typeof Symbol&&b[Symbol.iterator]||b["@@iterator"];if(null!=a){var c=[],d=!0,h=!1;try{for(a=a.call(b);!(d=(f=a.next()).done)&&(c.push(f.value),!e||c.length!==e);d=!0);}catch(i){h=!0,g=i}finally{try{d||null==a.return||a.return()}finally{if(h)throw g}}return c}}(a,b)||y(a,b)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(b,a){return a||(a=b.slice(0)),Object.freeze(Object.defineProperties(b,{raw:{value:Object.freeze(a)}}))}function y(a,c){if(a){if("string"==typeof a)return v(a,c);var b=Object.prototype.toString.call(a).slice(8,-1);if("Object"===b&&a.constructor&&(b=a.constructor.name),"Map"===b||"Set"===b)return Array.from(b);if("Arguments"===b||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(b))return v(a,c)}}function z(){var a=x(["\n    mutation ($id: ID!, $reason: String){\n      rejectRequest(id: $id, reason: $reason)\n    }\n  "]);return z=function(){return a},a}function A(){var a=x(["\n    mutation ($id: ID!, $title: String, $link: String, $state: String, $comments: String, $reason: String){\n      editRequest(id: $id, title: $title, link: $link, state: $state, comments: $comments, reason: $reason){\n        ","\n      }\n    }\n  "]);return A=function(){return a},a}function B(){var a=x(["\n  query ($state: String!, $donator: [Boolean!]!) {\n    requests(state: [$state], donator: $donator) {\n      ","\n    }\n  }\n"]);return B=function(){return a},a}var C=["Complete","Pending","Hold"].map(function(a){return{label:a,value:a.toLowerCase()}}),D=["Donators","Members"].map(function(a){return{label:a,value:"Donators"===a}}),E="\n  id\n  title\n  link\n  user\n  userID\n  state\n  donator\n  reason\n  comments\n",F=!0;function G(){return(0,e.jsx)(g.Z,{children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(I,{})})})}function H(b){var a=b.request,y=b.setRequest,n=(0,o.Ps)(z()),q=(0,o.Ps)(A(),E),c=w((0,p.D)(n),2),B=c[0],r=c[1],d=r.loading,g=w((0,p.D)(q),2),D=g[0],v=g[1],m=v.loading,x=(0,f.useRef)(null);return(0,e.jsxs)(i.Z,{show:a,onHide:function(){return y()},centered:!0,children:[(0,e.jsx)(i.Z.Body,{children:(0,e.jsxs)(j.Z,{ref:x,children:[(0,e.jsxs)(k.Z,{children:[(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"title",style:{color:"black"},children:"Title:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"title",defaultValue:null==a?void 0:a.title})]}),(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"link",style:{color:"black"},children:"Link:"}),(0,e.jsx)(j.Z.Control,{required:!0,type:"text",name:"link",defaultValue:null==a?void 0:a.link})]})]}),(0,e.jsx)(k.Z,{className:"mt-3",children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"state",style:{color:"black"},children:"Status:"}),(0,e.jsx)("select",{className:"form-control",name:"state",defaultValue:null==a?void 0:a.state,children:C.map(function(a){return(0,e.jsx)("option",{value:a.value,children:a.label},a.value)})})]})}),(0,e.jsx)(k.Z,{className:"mt-3",children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"comment",style:{color:"black"},defaultValue:null==a?void 0:a.comment,children:"Comments:"}),(0,e.jsx)(l.Z,{required:!0,as:"textarea",name:"comment"})]})}),(0,e.jsx)(k.Z,{className:"mt-3",children:(0,e.jsxs)(j.Z.Group,{as:h.Z,children:[(0,e.jsx)(j.Z.Label,{htmlFor:"reason",style:{color:"black"},defaultValue:null==a?void 0:a.reason,children:"Reason:"}),(0,e.jsx)(l.Z,{required:!0,as:"textarea",name:"reason"})]})})]})}),(0,e.jsxs)(i.Z.Footer,{children:[(0,e.jsx)(s.l,{loading:d,disabled:m,variant:"danger",onClick:function(){var c=x.current,b=t()(c,{hash:!0});b.id=a.id,B({variables:b}).then(function(a){u.Am.success("Request rejected succesfully!"),y(),c.reset()}).catch(function(a){console.log(a),u.Am.error(a.message,{autoclose:!1})})},children:"Reject"}),(0,e.jsx)(s.l,{loading:m,disabled:d,variant:"primary",onClick:function(){var c=x.current,b=t()(c,{hash:!0});b.id=a.id,D({variables:b}).then(function(a){u.Am.success("Updated request succesfully!"),y(a.data.editRequest),c.reset()}).catch(function(a){console.log(a),u.Am.error(a.message,{autoclose:!1})})},children:"Save Changes"})]})]})}function I(){var a=(0,f.useState)(["pending"]),g=a[0],p=a[1],b=(0,f.useState)(D.map(function(a){return a.value})),q=b[0],s=b[1],c=(0,f.useState)(""),t=c[0],u=c[1],d=(0,f.useState)(),i=d[0],n=d[1],o=function(a){a.persist(),a.preventDefault(),u(a.target.value)};return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(H,{request:i,setRequest:n}),(0,e.jsxs)(j.Z,{className:"site-form blackblock mt-5 py-4",children:[(0,e.jsx)(k.Z,{className:"mb-3",children:(0,e.jsx)(h.Z,{children:(0,e.jsx)(j.Z.Group,{children:(0,e.jsxs)(m.Z,{children:[(0,e.jsx)(m.Z.Text,{children:"\uD83D\uDD0E"}),(0,e.jsx)(l.Z,{type:"text",onBlur:o,onKeyDown:function(a){"Enter"===a.key&&o(a)}})]})})})}),(0,e.jsxs)(k.Z,{className:"my-3",children:[(0,e.jsx)(h.Z,{md:"auto",children:(0,e.jsx)(j.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(r.d7,{onChange:function(a){return p(a.map(function(a){return a.value}))},required:!0,name:"status",defaultValue:[{label:"Pending",value:"pending"}],options:C})})]}),(0,e.jsxs)(k.Z,{className:"my-3",children:[(0,e.jsx)(h.Z,{md:"auto",children:(0,e.jsx)(j.Z.Label,{htmlFor:"status",children:"Users:"})}),(0,e.jsx)(h.Z,{children:(0,e.jsx)(r.d7,{onChange:function(a){return s(a.map(function(a){return a.value}))},required:!0,name:"users",defaultValue:D,options:D})})]}),g.map(function(a){return(0,e.jsx)(J,{state:a,users:q,search:t.toLowerCase(),setRequest:n},a)})]})]})}function J(a){var b=a.state,f=a.users,m=a.search,p=a.setRequest,g="hold"===b,i=(0,o.Ps)(B(),E),c=(0,q.a)(i,{variables:{state:b,donator:f}}),j=c.data,l=c.loading,d=c.error;return d&&(console.log(d),u.Am.error("Failed to fetch requests")),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(k.Z,{className:"mt-4",children:(0,e.jsx)(h.Z,{children:(0,e.jsx)("h3",{className:"text-capitalize",children:b})})}),(0,e.jsx)(k.Z,{children:(0,e.jsx)(h.Z,{style:{height:"500px"},children:(0,e.jsxs)("div",{className:"overflow-auto h-100",children:[l&&(0,e.jsx)(s.Z,{dev:!0,className:"mx-auto"}),j&&(0,e.jsxs)(n.Z,{variant:"dark",hover:!0,responsive:!0,children:[(0,e.jsx)("thead",{children:(0,e.jsxs)("tr",{children:[(0,e.jsx)("th",{children:"ID"}),(0,e.jsx)("th",{children:"Title"}),(0,e.jsx)("th",{children:"Link"}),(0,e.jsx)("th",{children:"User"}),(0,e.jsx)("th",{children:"Donator"}),g&&(0,e.jsx)("th",{children:"Reason"}),(0,e.jsx)("th",{children:"Comments"}),(0,e.jsx)("th",{})]})}),(0,e.jsx)("tbody",{children:(0,e.jsx)(function(){return j.requests.filter(function(a){var b=a.title,c=a.link;return(null==b?void 0:b.toLowerCase().includes(m))||(null==c?void 0:c.toLowerCase())===m}).map(function(a){var b=a.id,d=a.title,f=a.link,h=a.user,c=a.userID,i=a.donator,j=a.reason,k=a.comments;return(0,e.jsxs)("tr",{style:{cursor:"pointer"},onClick:function(){return p(a)},children:[(0,e.jsx)("td",{children:b}),(0,e.jsx)("td",{children:d}),(0,e.jsx)("td",{children:f}),(0,e.jsx)("td",{children:h||(c?"<@".concat(c,">"):"Not Found")}),(0,e.jsx)("td",{style:{textAlign:"center"},children:i?"\u2B50":""}),g&&(0,e.jsx)("td",{children:j}),(0,e.jsx)("td",{children:k})]},b)})},{})})]})]})})})]})}},2318:function(h,c,a){"use strict";var d=a(4184),i=a.n(d),e=a(7294),f=a(6611),j=a(6792),k=a(6558),l=a(3045),m=a(5893);let g=(0,f.Z)("input-group-text",{Component:"span"}),b=e.forwardRef(({bsPrefix:a,size:b,hasValidation:c,className:d,as:f="div",...g},h)=>{a=(0,j.vE)(a,"input-group");let k=(0,e.useMemo)(()=>({}),[]);return(0,m.jsx)(l.Z.Provider,{value:k,children:(0,m.jsx)(f,{ref:h,...g,className:i()(d,a,b&&`${a}-${b}`,c&&"has-validation")})})});b.displayName="InputGroup",c.Z=Object.assign(b,{Text:g,Radio:a=>(0,m.jsx)(g,{children:(0,m.jsx)(k.Z,{type:"radio",...a})}),Checkbox:a=>(0,m.jsx)(g,{children:(0,m.jsx)(k.Z,{type:"checkbox",...a})})})},5147:function(f,b,a){"use strict";var c=a(4184),g=a.n(c),d=a(7294),h=a(6792),i=a(5893);let e=d.forwardRef(({bsPrefix:j,className:k,striped:l,bordered:m,borderless:n,hover:o,size:d,variant:e,responsive:b,...p},q)=>{let a=(0,h.vE)(j,"table"),r=g()(k,a,e&&`${a}-${e}`,d&&`${a}-${d}`,l&&`${a}-striped`,m&&`${a}-bordered`,n&&`${a}-borderless`,o&&`${a}-hover`),f=(0,i.jsx)("table",{...p,className:r,ref:q});if(b){let c=`${a}-responsive`;return"string"==typeof b&&(c=`${c}-${b}`),(0,i.jsx)("div",{className:c,children:f})}return f});b.Z=e}},function(a){a.O(0,[907,774,888,179],function(){return a(a.s=1365)}),_N_E=a.O()}])