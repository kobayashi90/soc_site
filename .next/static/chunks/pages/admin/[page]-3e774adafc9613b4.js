(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[582],{244:function(e,n,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/[page]",function(){return a(9042)}])},9042:function(e,n,a){"use strict";a.r(n),a.d(n,{__N_SSP:function(){return I},default:function(){return Y}});var t=a(828),r=a(7297),i=a(5893),s=a(7294),l=a(682),c=a(1555),o=a(4051),d=a(7931),u=a(2053),h=a(5005),m=a(2878),f=a(2318),x=a(4716),g=a(5147),j=a(782),p=a(381),b=a.n(p),v=a(4184),Z=a.n(v),N=a(7283),k=a(319),y=a(1641),$=a(1163),A=a(1664),w=a.n(A),D=a(2045),C=a(5043),S=a(1331);function _(){var e=(0,r.Z)(["\n    mutation deleteAlbum($id: ID!){\n      deleteAlbum(id: $id)\n    }\n  "]);return _=function(){return e},e}function H(){var e=(0,r.Z)(["\n      query searchAlbum(\n        $title: String,\n        $page: Int,\n        $limit: Int,\n        $name: String,\n        $status: [String!]!\n      ){\n        searchAlbum(\n          title: $title,\n          page: $page,\n          limit: $limit,\n          status: $status\n        ){\n          rows{\n            id,\n            title,\n            createdAt,\n            updatedAt\n          },\n          count\n        }\n\n        config(name:$name){\n          label: name\n          value\n        }\n      }\n    "]);return H=function(){return e},e}function F(){var e=(0,r.Z)(["\n      query {\n        highlight {\n          value: id\n          label: title\n        }\n      }\n    "]);return F=function(){return e},e}function P(){var e=(0,r.Z)(["\n      mutation Config($name: String!, $value: String!){\n        config(name: $name, value: $value){\n          name\n          value\n        }\n      }\n    "]);return P=function(){return e},e}function E(){var e=(0,r.Z)(["\n      mutation UploadBanner($banner: Upload!){\n        uploadBanner(banner: $banner)\n      }\n    "]);return E=function(){return e},e}function L(){var e=(0,r.Z)(["\n      query {\n        banners\n      }\n    "]);return L=function(){return e},e}function B(){var e=(0,r.Z)(["\n      mutation ($name: String!){\n        selectBanner(name: $name)\n      }\n    "]);return B=function(){return e},e}var I=!0;function Y(){return(0,i.jsxs)(l.Z,{fluid:!0,className:"d-flex",children:[(0,i.jsx)(c.Z,{xs:2,className:"pe-3",children:(0,i.jsxs)("div",{className:"sticky-top",children:[(0,i.jsx)("div",{className:"mb-2 mt-3 text-center",children:"Navigation"}),(0,i.jsxs)("div",{className:"py-2 site-form blackblock d-flex flex-column",children:[(0,i.jsx)("a",{href:"#addAlbum",children:"Album List"}),(0,i.jsx)("a",{href:"#addSeries",children:"Edit highlight"}),(0,i.jsx)("a",{href:"#addGame",children:"Edit banner"})]})]})}),(0,i.jsxs)(c.Z,{xs:10,children:[(0,i.jsx)(U,{}),(0,i.jsxs)(o.Z,{children:[(0,i.jsx)(q,{}),(0,i.jsx)(R,{})]}),(0,i.jsx)(o.Z,{children:(0,i.jsx)(G,{})})]})]})}function U(){var e=function(e){e.persist(),e.preventDefault(),q({title:e.target.value,page:r-1,limit:10,name:"highlight",status:A})},n=function(){var e=(0,s.useState)(!1),n=e[0],a=e[1],t=(0,s.useState)({}),r=t[0],l=t[1],m=I.searchAlbum,f=r.id,x=r.title;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(d.Z,{centered:!0,show:n,onHide:function(){return a(!1)},children:(0,i.jsxs)(u.Z,{className:"m-3",style:{color:"black"},children:[(0,i.jsx)(o.Z,{children:(0,i.jsx)(c.Z,{children:'Delete the album "'.concat(x,'" (ID: ').concat(f,")?")})}),(0,i.jsx)(o.Z,{className:"mt-2",children:(0,i.jsxs)(c.Z,{children:[(0,i.jsx)(h.Z,{color:"primary",className:"mx-2",onClick:function(){E({variables:{id:f}}).then(function(e){j.Am.success('Deleted album "'.concat(x,'" (').concat(f,") succesfully")),q()}).catch(function(e){console.log(e),j.Am.error('Failed to delete album "'.concat(x,'" (').concat(f,")"))}).finally(function(){return l(!n)})},children:L?(0,i.jsx)(C.Z,{dev:!0}):"Yes"}),(0,i.jsx)(h.Z,{color:"primary",className:"mx-2",onClick:function(){return l(!n)},children:"No"})]})})]})}),m.rows&&m.rows.map(function(e){var n=e.id,t=e.title,r=e.createdAt,s=e.updatedAt;return(0,i.jsxs)("tr",{children:[(0,i.jsx)(w(),{href:"/admin/album/".concat(n),passHref:!0,legacyBehavior:!0,children:(0,i.jsx)("td",{style:{cursor:"pointer"},children:t})}),(0,i.jsx)(w(),{href:"/admin/album/".concat(n),passHref:!0,legacyBehavior:!0,children:(0,i.jsx)("td",{style:{cursor:"pointer"},children:b()(r).format("DD/MM/YYYY HH:mm:ss")})}),(0,i.jsx)(w(),{href:"/admin/album/".concat(n),passHref:!0,legacyBehavior:!0,children:(0,i.jsx)("td",{style:{cursor:"pointer"},children:b()(s).format("DD/MM/YYYY HH:mm:ss")})}),(0,i.jsx)("td",{children:(0,i.jsx)(h.Z,{onClick:function(){l({id:n,title:t}),a(!0)},children:"Remove"})})]},n)})]})},a=function(){var e=I.searchAlbum,n=(0,S.Hx)(e.count,10),a=(0,S.RB)(n,15,r),t=a.pageList,s=a.currentList,l=a.currentListIndex;return(0,i.jsx)(c.Z,{xs:"auto",className:"pagination mx-auto page-bar",children:s&&(0,i.jsxs)(i.Fragment,{children:[l>0&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w(),{href:"/admin/1",className:"fas fa-angle-double-left align-middle nav-link"}),(0,i.jsx)(w(),{href:"/admin/".concat(s[0]-1),className:"fas fa-angle-left align-middle nav-link"})]}),s.map(function(e){return(0,i.jsx)(w(),{href:"/admin/".concat(e),className:Z()({disabled:e===parseInt(r)},"nav-link"),children:e},e)}),l!==t.length-1&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w(),{href:"/admin/".concat(s[s.length-1]+1),className:"fas fa-angle-right align-middle nav-link"}),(0,i.jsx)(w(),{href:"/admin/".concat(n[n.length-1]),className:"fas fa-angle-double-right align-middle nav-link"})]})]})})},r=parseInt((0,$.useRouter)().query.page||"1"),l=(0,N.Ps)(_()),p=(0,N.Ps)(H()),v=(0,s.useState)(["show","hidden","coming"]),A=v[0],F=v[1],P=(0,t.Z)((0,k.D)(l),2),E=P[0],L=P[1].loading,B=(0,y.a)(p,{variables:{title:"",page:r-1,limit:10,name:"highlight",status:A}}),I=B.data,Y=B.loading,U=B.error,q=B.refetch;U&&(console.log(U),j.Am.error("Failed to fetch server info"));var R=["Show","Hidden","Coming"].map(function(e){return{label:e,value:e.toLowerCase()}});return(0,i.jsxs)(m.Z,{className:"site-form blackblock mt-5",children:[(0,i.jsxs)(o.Z,{className:"my-3",children:[(0,i.jsx)(c.Z,{xs:"auto",children:(0,i.jsx)(m.Z.Group,{children:(0,i.jsx)(w(),{href:"/admin/album/add",passHref:!0,legacyBehavior:!0,children:(0,i.jsx)(h.Z,{variant:"primary",children:"Add Album"})})})}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(m.Z.Group,{children:(0,i.jsxs)(f.Z,{children:[(0,i.jsx)(f.Z.Text,{children:"\uD83D\uDD0E"}),(0,i.jsx)(x.Z,{type:"text",onChange:e})]})})})]}),(0,i.jsxs)(o.Z,{className:"my-3",children:[(0,i.jsx)(c.Z,{md:"auto",children:(0,i.jsx)(m.Z.Label,{htmlFor:"status",children:"Status:"})}),(0,i.jsx)(c.Z,{children:(0,i.jsx)(D.d7,{onChange:function(e){return F(e.map(function(e){return e.value}))},required:!0,name:"status",defaultValue:R,options:R})})]}),(0,i.jsx)(o.Z,{children:(0,i.jsxs)(c.Z,{children:[(0,i.jsxs)(g.Z,{variant:"dark",hover:!0,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Title"}),(0,i.jsx)("th",{children:"Created"}),(0,i.jsx)("th",{children:"Last Updated"}),(0,i.jsx)("th",{})]})}),(0,i.jsx)("tbody",{children:I&&(0,i.jsx)(n,{})})]}),Y&&(0,i.jsx)(C.Z,{dev:!0})]})}),(0,i.jsx)(o.Z,{children:I&&(0,i.jsx)(a,{})})]})}function q(){var e=function(e){u({variables:{name:"highlight",value:e.value}}).then(function(e){j.Am.success("Updated highlighted album!"),d()}).catch(function(e){console.log(e),j.Am.error("Failed to update highlighted album")})},n=(0,N.Ps)(F()),a=(0,N.Ps)(P()),r=(0,y.a)(n),s=r.loading,l=r.data,o=r.error,d=r.refetch,u=(0,t.Z)((0,k.D)(a),1)[0];return o&&(console.log(o),j.Am.error("Hightlight: Failed to fetch server info")),(0,i.jsxs)(c.Z,{md:6,className:"mt-3 site-form blackblock p-3",children:[(0,i.jsx)(m.Z.Label,{children:"Highlight album:"}),(0,i.jsx)(D.Q$,{options:{isSingle:!0,defaultValue:null==l?void 0:l.highlight,onChange:e,loading:s}})]})}function R(){var e=function(e){r({variables:{banner:(0,t.Z)(e.target.files,1)[0]}}).then(function(e){j.Am.success("Updated banner!")}).catch(function(e){console.log(e),j.Am.error("Failed to update banner")}),e.persist(),e.preventDefault()},n=(0,N.Ps)(E()),a=(0,t.Z)((0,k.D)(n),2),r=a[0],s=a[1].loading;return(0,i.jsx)(c.Z,{md:6,className:"mt-3 site-form blackblock p-3",children:(0,i.jsxs)(m.Z.Group,{children:[(0,i.jsx)(m.Z.Label,{htmlFor:"banner",children:"Upload Banner:"}),s?(0,i.jsx)(C.Z,{dev:!0}):(0,i.jsx)(x.Z,{type:"file",onChange:e})]})})}function G(){var e=function(e){h({variables:{name:e.replace(".png","")}}).then(function(e){j.Am.success("Updated banner!"),d()}).catch(function(e){console.log(e),j.Am.error("Failed to update banner")})},n=(0,N.Ps)(L()),a=(0,N.Ps)(B()),r=(0,y.a)(n),s=r.loadingQuery,l=r.data,o=r.error,d=r.refetch,u=(0,t.Z)((0,k.D)(a),2),h=u[0],f=u[1].loading;return o&&(console.log(o),j.Am.error("Hightlight: Failed to fetch server info")),(0,i.jsxs)(c.Z,{md:12,className:"p-0 my-3 site-form blackblock position-relative",children:[(f||s)&&(0,i.jsxs)("div",{className:"p-0 position-absolute h-100 w-100",children:[(0,i.jsx)("div",{className:"p-0 blackblock position-absolute h-100 w-100",style:{backgroundColor:"black",opacity:.65}}),(0,i.jsx)(C.Z,{className:"m-auto"})]}),(0,i.jsxs)("div",{className:"p-3",children:[(0,i.jsx)(m.Z.Label,{children:"Available banners:"}),null==l?void 0:l.banners.map(function(n){return(0,i.jsx)("div",{className:"my-2",onClick:function(){return e(n)},style:{cursor:"pointer",height:"110px",width:"100%",backgroundSize:"cover",backgroundImage:"url('/_next/image?w=3840&q=25&url=".concat("https://cdn.sittingonclouds.net/live/".concat(n))}},n)})]})]})}},2318:function(e,n,a){"use strict";var t=a(4184),r=a.n(t),i=a(7294),s=a(6611),l=a(6792),c=a(6558),o=a(3045),d=a(5893);let u=(0,s.Z)("input-group-text",{Component:"span"}),h=e=>(0,d.jsx)(u,{children:(0,d.jsx)(c.Z,{type:"checkbox",...e})}),m=e=>(0,d.jsx)(u,{children:(0,d.jsx)(c.Z,{type:"radio",...e})}),f=i.forwardRef(({bsPrefix:e,size:n,hasValidation:a,className:t,as:s="div",...c},u)=>{e=(0,l.vE)(e,"input-group");let h=(0,i.useMemo)(()=>({}),[]);return(0,d.jsx)(o.Z.Provider,{value:h,children:(0,d.jsx)(s,{ref:u,...c,className:r()(t,e,n&&`${e}-${n}`,a&&"has-validation")})})});f.displayName="InputGroup",n.Z=Object.assign(f,{Text:u,Radio:m,Checkbox:h})},5147:function(e,n,a){"use strict";var t=a(4184),r=a.n(t),i=a(7294),s=a(6792),l=a(5893);let c=i.forwardRef(({bsPrefix:e,className:n,striped:a,bordered:t,borderless:i,hover:c,size:o,variant:d,responsive:u,...h},m)=>{let f=(0,s.vE)(e,"table"),x=r()(n,f,d&&`${f}-${d}`,o&&`${f}-${o}`,a&&`${f}-striped`,t&&`${f}-bordered`,i&&`${f}-borderless`,c&&`${f}-hover`),g=(0,l.jsx)("table",{...h,className:x,ref:m});if(u){let j=`${f}-responsive`;return"string"==typeof u&&(j=`${j}-${u}`),(0,l.jsx)("div",{className:j,children:g})}return g});n.Z=c}},function(e){e.O(0,[885,774,888,179],function(){return e(e.s=244)}),_N_E=e.O()}]);